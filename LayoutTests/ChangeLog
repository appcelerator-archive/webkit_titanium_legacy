2009-06-24  Oliver Hunt  <oliver@apple.com>

        Reviewed by Darin Adler.

        <rdar://problem/6940519> REGRESSION (Safari 4 Public Beta - TOT): google.com/adplanner shows blank page instead of site details in "basic research'

        Add test cases for excessively large comma expressions.

        * fast/js/excessive-comma-usage-expected.txt: Added.
        * fast/js/excessive-comma-usage.html: Added.
        * fast/js/resources/excessive-comma-usage.js: Added.

2009-06-24  Rob Buis  <rwlbuis@gmail.com>

        Reviewed by Niko.

        Tests for:
        https://bugs.webkit.org/show_bug.cgi?id=26392
        Bug 26392: In html, modification of xlink:href of an newly inserted svg image does not work.
        https://bugs.webkit.org/show_bug.cgi?id=26328
        Bug 26328: changing href attribute of svg images dows not work when changing display attribute as well

        * platform/mac/svg/custom/js-update-image-and-display-expected.checksum: Added
        * platform/mac/svg/custom/js-update-image-and-display-expected.png: Added
        * platform/mac/svg/custom/js-update-image-and-display-expected.txt: Added
        * svg/custom/js-update-image-and-display.svg: Added.
        * platform/mac/svg/custom/js-update-image-and-display2-expected.checksum: Added
        * platform/mac/svg/custom/js-update-image-and-display2-expected.png: Added
        * platform/mac/svg/custom/js-update-image-and-display2-expected.txt: Added
        * svg/custom/js-update-image-and-display2.svg: Added.
        * platform/mac/svg/custom/js-update-image-and-display3-expected.checksum: Added
        * platform/mac/svg/custom/js-update-image-and-display3-expected.png: Added
        * platform/mac/svg/custom/js-update-image-and-display3-expected.txt: Added
        * svg/custom/js-update-image-and-display3.svg: Added.

2009-06-24  Dan Bernstein  <mitz@apple.com>

        - add Windows results for one new test and one test
          whose Mac results changed recently

        * platform/win/fast/forms/search-vertical-alignment-expected.checksum: Added.
        * platform/win/fast/forms/search-vertical-alignment-expected.png: Added.
        * platform/win/fast/forms/search-vertical-alignment-expected.txt: Added.
        * platform/win/fast/replaced/width100percent-searchfield-expected.checksum: Added.
        * platform/win/fast/replaced/width100percent-searchfield-expected.png: Added.
        * platform/win/fast/replaced/width100percent-searchfield-expected.txt:

2009-06-24  David Hyatt  <hyatt@apple.com>

        Reviewed by Sam Weinig.

        Add test for https://bugs.webkit.org/show_bug.cgi?id=26687.

        * fast/dom/HTMLDataGridElement/DataGridColumns-basic-expected.txt: Added.
        * fast/dom/HTMLDataGridElement/DataGridColumns-basic.html: Added.

2009-06-24  Oliver Hunt  <oliver@apple.com>

        Reviewed by NOBODY (Disabling failing test!).

        * media/video-canvas.html-disabled: Renamed from LayoutTests/media/video-canvas.html.

2009-06-24  Eric Seidel  <eric@webkit.org>

        Reviewed by Mark Rowe.

        Add new drag tests to the Skipped lists for non-mac platforms.

        Skipped tests:
        fast/events/drag-to-navigate.html
        fast/events/prevent-drag-to-navigate.html

        * platform/gtk/Skipped:
        * platform/qt/Skipped:
        * platform/win/Skipped:

2009-06-24  Oliver Hunt  <oliver@apple.com>

        Reviewed by NOBODY (attempted test fix).

        Attempting to make test more reliable.

        * media/video-canvas.html:

2009-06-05  Eric Seidel  <eric@webkit.org>

        Reviewed by Oliver Hunt.

        https://bugs.webkit.org/show_bug.cgi?id=25922
        Fix dropEffect = "none" to work as expected.

        * fast/events/drag-to-navigate-expected.txt: Copied from LayoutTests/editing/selection/doubleclick-whitespace-img-crash-expected.txt.
        * fast/events/drag-to-navigate.html: Added.
        * fast/events/prevent-drag-to-navigate-expected.txt: Copied from LayoutTests/editing/selection/doubleclick-whitespace-img-crash-expected.txt.
        * fast/events/prevent-drag-to-navigate.html: Added.
        * fast/events/resources/file-for-drag-to-navigate.html: Added.
        * fast/events/resources/file-for-prevent-drag-to-navigate.html: Added.

2009-06-23  Oliver Hunt  <oliver@apple.com>

        Reviewed by NOBODY (missed a file).

        Add expected results for test i landed earlier

        * fast/js/dictionary-no-cache-expected.txt: Added.

2009-06-23  Oliver Hunt  <oliver@apple.com> and Eric Carlson  <eric.carlson@apple.com>

        Reviewed by Sam Weinig and Dave Hyatt.

        <rdar://problem/6164797> Add Canvas API to allow drawing of <video> frames
        <https://bugs.webkit.org/show_bug.cgi?id=25920>

        Add tests for drawing a video to the canvas element.

        * media/video-canvas-expected.txt: Added.
        * media/video-canvas.html: Added.

2009-06-23  Oliver Hunt  <oliver@apple.com>

        Reviewed by Gavin Barraclough.

        <rdar://problem/6992806> REGRESSION: Enumeration can skip new properties in cases of prototypes that have more than 64 (26593)
        <https://bugs.webkit.org/show_bug.cgi?id=26593>

        Add tests to ensure we correctly invalidate caching that depends on structure chains
        that include dictionaries.

        * fast/js/dictionary-no-cache.html: Added.
        * fast/js/dictionary-no-cache-expected.txt: Added.
        * fast/js/resources/dictionary-no-cache.js: Added.

2009-06-23  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Mark Rowe.
        
        Resets the results for a test that was missed in 
        http://trac.webkit.org/changeset/45016.

        * editing/execCommand/5142012-3-expected.txt:

2009-06-23  Sam Weinig  <sam@webkit.org>

        Reviewed by Dave Hyatt.

        Test for https://bugs.webkit.org/show_bug.cgi?id=26516
        Add initial implementation of DataGridDataSource

        * fast/dom/HTMLDataGridElement: Added.
        * fast/dom/HTMLDataGridElement/DataGridDataSource-basic-expected.txt: Added.
        * fast/dom/HTMLDataGridElement/DataGridDataSource-basic.html: Added.

2009-06-23  Ryosuke Niwa  <rniwa@google.com>

        Reviewed by Justin Garcia.

        Undo the changeset 21212 to fix the regression bug 14062.
        The changeset 21212 attempted to fix rdar://problem/5002441.
        The changeset 21212 modified InsertTextCommand::input so as to convert
        all spaces in text to non-breaking spaces for rdar://problem/5002441.
        However, the bug was originally caused by rebalanceWhitespaceAt
        and this workaround introduced a regression bug 14062.
        Because rebalanceWhitespaceAt appears to behave correctly now,
        the workaround introduced in 21212 is no longer needed.

        The following test cases are affected by this change.
        This patch removes unappropriate non-breaking spaces (&nbsp;) and
        inserts normal spaces instead.

        * editing/deleting/2610675-1-expected.txt: Replaced.
        * editing/deleting/2610675-2-expected.txt: Replaced.
        * editing/deleting/2610675-3-expected.txt: Replaced.
        * editing/inserting/insert-before-link-1-expected.txt: Replaced.
        * editing/inserting/space-after-removeformat-expected.txt: Added.
        * editing/inserting/space-after-removeformat.html: Added.
        * platform/mac/editing/execCommand/5482023-expected.checksum: Replaced.
        * platform/mac/editing/execCommand/5482023-expected.png: Replaced.
        * platform/mac/editing/execCommand/5482023-expected.txt: Replaced.
        * platform/mac/editing/input/text-input-controller-expected.txt: Replaced.
        * platform/mac/editing/inserting/editable-html-element-expected.checksum: Replaced.
        * platform/mac/editing/inserting/editable-html-element-expected.png: Replaced.
        * platform/mac/editing/inserting/editable-html-element-expected.txt: Replaced.
        * platform/mac/editing/pasteboard/4989774-expected.checksum: Replaced.
        * platform/mac/editing/pasteboard/4989774-expected.png: Replaced.
        * platform/mac/editing/pasteboard/4989774-expected.txt: Replaced.
        * platform/mac/editing/selection/4983858-expected.checksum: Replaced.
        * platform/mac/editing/selection/4983858-expected.png: Replaced.
        * platform/mac/editing/selection/4983858-expected.txt: Replaced.

2009-06-23  Beth Dakin  <bdakin@apple.com>

        Reviewed by Dave Hyatt.

        Test for https://bugs.webkit.org/show_bug.cgi?id=26523 <col> 
        elements width can't be changed with javascript

        * fast/dom/HTMLTableColElement: Added.
        * fast/dom/HTMLTableColElement/resize-table-using-col-width.html: Added.
        * platform/mac/fast/dom/HTMLTableColElement: Added.
        * platform/mac/fast/dom/HTMLTableColElement/resize-table-using-col-width-expected.checksum: Added.
        * platform/mac/fast/dom/HTMLTableColElement/resize-table-using-col-width-expected.png: Added.
        * platform/mac/fast/dom/HTMLTableColElement/resize-table-using-col-width-expected.txt: Added.

2009-06-23  Ojan Vafai  <ojan@chromium.org>

        Reviewed by Dan Bernstein.

        This test hits an edge case where typingStyle would never get cleared.
        In addition to making every text insertion go into its own text node,
        this caused large performance problems.
        
        https://bugs.webkit.org/show_bug.cgi?id=26279

        * editing/execCommand/5770834-1-expected.txt:
            These results match how they were before r43243. It's not clear to me 
            why changes to font-size are affecting text-align styling though.
        * editing/inserting/font-size-clears-from-typing-style-expected.txt: Added.
        * editing/inserting/font-size-clears-from-typing-style.html: Added.
        * editing/inserting/resources/TEMPLATE.html: Copied from LayoutTests/editing/execCommand/resources/TEMPLATE.html.
        * editing/inserting/resources/font-size-clears-from-typing-style.js: Added.
        * platform/mac/editing/execCommand/remove-formatting-2-expected.txt:

2009-06-23  Kevin McCullough  <kmccullough@apple.com>

        Reviewed by Darin Adler.

        <rdar://problem/6994790> CrashTracer: [USER] 8 crashes in Mail trying to
        add a blank line to pasted Facebook content (under
        CompositeEditCommand::positionAvoidingSpecialElementBoundary)

        * editing/inserting/return-with-object-element-expected.txt: Added.
        * editing/inserting/return-with-object-element.html: Added.

2009-06-23  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Dave Hyatt.
        
        https://bugs.webkit.org/show_bug.cgi?id=24863
        
        Testcase for reflections on composited layers.

        * compositing/reflections/reflection-on-composited.html: Added.
        * platform/mac/compositing/reflections/reflection-on-composited-expected.txt: Added.

2009-06-23  Antti Koivisto  <antti@apple.com>

        Reviewed by Darin Adler.
        
        https://bugs.webkit.org/show_bug.cgi?id=26643
        Memory cache should respect Cache-Control: no-store
        
        Update the test to cover no-store.

        * http/tests/cache/subresource-expiration-expected.txt:
        * http/tests/cache/subresource-expiration.html:

2009-06-23  Kevin McCullough  <kmccullough@apple.com>

        Reviewed by Adele Peterson.

        <rdar://problem/6902203> REGRESSION: 'Return' insertion point incorrect
        after manually quoting blank line then hitting return

        * editing/inserting/insert-br-quoted-007-expected.txt: Added.
        * editing/inserting/insert-br-quoted-007.html: Added.

2009-06-23  Eric Carlson  <eric.carlson@apple.com>

        Reviewed by NOBODY, layout tests fix.
        
        'timeupdate' events are, by definition, timing dependent so it isn't
        a good idea to log them in layout test results.

        * media/event-attributes-expected.txt:
        * media/event-attributes.html:

2009-06-23  Eric Carlson  <eric.carlson@apple.com>

        Reviewed by Darin Adler.
        
        <rdar://problem/6978938> Need HTML 5 event attributes for media elements

        * media/event-attributes-expected.txt: Added.
        * media/event-attributes.html: Added.
        * media/progress-event-total.html: Cleanup, use event handler attributes.
        * media/progress-event.html: Ditto.

        * media/video-size-intrinsic-scale.html: Remove duplicate 'waitForEvent("ratechange")'
        * media/video-source-add-src.html: Ditto.
        * media/video-source-error.html: Ditto.
        * media/video-timeupdate-during-playback.html: Ditto.

        * platform/gtk/Skipped: Skip new test.

2009-06-23  Adam Barth  <abarth@webkit.org>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=26589

        More tests for the XSSAuditor.  (I converted the server side to Perl
        after Sam reviewed the patch because the PHP scripts didn't agree with
        the Tiger and Windows buildbots.)

        * http/tests/security/xssAuditor/img-onerror-tricky-expected.txt: Added.
        * http/tests/security/xssAuditor/img-onerror-tricky.html: Added.
        * http/tests/security/xssAuditor/link-onclick-expected.txt: Added.
        * http/tests/security/xssAuditor/link-onclick.html: Added.
        * http/tests/security/xssAuditor/property-escape-expected.txt: Added.
        * http/tests/security/xssAuditor/property-escape.html: Added.
        * http/tests/security/xssAuditor/resources/echo-intertag-post-and-notify.pl: Added.
        * http/tests/security/xssAuditor/resources/echo-intertag-post.pl: Added.
        * http/tests/security/xssAuditor/resources/echo-intertag-utf-7.pl: Added.
        * http/tests/security/xssAuditor/resources/echo-intertag.php: Removed.
        * http/tests/security/xssAuditor/resources/echo-intertag.pl: Added.
        * http/tests/security/xssAuditor/resources/echo-property.pl: Added.
        * http/tests/security/xssAuditor/resources/redir.php: Added.
        * http/tests/security/xssAuditor/resources/xss.js: Added.
        * http/tests/security/xssAuditor/script-tag-convoluted-expected.txt: Added.
        * http/tests/security/xssAuditor/script-tag-convoluted.html: Added.
        * http/tests/security/xssAuditor/script-tag-open-redirect-expected.txt: Added.
        * http/tests/security/xssAuditor/script-tag-open-redirect.html: Added.
        * http/tests/security/xssAuditor/script-tag-post-expected.txt: Added.
        * http/tests/security/xssAuditor/script-tag-post.html: Added.
        * http/tests/security/xssAuditor/script-tag-redirect-expected.txt: Added.
        * http/tests/security/xssAuditor/script-tag-redirect.html: Added.
        * http/tests/security/xssAuditor/script-tag-utf-7-expected.txt: Added.
        * http/tests/security/xssAuditor/script-tag-utf-7.html: Added.
        * http/tests/security/xssAuditor/script-tag-with-source-expected.txt: Added.
        * http/tests/security/xssAuditor/script-tag-with-source.html: Added.
        * http/tests/security/xssAuditor/script-tag.html:

2009-06-22  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Alexey Proskuryakov.

        https://bugs.webkit.org/show_bug.cgi?id=17820

        Skip layout tests for DST if the test runs not in PST/PDT.

        * fast/js/date-DST-time-cusps-expected.txt:
        * fast/js/date-big-setdate-expected.txt:
        * fast/js/resources/date-DST-time-cusps.js:
        * fast/js/resources/date-big-setdate.js:

2009-06-22  Oliver Hunt  <oliver@apple.com>

        Reviewed by Alexey Proskuryakov.

        Bug 26640: JSON.stringify needs to special case Boolean objects
        <https://bugs.webkit.org/show_bug.cgi?id=26640>

        Add tests for serialisation of wrapped and unwrapped primitives.

        * fast/js/JSON-stringify-expected.txt:
        * fast/js/resources/JSON-stringify.js:
        * fast/js/resources/json2-es5-compat.js:
          Modify Str() to match ES5 errata

2009-06-22  Sam Weinig  <sam@webkit.org>

        Reviewed by Gavin Barraclough.

        Add event handler attribute getter/setters to HTMLFrameSetElement
        as specified in HTML 5.  These match the ones on HTMLBodyElement.

        * fast/dom/event-attribute-availability-expected.txt:
        * fast/dom/resources/event-attribute-availability.js:

2009-06-22  Oliver Hunt  <oliver@apple.com>

        Reviewed by Darin Adler.

        Bug 26591: Support revivers in JSON.parse
        <https://bugs.webkit.org/show_bug.cgi?id=26591>

        Test cases for JSON.parse with a reviver function.

        * fast/js/JSON-parse-expected.txt:
        * fast/js/resources/JSON-parse.js:
        (createTests.log):
        (createTests.result):
        (createTests.logOrder):
        (createTests.var):
        (createTests.throwAfterFifthCall):
        (createTests):

2009-06-22  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Dave Hyatt.
        
        https://bugs.webkit.org/show_bug.cgi?id=26430
        
        Testcase for a layer's composited position being affected by a later sibling.

        * compositing/sibling-positioning.html: Added.
        * platform/mac/compositing/sibling-positioning-expected.txt: Added.

2009-06-22  Sam Weinig  <sam@webkit.org>

        Reviewed by Mark Rowe.

        Add event handler attribute getter/setters to HTMLBodyElement
        as specified in HTML 5.

        * fast/dom/event-attribute-availability-expected.txt:
        * fast/dom/resources/event-attribute-availability.js:

2009-05-21  Eric Seidel  <eric@webkit.org>

        Reviewed by Maciej Stachowiak.

        Expose files in the clipboard in ondrop events.
        https://bugs.webkit.org/show_bug.cgi?id=25916

        File.fileSize subtests fail due to limitations of DRT during http tests:
        https://bugs.webkit.org/show_bug.cgi?id=25909

        Directory subtests fail until correct of directory File tests is decided by:
        https://bugs.webkit.org/show_bug.cgi?id=25879

        * http/tests/security/clipboard/clipboard-file-access-expected.txt: Added.
        * http/tests/security/clipboard/clipboard-file-access.html: Added.
        * http/tests/security/clipboard/resources/TEMPLATE.html: Added.
        * http/tests/security/clipboard/resources/apple.gif: Copied from LayoutTests/editing/pasteboard/resources/apple.gif.
        * http/tests/security/clipboard/resources/clipboard-file-access.js: Added.
        (var):
        (moveMouseToCenterOfElement):
        (dragFilesOntoDragTarget):
        (fileListShouldBe):
        (draggingPathsShouldResultInFiles):
        (runTest):
        * http/tests/security/clipboard/resources/mozilla.gif: Copied from LayoutTests/editing/pasteboard/resources/mozilla.gif.

2009-06-22  David Levin  <levin@chromium.org>

        Reviewed by Alexey Proskuryakov.

        Fix layout tests to account for removal of DOMStringList, which was done
        in http://trac.webkit.org/changeset/44943.

        * fast/dom/Window/window-properties-expected.txt:
        * fast/js/global-constructors-expected.txt:

2009-06-22  David Levin  <levin@chromium.org>

        Reviewed by David Hyatt and Eric Seidel.

        REGRESSION: When the main page (ScrollView) has a custom scrollbar, it crashes on destruction.
        https://bugs.webkit.org/show_bug.cgi?id=26326

        Test that refreshing an iframe with custom scrollbars works without crashing.

        * scrollbars/resources/page-with-custom-scrollbars.html: Added.
        * scrollbars/scrollbar-crash-on-refresh-expected.txt: Added.
        * scrollbars/scrollbar-crash-on-refresh.html: Added.

2009-06-22  Dan Bernstein  <mitz@apple.com>

        Reviewed by Simon Fraser.

        - test for https://bugs.webkit.org/show_bug.cgi?id=23606
          <rdar://problem/6537777> CSS gradient not repainted when image load
          completes

        * fast/repaint/background-generated.html: Added.
        * platform/mac/fast/repaint/background-generated-expected.checksum: Added.
        * platform/mac/fast/repaint/background-generated-expected.png: Added.
        * platform/mac/fast/repaint/background-generated-expected.txt: Added.

2009-06-22  Darin Adler  <darin@apple.com>

        * platform/gtk/Skipped: Skip two new tests.

2009-06-22  Darin Adler  <darin@apple.com>

        * fast/js/JSON-stringify-expected.txt: Update results.

2009-06-21  Oliver Hunt  <oliver@apple.com>

        Reviewed by Darin Adler.

        Bug 26592: Support standard toJSON functions

        Add tests of Date.toJSON.

        * fast/js/JSON-stringify-expected.txt:
        * fast/js/resources/JSON-stringify.js:
        (createTests.result):
        (createTests.result.push.):

2009-06-21  Oliver Hunt  <oliver@apple.com>

        Reviewed by Sam Weinig.

        Bug 26594: JSC needs to support Date.toISOString
        <https://bugs.webkit.org/show_bug.cgi?id=26594>

        A few basic correctness tests for Date.toISOString.

        * fast/js/date-toisostring-expected.txt: Added.
        * fast/js/date-toisostring.html: Added.
        * fast/js/resources/date-toisostring.js: Added.

2009-06-21  Sam Weinig  <sam@webkit.org>

        Reviewed by Oliver Hunt.

        Test for https://bugs.webkit.org/show_bug.cgi?id=26596
        Only expose event handler attributes to elements and documents.

        * fast/dom/event-attribute-availability-expected.txt: Added.
        * fast/dom/event-attribute-availability.html: Added.
        * fast/dom/resources/event-attribute-availability.js: Added.

2009-06-21  Daniel Bates  <dbates@intudata.com>

        Reviewed by Adam Barth.
        
        Test for https://bugs.webkit.org/show_bug.cgi?id=26580
        
        Tests that XSSAuditor (if enabled) prevents script execution in child window.

        * http/tests/security/xssAuditor/link-opens-new-window-expected.txt: Added.
        * http/tests/security/xssAuditor/link-opens-new-window.html: Added.
        * http/tests/security/xssAuditor/resources/echo-intertag-and-notify.php: Added.

2009-06-21  Dan Bernstein  <mitz@apple.com>

        Rubber-stamped by Mark Rowe.

        - make repaint tests more reliable when run in Safari

        * fast/repaint/resources/repaint.js:
        (runRepaintTest): Increased the timeout from 0 to 100, to ensure that
        painting occurs once before repaintTest() is called.

2009-06-21  Oliver Hunt  <oliver@apple.com>

        Reviewed by Darin Adler and Cameron Zwarich.

        Bug 26587: Support JSON.parse

        Add tests to cover basic usage of JSON.parse

        * fast/js/JSON-parse.html: Added.
        * fast/js/JSON-parse-expected.txt: Added.
        * fast/js/resources/JSON-parse.js: Added.
        (createTests.result):
        (createTests):

2009-06-21  Drew Wilson  <atwilson@google.com>
 
        Reviewed by David Levin.
       
        <https://bugs.webkit.org/show_bug.cgi?id=26448>

        New tests for MessagePort GC cases that weren't previously covered.

        * fast/events/message-channel-gc-4-expected.txt: Added.
        Test for case where both MessagePorts are in-transit (cloned) when a GC occurs.
        * fast/events/message-channel-gc-4.html-disabled: Added.

2009-06-21  Drew Wilson  <atwilson@google.com>

        Reviewed by David Levin.

        <https://bugs.webkit.org/show_bug.cgi?id=25043>
        Updated MessageChannel/MessagePorts tests to reflect latest spec (close event has been removed).
        Added more tests of port cloning.

        * fast/events/message-channel-gc-2-expected.txt:
        * fast/events/message-channel-gc-2.html-disabled:
        * fast/events/message-channel-gc-3-expected.txt:
        * fast/events/message-channel-gc-3.html-disabled:
        * fast/events/message-channel-gc-expected.txt:
        * fast/events/message-channel-gc.html-disabled:
        * fast/events/message-port-clone-expected.txt: Added.
        * fast/events/message-port-clone.html-disabled: Added.
        * fast/events/message-port-expected.txt:
        * fast/events/message-port-no-wrapper-expected.txt: Added.
        * fast/events/message-port-onclose-expected.txt: Removed.
        * fast/events/message-port-onclose.html-disabled: Removed.
        * fast/events/message-port.html-disabled:

2009-06-21  Dan Bernstein  <mitz@apple.com>

        Reviewed by Sam Weinig.

        - test for https://bugs.webkit.org/show_bug.cgi?id=15383
          <rdar://problem/5682745> resize: vertical does not restrict to vertical
          resize

        * fast/css/resize-single-axis-expected.txt: Added.
        * fast/css/resize-single-axis.html: Added.

2009-06-21  Sam Weinig  <sam@webkit.org>

        Reviewed by Eric Seidel.

        Test for https://bugs.webkit.org/show_bug.cgi?id=26578
        event.currentTarget for listener registered on window should point to the window object like in Firefox

        * fast/events/event-trace-expected.txt: Added.
        * fast/events/event-trace.html: Added.

2009-06-21  Dan Bernstein  <mitz@apple.com>

        Reviewed by Sam Weinig.

        - test for https://bugs.webkit.org/show_bug.cgi?id=9694
          resize value not compared

        * fast/css/resize-value-compared-expected.txt: Added.
        * fast/css/resize-value-compared.html: Added.

2009-06-21  Darin Adler  <darin@apple.com>

        * platform/gtk/Skipped: Skip one more test.

2009-06-20  Darin Adler  <darin@apple.com>

        * platform/gtk/Skipped: Skip some new tests.

2009-06-19  Alice Liu  <alice.liu@apple.com>

        Fix https://bugs.webkit.org/show_bug.cgi?id=26568 
        Repro crash animating GIF if previously used in a closed window's back/forward list
        Also filed as <rdar://problem/6978362>

        Reviewed by Maciej Stachowiak.

        Adding resource used in WebCore/manual-tests/animated-gif-bfcache-crash.html
        * http/tests/misc/resources/animated-gif-with-offsets.gif: Added.

2009-06-20  Sam Weinig  <sam@webkit.org>

        Reviewed by Adam Barth.

        Test for https://bugs.webkit.org/show_bug.cgi?id=26554

        Test writing to parent and top.

        * http/tests/security/cross-frame-access-put-expected.txt:
        * http/tests/security/cross-frame-access-put.html:
        * http/tests/security/resources/cross-frame-iframe-for-put-test.html:

2009-06-20  Mark Rowe  <mrowe@apple.com>

        Reviewed by Dan Bernstein.

        Test for <https://bugs.webkit.org/show_bug.cgi?id=15106>.
        Bug 15106: REGRESSION: Can't drag text as element when user-select is set to none

        * editing/selection/user-drag-element-and-user-select-none-expected.txt: Added.
        * editing/selection/user-drag-element-and-user-select-none.html: Added.

2009-06-20  Darin Adler  <darin@apple.com>

        Reviewed by Dan Bernstein.

        Bug 26528: REGRESSION (r44674): Assertion in TextIterator::pushFullyClippedState while counting matches for "a" on apple.com
        https://bugs.webkit.org/show_bug.cgi?id=26528
        rdar://problem/6985329

        * editing/selection/find-in-text-control-expected.txt: Updated to expect
        finding text in <input type="text"> and <input type="search">, but not
        in <input type="password">.

        * editing/selection/find-in-text-control.html: Added tests for <input>
        elements as well as <textarea> elements. Also tweaked result output
        format to accomodate multiple text nodes.

2009-06-20  Xan Lopez  <xlopez@igalia.com>

        Skip new accessibility test, we still lack and accessibilityController.

        * platform/gtk/Skipped:

2009-06-20  Xan Lopez  <xlopez@igalia.com>

        We don't seem to support these new HTTP tests either, skip them.

        * platform/gtk/Skipped:

2009-06-20  Xan Lopez  <xlopez@igalia.com>

        Skip test that requires eventSender.

        * platform/gtk/Skipped:

2009-06-19  Ryosuke Niwa  <rniwa@google.com>

        Reviewed by Maciej Stachowiak.

        This fixs the bug 26361. The original test case did not invoke the event that
        triggered the actual test. This patch adds code to invoke this event, and also
        converts it from a pixel test to a dumpAsText test.

        * editing/deleting/5156801-expected.txt: Added.
        * editing/deleting/5156801.html:
        * platform/mac/editing/deleting/5156801-expected.checksum: Removed.
        * platform/mac/editing/deleting/5156801-expected.png: Removed.
        * platform/mac/editing/deleting/5156801-expected.txt: Removed.
        * platform/qt/editing/deleting/5156801-expected.txt: Removed.

2009-06-19  David Hyatt  <hyatt@apple.com>

        Reviewed by Anders Carlsson.

        https://bugs.webkit.org/show_bug.cgi?id=26547
        
        Implement the IDL interface for HTMLDataGridColELement.

        * fast/dom/Window/window-properties-expected.txt:
        * fast/js/global-constructors-expected.txt:

2009-06-19  Dan Bernstein  <mitz@apple.com>

        Reviewed by Dave Hyatt.

        - text for <rdar://problem/6967596> Safari hung using 100% CPU when I
          tried to look up a word in Dictionary using command-control-d

        * editing/selection/move-by-line-005-expected.txt: Added.
        * editing/selection/move-by-line-005.html: Added.

2009-06-19  Dan Bernstein  <mitz@apple.com>

        Reviewed by Anders Carlsson.

        - update test results after r44806

        * platform/mac/fast/replaced/width100percent-searchfield-expected.txt:

2009-06-18  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Oliver Hunt.

        https://bugs.webkit.org/show_bug.cgi?id=26426

        Use 1<<23-1 as steps of no-repeat patterns instead of 100000000.0f.
        The original number cannot be represented by mantissa of float
        (23bit) so that it caused some error.

        * fast/canvas/image-object-in-canvas.html:
        * platform/mac/fast/canvas/image-object-in-canvas-expected.checksum:
        * platform/mac/fast/canvas/image-object-in-canvas-expected.png:
        * platform/mac/fast/canvas/image-object-in-canvas-expected.txt:

2009-06-18  Adam Barth  <abarth@webkit.org>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=26199

        Added a basic test for the XSSAuditor.

        * http/tests/security/xssAuditor/resources/echo-intertag.php: Added.
        * http/tests/security/xssAuditor/script-tag-expected.txt: Added.
        * http/tests/security/xssAuditor/script-tag.html: Added.

2009-06-18  Dirk Schulze  <krit@webkit.org>

        Reviewed by Oliver Hunt.

        Test for feOffset with the primitiveUnits objectBoundingBox
        and userSpaceOnUse.

        * platform/mac/svg/filters/feOffset-expected.checksum: Added.
        * platform/mac/svg/filters/feOffset-expected.png: Added.
        * platform/mac/svg/filters/feOffset-expected.txt: Added.
        * svg/filters/feOffset.svg: Added.

2009-06-18  Dirk Schulze  <krit@webkit.org>

        Reviewed by Oliver Hunt.

        Added a test of batik and a own one to check behavior of the
        new feTile effect in SVG.

        * platform/mac/svg/batik/filters/feTile-expected.checksum: Added.
        * platform/mac/svg/batik/filters/feTile-expected.png: Added.
        * platform/mac/svg/batik/filters/feTile-expected.txt: Added.
        * platform/mac/svg/filters/feTile-expected.checksum: Added.
        * platform/mac/svg/filters/feTile-expected.png: Added.
        * platform/mac/svg/filters/feTile-expected.txt: Added.
        * svg/batik/filters/feTile.svg: Added.
        * svg/filters/feTile.svg: Added.

2009-06-18  Dirk Schulze  <krit@webkit.org>

        Reviewed by Oliver Hunt.

        Check the feMerge implementation.

        * platform/mac/svg/filters/feMerge-expected.checksum: Added.
        * platform/mac/svg/filters/feMerge-expected.png: Added.
        * platform/mac/svg/filters/feMerge-expected.txt: Added.
        * svg/filters/feMerge.svg: Added.

2009-06-18  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        Test for Bug 26522: In DOM mode, VoiceOver reads some mouseover text on web sites strangely.
        Strangely the layout output for another test changed, but the actual test was ok.

        * accessibility/non-data-table-cell-title-ui-element-expected.txt: Added.
        * accessibility/non-data-table-cell-title-ui-element.html: Added.
        * platform/mac/accessibility/table-multi-bodies-expected.txt:

2009-06-18  Ryosuke Niwa  <rniwa@google.com>

        Reviewed by Eric Seidel.

        The following pixel tests have been converted into dumpastext tests. This
        fixes the bug 26336 partially.

        * editing/execCommand/insertHTML-expected.txt: Added.
        * editing/execCommand/insertHTML.html:
        * editing/execCommand/switch-list-type-expected.txt: Added.
        * editing/execCommand/switch-list-type.html:
        * platform/mac/editing/execCommand/insertHTML-expected.checksum: Removed.
        * platform/mac/editing/execCommand/insertHTML-expected.png: Removed.
        * platform/mac/editing/execCommand/insertHTML-expected.txt: Removed.
        * platform/mac/editing/execCommand/switch-list-type-expected.checksum: Removed.
        * platform/mac/editing/execCommand/switch-list-type-expected.png: Removed.
        * platform/mac/editing/execCommand/switch-list-type-expected.txt: Removed.
        * platform/qt/editing/execCommand/insertHTML-expected.txt: Removed.
        * platform/qt/editing/execCommand/switch-list-type-expected.txt: Removed.

2009-06-18  Ryosuke Niwa  <rniwa@google.com>

        Reviewed by Eric Seidel.

        The following pixel tests have been converted into dumpastext tests. This
        fixes the bug 26336 partially.

        * editing/execCommand/5207369-expected.txt: Added.
        * editing/execCommand/5207369.html:
        * editing/execCommand/5210032-expected.txt: Added.
        * editing/execCommand/5210032.html:
        * editing/execCommand/5432254-1-expected.txt: Added.
        * editing/execCommand/5432254-1.html:
        * platform/mac/editing/execCommand/5207369-expected.checksum: Removed.
        * platform/mac/editing/execCommand/5207369-expected.png: Removed.
        * platform/mac/editing/execCommand/5207369-expected.txt: Removed.
        * platform/mac/editing/execCommand/5210032-expected.checksum: Removed.
        * platform/mac/editing/execCommand/5210032-expected.png: Removed.
        * platform/mac/editing/execCommand/5210032-expected.txt: Removed.
        * platform/mac/editing/execCommand/5432254-1-expected.checksum: Removed.
        * platform/mac/editing/execCommand/5432254-1-expected.png: Removed.
        * platform/mac/editing/execCommand/5432254-1-expected.txt: Removed.
        * platform/qt/editing/execCommand/5207369-expected.txt: Removed.
        * platform/qt/editing/execCommand/5210032-expected.txt: Removed.
        * platform/qt/editing/execCommand/5432254-1-expected.txt: Removed.

2009-06-18  Ryosuke Niwa  <rniwa@google.com>

        Reviewed by Eric Seidel.

        The following pixel tests have been converted into dumpastext tests. This
        fixes the bug 26336 partially.

        * editing/execCommand/5142012-3-expected.txt: Added.
        * editing/execCommand/5142012-3.html:
        * editing/execCommand/5144139-1-expected.txt: Added.
        * editing/execCommand/5144139-1.html:
        * editing/execCommand/5164796-expected.txt: Added.
        * editing/execCommand/5164796.html:
        * platform/mac/editing/execCommand/5142012-3-expected.checksum: Removed.
        * platform/mac/editing/execCommand/5142012-3-expected.png: Removed.
        * platform/mac/editing/execCommand/5142012-3-expected.txt: Removed.
        * platform/mac/editing/execCommand/5144139-1-expected.checksum: Removed.
        * platform/mac/editing/execCommand/5144139-1-expected.png: Removed.
        * platform/mac/editing/execCommand/5144139-1-expected.txt: Removed.
        * platform/mac/editing/execCommand/5164796-expected.checksum: Removed.
        * platform/mac/editing/execCommand/5164796-expected.png: Removed.
        * platform/mac/editing/execCommand/5164796-expected.txt: Removed.
        * platform/qt/editing/execCommand/5142012-3-expected.txt: Removed.
        * platform/qt/editing/execCommand/5144139-1-expected.txt: Removed.
        * platform/qt/editing/execCommand/5164796-expected.txt: Removed.

2009-06-18  Ryosuke Niwa  <rniwa@google.com>

        Reviewed by Eric Seidel.

        The following pixel tests have been converted into dumpastext tests. This
        fixes the bug 26336 partially.

        * editing/execCommand/4916583-expected.txt: Added.
        * editing/execCommand/4916583.html:
        * editing/execCommand/5119244-expected.txt: Added.
        * editing/execCommand/5119244.html:
        * editing/execCommand/5120591-expected.txt: Added.
        * editing/execCommand/5120591.html:
        * platform/mac/editing/execCommand/4916583-expected.checksum: Removed.
        * platform/mac/editing/execCommand/4916583-expected.png: Removed.
        * platform/mac/editing/execCommand/4916583-expected.txt: Removed.
        * platform/mac/editing/execCommand/5119244-expected.checksum: Removed.
        * platform/mac/editing/execCommand/5119244-expected.png: Removed.
        * platform/mac/editing/execCommand/5119244-expected.txt: Removed.
        * platform/mac/editing/execCommand/5120591-expected.checksum: Removed.
        * platform/mac/editing/execCommand/5120591-expected.png: Removed.
        * platform/mac/editing/execCommand/5120591-expected.txt: Removed.
        * platform/qt/editing/execCommand/4916583-expected.txt: Removed.
        * platform/qt/editing/execCommand/5119244-expected.txt: Removed.
        * platform/qt/editing/execCommand/5120591-expected.txt: Removed.

2009-06-18  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Dan Bernstein.

        <rdar://problem/6983207> Non-layer content is not re-rendered when transition
        starts sometimes (with hardware acceleration).

        * compositing/repaint/become-overlay-composited-layer.html: Added.
        * platform/mac/compositing/repaint/become-overlay-composited-layer-expected.txt: Added.

2009-06-18  Alexey Proskuryakov  <ap@webkit.org>

        Reviewed by Maciej Stachowiak and Dave Levin.

        https://bugs.webkit.org/show_bug.cgi?id=26510
        Add tests for authentication behavior with cross-origin XMLHttpRequest

        * http/tests/xmlhttprequest/cross-origin-authorization-expected.txt: Added.
        * http/tests/xmlhttprequest/cross-origin-authorization.html: Added.
        * http/tests/xmlhttprequest/cross-origin-no-authorization-expected.txt: Added.
        * http/tests/xmlhttprequest/cross-origin-no-authorization.html: Added.
        * http/tests/xmlhttprequest/resources/cross-origin-authorization.php: Added.
        * http/tests/xmlhttprequest/resources/cross-origin-check-cookies.php: Added.
        * http/tests/xmlhttprequest/resources/cross-origin-no-authorization.php: Added.
        * http/tests/xmlhttprequest/resources/cross-origin-preset-authorization-frame.html: Added.
        * platform/mac-tiger/Skipped:

2009-06-17  Darin Adler  <darin@apple.com>

        Reviewed by Oliver Hunt.

        Bug 26429: Make JSON.stringify non-recursive so it can handle objects
        of arbitrary complexity
        https://bugs.webkit.org/show_bug.cgi?id=26429

        * fast/js/JSON-stringify-expected.txt: Updated.
        * fast/js/resources/JSON-stringify.js: Changed the infinite object and
        infinite array tests to instead just test something a fixed number of
        levels deep. Otherwise we end up with an infinite loop in the test,
        which would lead to the slow-script dialog in the production web browser.
        Also raised the number from 512 to 2048 since there's no fixed limit any more.

2009-06-17  Erik Arvidsson  <arv@chromium.org>

        Reviewed by Adele Peterson.

        https://bugs.webkit.org/show_bug.cgi?id=15189
        Test case for textarea input event.

        * fast/forms/resources/textarea-input-event.js: Added.
        (handleDivOnInput):
        (handleTextareaOnInput):
        * fast/forms/textarea-input-event-expected.txt: Added.
        * fast/forms/textarea-input-event.html: Added.

2009-06-18  Rob Buis  <rwlbuis@gmail.com>

        Reviewed by Niko.

        Test for:
        https://bugs.webkit.org/show_bug.cgi?id=26385
        Root SVG element is not checked on requiredFeatures, requiredExtension like other elements

        Also do the isValid check for outer <svg>.

        * platform/mac/svg/custom/outer-svg-unknown-feature-expected.checksum: Added.
        * platform/mac/svg/custom/outer-svg-unknown-feature-expected.png: Added.
        * platform/mac/svg/custom/outer-svg-unknown-feature-expected.txt: Added.
        * svg/custom/outer-svg-unknown-feature.svg: Added.

2009-06-18  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Mark Rowe.

        https://bugs.webkit.org/show_bug.cgi?id=26499
        
        New expected results after making <video> elements get RenderLayers.

        * platform/mac/fast/replaced/border-radius-clip-expected.txt:

2009-06-18  Dan Bernstein  <mitz@apple.com>

        Reviewed by Darin Adler.

        - test and updated result for <rdar://problem/6913221>
          REGRESSION (Safari 3-4): Search field on apple.com cuts entered text

        * fast/forms/search-vertical-alignment.html: Added.
        * platform/mac/fast/forms/search-vertical-alignment-expected.checksum: Added.
        * platform/mac/fast/forms/search-vertical-alignment-expected.png: Added.
        * platform/mac/fast/forms/search-vertical-alignment-expected.txt: Added.
        * platform/mac/fast/forms/search-zoomed-expected.checksum:
        * platform/mac/fast/forms/search-zoomed-expected.png:
        * platform/mac/fast/forms/search-zoomed-expected.txt:

2009-06-18  Chris Evans  <scarybeasts@gmail.com>

        Reviewed by Adam Barth.

        Added test for bug 26454 (broken 8-digit hex entities).
        https://bugs.webkit.org/show_bug.cgi?id=26454

        * fast/parser/eightdigithexentity-expected.txt: Added.
        * fast/parser/eightdigithexentity.html: Added.

2009-06-17  Gavin Barraclough  <barraclough@apple.com>

        Reviewed by Mark Rowe.

        Add tests to check shifts by non-constant amounts.

        * fast/js/kde/operators-expected.txt:
        * fast/js/kde/resources/operators.js:

2009-06-17  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Darin Adler.
        
        https://bugs.webkit.org/show_bug.cgi?id=26499
        
        New expected results after making <video> elements get RenderLayers.

        * platform/mac/media/video-aspect-ratio-expected.txt:
        * platform/mac/media/video-controls-rendering-expected.txt:
        * platform/mac/media/video-display-toggle-expected.txt:
        * platform/mac/media/video-empty-source-expected.txt:
        * platform/mac/media/video-zoom-controls-expected.txt:
        * platform/mac/media/video-zoom-expected.txt:

2009-06-17  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Darin Adler
        
        Update results after enabling 3d rendering on SnowLeopard.

        * platform/mac-leopard/fast/media/mq-transform-02-expected.checksum: Copied from LayoutTests/platform/mac/fast/media/mq-transform-02-expected.checksum.
        * platform/mac-leopard/fast/media/mq-transform-02-expected.png: Copied from LayoutTests/platform/mac/fast/media/mq-transform-02-expected.png.
        * platform/mac-leopard/fast/media/mq-transform-02-expected.txt: Copied from LayoutTests/platform/mac/fast/media/mq-transform-02-expected.txt.
        * platform/mac-leopard/fast/media/mq-transform-03-expected.checksum: Copied from LayoutTests/platform/mac/fast/media/mq-transform-03-expected.checksum.
        * platform/mac-leopard/fast/media/mq-transform-03-expected.png: Copied from LayoutTests/platform/mac/fast/media/mq-transform-03-expected.png.
        * platform/mac-leopard/fast/media/mq-transform-03-expected.txt: Copied from LayoutTests/platform/mac/fast/media/mq-transform-03-expected.txt.
        Copy the old "mac" results to "mac-leopard" since 3d-rendering is disabled there.
        
        * platform/mac/fast/media/mq-transform-02-expected.checksum:
        * platform/mac/fast/media/mq-transform-02-expected.png:
        * platform/mac/fast/media/mq-transform-02-expected.txt:
        * platform/mac/fast/media/mq-transform-03-expected.checksum:
        * platform/mac/fast/media/mq-transform-03-expected.png:
        * platform/mac/fast/media/mq-transform-03-expected.txt:
        New "mac" results for 3d rendering enabled.
        
        * platform/mac/transforms/3d/point-mapping/3d-point-mapping-2-expected.txt:
        * platform/mac/transforms/3d/point-mapping/3d-point-mapping-deep-expected.txt:
        * platform/mac/transforms/3d/point-mapping/3d-point-mapping-expected.txt:
        * platform/mac/transforms/3d/point-mapping/3d-point-mapping-origins-expected.txt:
        * platform/mac/transforms/3d/point-mapping/3d-point-mapping-preserve-3d-expected.txt:
        Update the results now that these tests are active.

2009-06-17  David Hyatt  <hyatt@apple.com>

        Reviewed by Anders Carlsson.

        Update window properties layout test for HTMLDataGridElement addition.

        * fast/dom/Window/window-properties-expected.txt:

2009-06-17  Adam Roben  <aroben@apple.com>

        Fix Skipped file format after r44519

        * platform/qt/Skipped:
        * platform/win/Skipped:
        Removed bogus ": Added."s in these files.

2009-06-17  David Levin  <levin@chromium.org>

        Reviewed by NOBODY, layout tests fix.

        https://bugs.webkit.org/show_bug.cgi?id=26326
        This reverts commit r44751.

        Once that change was checked scrollbars/scrollbar-orientation.html started
        crashing on Windows.

        * scrollbars/resources/page-with-custom-scrollbars.html: Removed.
        * scrollbars/scrollbar-crash-on-refresh-expected.txt: Removed.
        * scrollbars/scrollbar-crash-on-refresh.html: Removed.

2009-06-16  David Levin  <levin@chromium.org>

        Reviewed by David Hyatt.

        REGRESSION: When the main page (ScrollView) has a custom scrollbar, it crashes on destruction.
        https://bugs.webkit.org/show_bug.cgi?id=26326

        Test that refreshing an iframe with custom scrollbars works without crashing.

        * scrollbars/resources/page-with-custom-scrollbars.html: Added.
        * scrollbars/scrollbar-crash-on-refresh-expected.txt: Added.
        * scrollbars/scrollbar-crash-on-refresh.html: Added.

2009-06-16  Xan Lopez  <xlopez@igalia.com>

        Disable another new test.

        * platform/gtk/Skipped:

2009-06-16  Jian Li  <jianli@chromium.org>

        Reviewed by Adam Barth and David Levin.

        Bug 26146: Change to use ThreadableLoader to load the worker script
        in order to check URL origin for redirection.
        https://bugs.webkit.org/show_bug.cgi?id=26146

        Add a layout test to cover the scenario that the worker script is
        loaded from different redirect origin.

        * http/tests/workers/resources/worker-redirect-target.js: Added.
        * http/tests/workers/worker-redirect-expected.txt: Added.
        * http/tests/workers/worker-redirect.html: Added.

2009-06-16  Xan Lopez  <xlopez@igalia.com>

        editing/deleting/4875189.html was changed from pixel to
        dumpAsText, so remove it from Skipped list.

        * platform/gtk/Skipped:

2009-06-16  Xan Lopez  <xlopez@igalia.com>

        Fix typo in test name.

        * platform/gtk/Skipped:

2009-06-16  Xan Lopez  <xlopez@igalia.com>

        Disable new tests.

        * platform/gtk/Skipped:

== Rolled over to ChangeLog-2009-06-16 ==
