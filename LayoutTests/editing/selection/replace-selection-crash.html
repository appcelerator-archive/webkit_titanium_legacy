<html>
    <head>
        <script>
            function test()
            {
                if (window.layoutTestController)
                    layoutTestController.dumpAsText();

                document.getElementsByTagName("div")[0].focus();

                var sel = window.getSelection();
                var paragraph = document.getElementsByTagName("p")[0];
                sel.setBaseAndExtent(paragraph, 1, paragraph.lastChild, 6);
                document.execCommand("InsertHTML", false, '<p>No crash!</p>');

                document.write("<xmp>" + document.body.innerHTML + "</xmp>");
            }
        </script>
    </head>
    <body onload="test()">
        <div contenteditable>
            <p><span class="Apple-tab-span" style="white-space:pre">    </span>select&nbsp;</p>
        </div>
    </body>
</html>
