<html>
    <head>
        <script src=media-file.js></script>
        <script src=video-test.js></script>

        <script>

            function loaded()
            {
                consoleWrite("++ Test after 'load' event");
                testExpected("mediaElement.getAttribute('autobuffer')", null, "!=");
                testExpected("mediaElement.autobuffer", true);
                endTest();
            }

            function start()
            {
                run("mediaElement = new Audio()");
                consoleWrite("");

                consoleWrite("++ Test initial attribute value");
                testExpected("mediaElement.getAttribute('autobuffer')", null, "!=");
                testExpected("mediaElement.autobuffer", true);
                consoleWrite("");

                mediaElement.onload = loaded;
                run("mediaElement.src = '" + findMediaFile("audio", "content/test") + "'");
                run("mediaElement.load()");

                consoleWrite("");
            }

        </script>
    </head>

    <body onload="start()">
        <p>Test that Audio() sets 'autobuffer' attribute.</p>
    </body>
</html>
