2009-12-10  Eric Seidel  <eric@webkit.org>

        No review, just updating unit tests to match recent checkins.

        * Scripts/modules/mock_bugzillatool.py:
         - Add missing red_core_builders_names method causing exception.
        * Scripts/modules/workqueue_unittest.py:
         - processutils is dead, use executive.py instead.

2009-12-10  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Move run_command onto Executive to make code which uses run_command testable
        https://bugs.webkit.org/show_bug.cgi?id=32396

        * Scripts/modules/executive.py:
         - Move run_command and error handlers onto Executive.
        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py:

2009-12-09  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool needs a command to list patches needing cq+
        https://bugs.webkit.org/show_bug.cgi?id=32351

        * Scripts/modules/bugzilla.py:
         - Parse attacher_email from attachment xml.
        * Scripts/modules/bugzilla_unittest.py:
         - Test new attacher_email parsing.
        * Scripts/modules/commands/queries.py:
         - Add PatchesToCommitQueue
        * Scripts/modules/commands/queries_unittest.py:
         - Tests for PatchesToCommitQueue
        * Scripts/modules/mock_bugzillatool.py:
         - Add necessary mock methods for running PatchesToCommitQueue

2009-12-10  Adam Barth  <abarth@webkit.org>

        Unreviewed.  Turns out every StepSequence command needs a --quiet
        option.

        * Scripts/modules/stepsequence.py:

2009-12-10  Eric Z. Ayers  <zundel@google.com>

        Reviewed by Pavel Feldman.

        Implements displayWebView() to force an invalidation and repaint.
        This fixes a problem running the timeline-paint.html unit test.

        https://bugs.webkit.org/show_bug.cgi?id=31729

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (displayWebView):

2009-12-10  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Convert more commands to StepSequences
        https://bugs.webkit.org/show_bug.cgi?id=32362

        We should eventually convert all the commands, but I'm starting with
        the easy ones.

        * Scripts/modules/commands/download.py:

2009-12-10  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Jan Alonzo.

        [GTK] editing/selection/shrink-selection-after-shift-pagedown.html failing
        https://bugs.webkit.org/show_bug.cgi?id=31103

        Give focus to the webviews when we create them, since some tests expect this.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (main):

2009-12-10  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool "builders are red" error should tell you which builders
        https://bugs.webkit.org/show_bug.cgi?id=32211

        * Scripts/modules/buildsteps.py:

2009-12-09  Marwan Al Jubeh  <marwan.aljubeh@gmail.com>

        Reviewed by Adam Roben.

        Fixes: https://bugs.webkit.org/show_bug.cgi?id=31228
        Set the WebKitOutputDir, WebKitLibrariesDir and Cygwin environment variables automatically
        in Windows as part of running update_webkit.

        * Scripts/update-webkit:
         - Run setupAppleWinEnv() on Apple's Windows port.
        * Scripts/webkitdirs.pm:
         - Added functions that return the source directory, libraries directory and default build directory on Windows.
         - Added isWindowsNT() which tests if the current Windows version is from the Windows NT family.
         - Implemented setupAppleWinEnv() which sets the environment variables WebKitOutputDir, WebKitLibrariesDir
           and Cygwin to their desired values.

2009-12-09  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        exception thrown when running apply-patches
        https://bugs.webkit.org/show_bug.cgi?id=32344

        The update step now takes a port option.  Once we finish the Steps
        refactoring, we won't have to worry about this kind of bug again.

        * Scripts/modules/commands/download.py:

2009-12-09  Adam Barth  <abarth@webkit.org>

        Unreviewed.  Fix ScriptError includes.  I don't understand why these
        didn't throw during unit testing...

        * Scripts/modules/commands/download.py:
        * Scripts/modules/logging_unittest.py:
        * Scripts/modules/workqueue.py:

2009-12-09  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Remove unused PatchCollection class
        https://bugs.webkit.org/show_bug.cgi?id=32312

        It's dead code.

        * Scripts/modules/patchcollection.py:
        * Scripts/modules/patchcollection_unittest.py: Removed.

2009-12-09  Adam Barth  <abarth@webkit.org>

        Unreviewed "build" fix.  CheckStyle needs a --no-upate option.

        * Scripts/modules/commands/download.py:

2009-12-09  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Convert Build to use Sequence
        https://bugs.webkit.org/show_bug.cgi?id=32310

        So much prettier.

        * Scripts/modules/buildsteps.py:
        * Scripts/modules/commands/download.py:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/stepsequence.py: Added.

2009-12-09  Adam Barth  <abarth@webkit.org>

        Add missing file.

        * Scripts/modules/executive.py: Added.

2009-12-09  Adam Barth  <abarth@webkit.org>

        Unreviewed "build" fix.

        * Scripts/modules/landingsequence.py:

2009-12-09  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Implement abstract Steps
        https://bugs.webkit.org/show_bug.cgi?id=32212

        This is a fairly disruptive change that refactors how we build
        commands.  Instead of using a landing sequence, we can now assemble a
        sequence of steps directly.  We still use the landing sequence in the
        interim, but this will be removed soon.

        * Scripts/bugzilla-tool:
        * Scripts/modules/buildsteps.py:
        * Scripts/modules/commands/download.py:
        * Scripts/modules/commands/early_warning_system.py:
        * Scripts/modules/commands/queues.py:
        * Scripts/modules/commands/queues_unittest.py:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/mock_bugzillatool.py:
        * Scripts/modules/processutils.py: Removed.
        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py:
        * Scripts/modules/webkitport.py:

2009-12-08  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        run_command and ScriptError should move into processutils.py
        https://bugs.webkit.org/show_bug.cgi?id=32305

        Turns out there are a zillion callers to run_command.

        * Scripts/modules/commands/download.py:
        * Scripts/modules/commands/early_warning_system.py:
        * Scripts/modules/commands/queues.py:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/logging_unittest.py:
        * Scripts/modules/processutils.py:
        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py:
        * Scripts/modules/workqueue.py:
        * Scripts/modules/workqueue_unittest.py:

2009-12-08  Kevin Watters  <kevinwatters@gmail.com>

        Reviewed by Kevin Ollivier.

        [wx] Mac plugins support.
        
        https://bugs.webkit.org/show_bug.cgi?id=32236

        * wx/browser/wscript:

2009-12-08  David Levin  <levin@chromium.org>

        Reviewed by Adam Barth.

        [check-webkit-style] False positive for DEFINE_OPCODE(op_jtrue) {
        https://bugs.webkit.org/show_bug.cgi?id=32193

        * Scripts/modules/cpp_style.py: For the function { rule, if there is space
          at the beginning of line, ignore lines which then have a macro.
        * Scripts/modules/cpp_style_unittest.py: Add tests to verify the
          new behavior.

2009-12-08  Dmitry Titov  <dimich@chromium.org>

        Rubber-stamped by David Levin.

        Revert and reopen "Add asserts to RefCounted to make sure ref/deref happens on the right thread."
        It may have caused massive increase of reported leaks on the bots.
        https://bugs.webkit.org/show_bug.cgi?id=31639

        * DumpRenderTree/ForwardingHeaders/wtf/ThreadVerifier.h: Removed.

2009-12-08  Dmitry Titov  <dimich@chromium.org>

        Reviewed by Darin Adler.

        Add asserts to RefCounted to make sure ref/deref happens on the right thread.
        https://bugs.webkit.org/show_bug.cgi?id=31639

        * DumpRenderTree/ForwardingHeaders/wtf/ThreadVerifier.h: Added.

2009-12-08  David Levin  <levin@chromium.org>

        Reviewed by Adam Barth.

        [check-webkit-style] False positive for camel case of JSC op codes
        https://bugs.webkit.org/show_bug.cgi?id=32192

        * Scripts/modules/cpp_style.py: Added an exception for the JSC op
          code functions and const_iterator as well since I noticed a false
          positive there when testing the fix.
        * Scripts/modules/cpp_style_unittest.py: Added tests for these
          changes.

2009-12-08  Nikolas Zimmermann  <nzimmermann@rim.com>

        Rubber-stamped by Maciej Stachowiak.

        Turn on (SVG) Filters for Win.
        https://bugs.webkit.org/show_bug.cgi?id=32224

        * Scripts/webkitdirs.pm:

2009-12-08  Nikolas Zimmermann  <nzimmermann@rim.com>

        Rubber-stamped by Maciej Stachowiak.

        Turn on (SVG) Filters for Gtk.
        https://bugs.webkit.org/show_bug.cgi?id=32224

        * Scripts/build-webkit:

2009-12-07  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        [check-webkit-style] S_OK is a fine identifier
        https://bugs.webkit.org/show_bug.cgi?id=32225

        * Scripts/modules/cpp_style.py:
        * Scripts/modules/cpp_style_unittest.py:

2009-12-07  Nikolas Zimmermann  <nzimmermann@rim.com>

        Rubber-stamped by Maciej Stachowiak.

        Turn on (SVG) Filters for Qt.
        https://bugs.webkit.org/show_bug.cgi?id=32224

        * Scripts/build-webkit:

2009-12-07  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Alexey Proskuryakov.

        Make run-webkit-websocketserver log to stderr rather than to a file.
        https://bugs.webkit.org/show_bug.cgi?id=32234

        * Scripts/run-webkit-websocketserver:

2009-12-07  Dmitry Titov  <dimich@chromium.org>

        Rubber-stamped by Darin Adler.

        Remove ENABLE_SHARED_SCRIPT flags
        https://bugs.webkit.org/show_bug.cgi?id=32245
        This patch was obtained by "git revert" command and then un-reverting of ChangeLog files.

        * Scripts/build-webkit:

2009-12-07  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Darin Adler.

        <rdar://problem/7450481> One compositing test keeps DRT in "compositing mode", breaks repaint tests

        The counter that WebView used to keep track of the number of enclosed WebHTMLViews using
        accelerated compositing was hard to manage, and maintained incorrectly in a number of cases.
        This caused one compositing test make DumpRenderTree think that all subsequent tests
        were compositing too.

        Replace this counter with notifications, which are only fired if a client (DRT) requests them. The
        notification informs the client that a WebHTMLView entered compositing mode (or an already-
        compositing WebHTML was added); it does not say when a view becomes uncomposited, or all
        compositing subviews were removed, since this is tricky to get right.
        
        DumpRenderTreeWindow listens for this notification, and uses it to turn on window
        autodisplay, which is necessary to kick-start Core Animation rendering and animations.
        We ensure that window autodisplay is turned off before every test.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (createWebViewAndOffscreenWindow):
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/mac/DumpRenderTreeWindow.h:
        * DumpRenderTree/mac/DumpRenderTreeWindow.mm:
        (-[DumpRenderTreeWindow close]):
        (-[DumpRenderTreeWindow startListeningForAcceleratedCompositingChanges]):
        (-[DumpRenderTreeWindow webViewStartedAcceleratedCompositing:]):

2009-12-07  Nikolas Zimmermann  <nzimmermann@rim.com>

        Reviewed by Holger Hans Peter Freyther.

        Turn on (SVG) Filters support, by default.
        https://bugs.webkit.org/show_bug.cgi?id=32224

        For now only enable FILTERS build flag on WebKit/mac. Other platforms will follow soon.

        * Scripts/build-webkit:

2009-12-07  Yaar Schnitman  <yaar@chromium.org>

        Reviewed by Darin Fisher.

        Chromium buildbots are not red when they fail
        https://bugs.webkit.org/show_bug.cgi?id=32235

        * Scripts/build-webkit:

2009-12-07  Yaar Schnitman  <yaar@chromium.org>

        Reviewed by Darin Fisher.

        Typo in chromium linux builder
        https://bugs.webkit.org/show_bug.cgi?id=32238

        * Scripts/webkitdirs.pm:

2009-12-07  Yaar Schnitman  <yaar@chromium.org>

        Reviewed by Darin Fisher.

        fixes to build-webkit --chromium
        https://bugs.webkit.org/show_bug.cgi?id=32179

        * Scripts/webkitdirs.pm:

2009-12-07  Eric Seidel  <eric@webkit.org>

        No review, just adding two recently approved committers.

        * Scripts/modules/committers.py:

2009-12-07  Alexey Proskuryakov  <ap@apple.com>

        * Scripts/run-webkit-websocketserver: Added property svn:executable.

2009-12-07  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Alexey Proskuryakov.

        Add run-webkit-websocketserver

        https://bugs.webkit.org/show_bug.cgi?id=31390

        * Scripts/run-webkit-websocketserver: Added.

2009-12-07  Steve Falkenburg  <sfalken@apple.com>

        Build fix. Be flexible about which version of ICU is used on Windows.

        * DumpRenderTree/win/DumpRenderTree.vcproj: Add optional xcopy commands to copy ICU 4.2.

2009-12-07  Dirk Schulze  <krit@webkit.org>

        Not reviewed, adding myself to the reviewers list.

        * Scripts/modules/committers.py:

2009-12-06  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Add an API for uploading results files to StatusBot
        https://bugs.webkit.org/show_bug.cgi?id=32210

        Add Content-Type: plain/text which was forgotten
        from the previous commit when I landed with land-patches
        instead of land-diff.

        * QueueStatusServer/queue_status.py:

2009-12-06  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Status Server needs a way to handle uploaded results
        https://bugs.webkit.org/show_bug.cgi?id=32209

        * QueueStatusServer/queue_status.py: Add a ShowResults (results/*) command
        * QueueStatusServer/update_status.html: Add file upload.

2009-12-06  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Add an API for uploading results files to StatusBot
        https://bugs.webkit.org/show_bug.cgi?id=32210

        * Scripts/modules/statusbot.py:

2009-12-06  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Status Server needs a way to handle uploaded results
        https://bugs.webkit.org/show_bug.cgi?id=32209

        * QueueStatusServer/queue_status.py: Add a ShowResults (results/*) command
        * QueueStatusServer/update_status.html: Add file upload.

2009-12-06  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] BuildAttachment should not check the builders
        https://bugs.webkit.org/show_bug.cgi?id=32207

        This is code that got copied here by accident when the class was created.

        * Scripts/modules/commands/download.py:

2009-12-06  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Make LandingSequence.update aware of ports
        https://bugs.webkit.org/show_bug.cgi?id=32208

        This is required to make build work on the Chromium port because
        Chromium has a custom update-webkit.

        * Scripts/modules/landingsequence.py:

2009-12-06  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Add early warning system commands to bugzilla-tool.

        * Scripts/bugzilla-tool:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/webkitport.py:

2009-12-06  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Implement Qt EarlyWarningSystem and Chromium EarlyWarningSystem
        https://bugs.webkit.org/show_bug.cgi?id=32205

        * Scripts/modules/commands/early_warning_system.py: Added.
        * Scripts/modules/commands/queues.py:

2009-12-06  Dan Bernstein  <mitz@apple.com>

        Reviewed by Adele Peterson.

        REGRESSION (r51728): update-webkit fails when the current directory is
        not inside a Subversion working copy
        https://bugs.webkit.org/show_bug.cgi?id=32204

        * Scripts/update-webkit: Invoke isSVN() in the correct working
        directory.

2009-12-06  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Rename AbstractTryQueue to AbstractReviewQueue
        https://bugs.webkit.org/show_bug.cgi?id=32202

        * Scripts/modules/commands/queues.py:

2009-12-05  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Implement ChromiumPort
        https://bugs.webkit.org/show_bug.cgi?id=32182

        * Scripts/modules/webkitport.py:
        * Scripts/modules/webkitport_unittest.py:

2009-12-05  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Move update-webkit into BuildSteps
        https://bugs.webkit.org/show_bug.cgi?id=32181

        We need to move update-webkit out of SCM.py because SCM isn't supposed to know
        that WebKit exists.  The proper place for the knowledge of the existence of
        update-webkit is in WebKitPort because some ports have specialized update
        scripts (analogous to build-webkit).

        * Scripts/modules/buildsteps.py:
        * Scripts/modules/commands/download.py:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/scm.py:
        * Scripts/modules/webkitport.py:

2009-12-05  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        update-webkit should call git svn rebase and resolve-ChangeLogs -f
        https://bugs.webkit.org/show_bug.cgi?id=27162

        Teach update-webkit about Git.  I didn't add the call to
        resolve-ChangeLogs -f because sometimes that script goes bananas.  We
        can iterate from here, however.

        * Scripts/update-webkit:

2009-12-04  Yael Aharon  <yael.aharon@nokia.com>

        Unreviewed build fix.

        [Qt] build fix after r51634 removed unused QBoxLayout include which included limits.h.

        * DumpRenderTree/qt/DumpRenderTree.cpp:

2009-12-04  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Adam Treat.

        Add some missing methods for showing and hiding the
        Web Inspector.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):
        (WebCore::WebPage::~WebPage):
        (WebCore::WebPage::webInspector):
        * DumpRenderTree/qt/DumpRenderTree.h:
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::showWebInspector):
        (LayoutTestController::hideWebInspector):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2009-12-04  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Adam Treat.

        Implement the setAllowUniversalAccessFromFileURLs method
        for the Qt LayoutTestController.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::resetSettings):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setAllowUniversalAccessFromFileURLs):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2009-12-04  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        REGRESSION: AX: buttons now extremely repetitive
        https://bugs.webkit.org/show_bug.cgi?id=32164

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (isAttributeSupportedCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::isAttributeSupported):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::isAttributeSupported):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::isAttributeSupported):

2009-12-03  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        check-webkit-style should check for camelCase variable names
        https://bugs.webkit.org/show_bug.cgi?id=32051

        * Scripts/modules/cpp_style.py:
        * Scripts/modules/cpp_style_unittest.py:

2009-12-03  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Eric Seidel.

        AX: VO just says "term" on many web sites
        https://bugs.webkit.org/show_bug.cgi?id=32139

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (getRoleDescriptionCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::roleDescription):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::roleDescription):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::roleDescription):

2009-12-03  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Beth Dakin.

        Implement WAI-ARIA scrollbar role and related property aria-orientation
        https://bugs.webkit.org/show_bug.cgi?id=32126

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (getOrientationCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::orientation):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::orientation):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::orientation):

2009-12-03  Eric Carlson  <eric.carlson@apple.com>

        Reviewed by Adam Roben.

        Minor correction to r51663.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (addQTDirToPATH):
            GetEnvironmentVariable -> GetEnvironmentVariableW.

2009-12-03  Eric Carlson  <eric.carlson@apple.com>

        Reviewed by Adam Roben.

        ~96 regression tests fail when using QuickTime 7.6 (they pass with QuickTime 7.3)
        https://bugs.webkit.org/show_bug.cgi?id=30256

        Add the QuickTime dll directory to the PATH environment variable so
        inialization can succeed.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (addQTDirToPATH):
        (initialize):

2009-12-03  Shu Chang  <Chang.Shu@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] After revision 32643, sender() is of type QWebPage instead of QWebFrame.

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::maybeDump):

2009-12-03  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Eric Seidel.

        Update pywebsocket to 0.4.3
        This version logs friendlier and higher-level messages in WARN level, which is used for LayoutTests.
        Stack trace is logged now in INFO level.
        https://bugs.webkit.org/show_bug.cgi?id=32097

        * pywebsocket/mod_pywebsocket/dispatch.py:
        * pywebsocket/mod_pywebsocket/msgutil.py:
        * pywebsocket/mod_pywebsocket/standalone.py:
        * pywebsocket/mod_pywebsocket/util.py:
        * pywebsocket/setup.py:
        * pywebsocket/test/test_dispatch.py:
        * pywebsocket/test/test_util.py:

2009-12-03  Sam Weinig  <sam@webkit.org>

        Reviewed by Gavin Barraclough.

        Fix JSClassRef leak.

        * DumpRenderTree/AccessibilityController.cpp:
        (AccessibilityController::makeWindowObject):
        * DumpRenderTree/GCController.cpp:
        (GCController::makeWindowObject):
        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::makeWindowObject):

2009-12-03  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig.

        <rdar://problem/7214236> and http://webkit.org/b/32052 - Implement HTML5 state object history API

        Keep DRT-win building...

        * DumpRenderTree/win/FrameLoadDelegate.h:
        (FrameLoadDelegate::didPushStateWithinPageForFrame):
        (FrameLoadDelegate::didReplaceStateWithinPageForFrame):
        (FrameLoadDelegate::didPopStateWithinPageForFrame):

2009-12-03  Andras Becsi  <abecsi@inf.u-szeged.hu>

        Unreviewed build fix.

        [Qt] ARM-Linux build fix after r51634 removed unused QBoxLayout include which included limits.h on ARM.

        * DumpRenderTree/qt/DumpRenderTree.cpp:

2009-12-03  Andras Becsi  <abecsi@inf.u-szeged.hu>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Refactor DRT to not crash on tests which open child windows from javascript.
        Prevent DRT from showing the main view if these childs get deleted.
        This fixes https://bugs.webkit.org/show_bug.cgi?id=31591.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):
        (WebCore::DumpRenderTree::DumpRenderTree):
        (WebCore::DumpRenderTree::~DumpRenderTree):
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):
        (WebCore::DumpRenderTree::open):
        (WebCore::DumpRenderTree::closeRemainingWindows):
        (WebCore::DumpRenderTree::createWindow):
        (WebCore::DumpRenderTree::windowCount):
        * DumpRenderTree/qt/DumpRenderTree.h:

2009-12-02  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        REGRESSION(51595): commit-queue is throwing exceptions
        https://bugs.webkit.org/show_bug.cgi?id=32083

        * Scripts/modules/commands/queues.py:
         - Don't use default value of [] as it ends up getting shared.
         - Make log_progress accept arrays of ints as well as strings.
         - Return an exit code from execute()
        * Scripts/modules/commands/queues_unittest.py: Added.
         - Test to make sure log_progress will accept ints.
         - Test to make sure run_bugzilla_tool will accept ints.
        * Scripts/modules/workqueue.py:
         - Print the stack trace on unexpected exceptions for easier debugging.
        * Scripts/run-webkit-unittests:
         - Add queues_unittest.

        * Scripts/modules/commands/queues.py:
        * Scripts/modules/commands/queues_unittest.py: Copied from WebKitTools/Scripts/modules/commands/commandtest.py.
        * Scripts/modules/mock_bugzillatool.py:
        * Scripts/modules/workqueue.py:
        * Scripts/run-webkit-unittests:

2009-12-02  David Levin  <levin@chromium.org>

        Reviewed by Adam Barth.

        check-webkit-style is too noisy about namespace indenting issues.
        https://bugs.webkit.org/show_bug.cgi?id=32096

        * Scripts/modules/cpp_style.py:
        Added a _FileState object to be able to track file level information. In this
        case, it simply tracks whether the error has already been given, so that it isn't
        done again.
        * Scripts/modules/cpp_style_unittest.py:
        Modified test cases to pass in the _FileState object and fix a test that expected
        to see the namespace error twice (now it only occurs once). No new tests because
        existing tests cover the change in functionality.

2009-12-01  Kevin Ollivier  <kevino@theolliviers.com>

        Reviewed by Eric Seidel.

        [wx] Get DumpRenderTree building after waf switch.
        
        https://bugs.webkit.org/show_bug.cgi?id=32041

        * DumpRenderTree/wscript: Added.
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setTimelineProfilingEnabled):
        (LayoutTestController::evaluateScriptInIsolatedWorld):
        (LayoutTestController::disableImageLoading):
        (LayoutTestController::whiteListAccessFromOrigin):
        (LayoutTestController::counterValueForElementById):
        * Scripts/build-webkit:

2009-12-02  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] build-attachment shouldn't check whether the builders are red
        https://bugs.webkit.org/show_bug.cgi?id=32062

        build-attachment doesn't touch the remote repository, so there isn't a
        need to hold off when the builders are red.

        * Scripts/modules/commands/download.py:
        * Scripts/modules/landingsequence.py:

2009-12-02  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        REGRESSION(51590): style-queue and build-queue think their empty when they are not
        https://bugs.webkit.org/show_bug.cgi?id=32061

        * Scripts/modules/bugzilla.py: make all id lookups return ints instead of strings.
        * Scripts/modules/bugzilla_unittest.py: Add and update unit tests to use ints.

2009-12-02  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        build-queue is throwing exceptions and complaining about
        lack of --no-update on build-attachment.  Make it stop.

        * Scripts/modules/buildsteps.py:
        * Scripts/modules/commands/download.py:

2009-12-02  Adam Barth  <abarth@webkit.org>

        Unreviewed "build" fix.  Forgot to declare my variables.  :(

        * QueueStatusServer/queue_status.py:

2009-12-02  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Implement status bubble view
        https://bugs.webkit.org/show_bug.cgi?id=32057

        The status bubble is a compact representation of the queue status for a
        given patch.  This will eventually help us reduce the comment spam from
        the queues.

        * QueueStatusServer/index.html: Added HTML5 doctype for sanity.
        * QueueStatusServer/queue_status.py:
        * QueueStatusServer/status_bubble.html: Added.

2009-12-02  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        trim commands/*.py includes now that commands are unit tested
        https://bugs.webkit.org/show_bug.cgi?id=32056

        In the course of ensuring that the unit tests still
        passed after this change, I had to actually make them
        pass in the first place.

        * Scripts/modules/bugzilla.py:
         - Fix _parse_attachment_ids_request_query to return ints instead of strings.
        * Scripts/modules/commands/download.py: Remove unneeded imports.
        * Scripts/modules/commands/queries.py: Ditto.
        * Scripts/modules/commands/queues.py: Ditto.
        * Scripts/modules/commands/upload.py: Ditto.
        * Scripts/modules/scm_unittest.py:
         - Fix to expect the \n after the path since echo adds an \n.

2009-12-01  Yaar Schnitman  <yaar@chromium.org>

        build-webkit: Remove flex,bison,gperf check for chromium
        https://bugs.webkit.org/show_bug.cgi?id=32043

        * Scripts/webkitdirs.pm:

2009-12-01  Chris Fleizach  <cfleizach@apple.com>

        Build fixage for Windows/GTK for DumpRenderTree.

        WAI-ARIA: implement support for ARIA drag and drop
        https://bugs.webkit.org/show_bug.cgi?id=32007

        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::ariaIsGrabbed):
        (AccessibilityUIElement::ariaDropEffects):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::ariaIsGrabbed):
        (AccessibilityUIElement::ariaDropEffects):

2009-12-01  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        WAI-ARIA: implement support for ARIA drag and drop
        https://bugs.webkit.org/show_bug.cgi?id=32007

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (getARIADropEffectsCallback):
        (getARIAIsGrabbedCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::ariaIsGrabbed):
        (AccessibilityUIElement::ariaDropEffects):

2009-12-01  Nikolas Zimmermann  <nzimmermann@rim.com>

        Not reviewed. GTK DRT try 2.

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::sampleSVGAnimationForElementAtTime):

2009-12-01  Nikolas Zimmermann  <nzimmermann@rim.com>

        Not reviewed. Try to fix gtk DRT build.

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:

2009-12-01  David Levin  <levin@chromium.org>

        Reviewed by Eric Seidel.

        check-webkit-style does not understand (Prefix)Foo(Custom|Gtk|CG|Mac).cpp including Foo.h
        https://bugs.webkit.org/show_bug.cgi?id=32033

        * Scripts/modules/cpp_style.py: Changed check for a possible primary header to use find
                                        instead of startswith.
        * Scripts/modules/cpp_style_unittest.py: Added a unit test for the new behavior.

2009-12-01  Nikolas Zimmermann  <nzimmermann@rim.com>

        Not reviewed. Qt build almost fixed, DumpRenderTree should compile now as well.

        * DumpRenderTree/qt/LayoutTestControllerQt.h: Update old function signature.

2009-12-01  Nikolas Zimmermann  <nzimmermann@rim.com>

        Reviewed by Simon Fraser.

        Add SVG animation test framework with 'snapshot' functionality
        https://bugs.webkit.org/show_bug.cgi?id=31897

        Add new 'sampleSVGAnimationForElementAtTime' DRT method,
        used by the new SVG animation testing framework, implemented
        for qt/gtk/win/mac.

        * DumpRenderTree/LayoutTestController.cpp:
        (sampleSVGAnimationForElementAtTimeCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::sampleSVGAnimationForElementAtTime):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::sampleSVGAnimationForElementAtTime):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::sampleSVGAnimationForElementAtTime):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::sampleSVGAnimationForElementAtTime):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::sampleSVGAnimationForElementAtTime):

2009-12-01  Adam Roben  <aroben@apple.com>

        Remove user content before running each test on Windows

        Fixes <http://webkit.org/b/31479> Make websocket tests work on Windows

        Reviewed by Alexey Proskuryakov.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting): Remove all user content
        before each test, which matches Mac.

2009-12-01  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Alexey Proskuryakov.

        Make pywebsocket log errors to a file
        https://bugs.webkit.org/show_bug.cgi?id=31604

        * Scripts/run-webkit-tests: Log output to a pywebsocket_log.txt file in results directory
        (by passing the path to the server via a recently added -l option).

2009-12-01  Adam Roben  <aroben@apple.com>

        Fix tests that use the TestNetscapePlugin in Debug_Internal builds

        Reviewed by Ada Chan.

        Fixes <http://webkit.org/b/32027> REGRESSION (r49705): Tests that use
        TestNetscapePlugin fail in Debug_Internal builds

        * DumpRenderTree/win/DumpRenderTree.cpp: Use the "_Debug" plugin
        directory in Debug and Debug_All builds, but not in Debug_Internal
        builds.

2009-12-01  Adam Roben  <aroben@apple.com>

        Re-enable DRT's watchdog timer on Windows

        It was accidentally disabled in r50907.

        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setWaitToDump): Remove a "false &&" that snuck
        into an if condition.

2009-12-01  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        check-webkit-style complains about #imports with / in them
        https://bugs.webkit.org/show_bug.cgi?id=32022

        We need to exclude #import directives in addition to #include from the
        binary operator whitespace checks.

        * Scripts/modules/cpp_style.py:
        * Scripts/modules/cpp_style_unittest.py:

2009-11-30  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        check-webkit-style is slightly too verbose
        https://bugs.webkit.org/show_bug.cgi?id=32010

        check-webkit-style prints out a bunch of "done" lines that seem redundant,
        especially for the style-queue.

        * Scripts/modules/cpp_style.py:

2009-11-30  Alejandro G. Castro  <alex@igalia.com>

        Reviewed by Eric Seidel.

        [GTK] Moved the functions that are closing the result log of the
        tests to the last line of the runTest function, this avoids
        reporting crashes in the wrong test if there is a problem when
        reseting the state after the test.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (dump):
        (runTest):

2009-11-30  Sam Weinig  <sam@webkit.org>

        Reviewed by Geoffrey Garen.

        Fix for https://bugs.webkit.org/show_bug.cgi?id=31286
        fast/js/date-proto-generic-invocation breaks another test

        Don't cache JSClassRefs, a change to the prototype chain will
        last between tests.

        * DumpRenderTree/AccessibilityController.cpp:
        (AccessibilityController::getJSClass):
        * DumpRenderTree/GCController.cpp:
        (GCController::getJSClass):
        * DumpRenderTree/GCController.h:
        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::getJSClass):

2009-11-30  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Alexey Proskuryakov.

        Update pywebsocket to 0.4.2.1.
        This is to fix a bug that some messages are logged to stderr even when the log file is specified.
        https://bugs.webkit.org/show_bug.cgi?id=31976

        * pywebsocket/mod_pywebsocket/standalone.py:
        * pywebsocket/setup.py:

2009-11-30  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Generate pass messages for style-queue
        https://bugs.webkit.org/show_bug.cgi?id=31995

        With this change, the style-queue posts "pass" messages to bugs as
        well.  Also, added more information to the state store w.r.t. passing
        and failing.

        * Scripts/modules/commands/queues.py:
        * Scripts/modules/patchcollection.py:

2009-11-30  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Simon Fraser.

        Check for WEBKIT_TESTFONTS environment variable in
        run-webkit-tests, for GTK+, to have a more prominent error
        message.

        * Scripts/run-webkit-tests:

2009-11-30  Yaar Schnitman  <yaar@chromium.org>

        Reviewed by Dimitri Glazkov.

        update-webkit --chromium forces gclient sync

        https://bugs.webkit.org/show_bug.cgi?id=31967

        * Scripts/update-webkit-chromium:

2009-11-29  Eric Seidel  <eric@webkit.org>

        Add Erik Arvidsson to committers.py since by r51326 he clear has commit rights.

        * Scripts/modules/committers.py:

2009-11-29  Eric Seidel  <eric@webkit.org>

        No review, just adding missing svn property.

        Set svn:executable property on new scripts.
        These were added by commit-queue commits, but the executable
        property was lost due to a bug in svn-apply:
        https://bugs.webkit.org/show_bug.cgi?id=27204

        * Scripts/update-webkit-chromium: Added property svn:executable.
        * Scripts/validate-committer-lists: Added property svn:executable.

2009-11-29  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Need a way to validate that committers.py includes all committers/reviewers
        https://bugs.webkit.org/show_bug.cgi?id=30970

        Add a script which knows how to compare our public committer/reviewer
        lists and show discrepancies between them.

        Validates mailing lists vs. committers.py:
        - committers.py committers missing from webkit-committers@lists
        - webkit-committers@lists members missing from committers.py
        - committers.py reviewers missing from webkit-reviewers@lists
        - webkit-reviewers@lists members missing from committers.py
        - webkit-reviewers@lists members missing from committers.py reviewer list

        Validates committers.py vs. trunk/ SVN history:
        - committers who have not committed in over a year
        - SVN committers missing from committers.py
        - committers.py members who have no record in SVN.

        All of these lists still show "false positives" until a few more committers.py updates are made, like:
        https://bugs.webkit.org/show_bug.cgi?id=31366

        * Scripts/validate-committer-lists: Added.

2009-11-28  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] style-queue sends ~100 requests to QueueStatusServer every 5 minutes
        https://bugs.webkit.org/show_bug.cgi?id=31950

        Now we cache the last status that we get back from QueueStatusServer.
        Eventually we'll have to do something more fancy if we want to support
        a "try again" button on QueueStatusServer, but we can cross that bridge
        when we come to it.

        * Scripts/modules/patchcollection.py:

2009-11-28  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        StyleQueue scans ~100 bug pages every 5 minutes
        https://bugs.webkit.org/show_bug.cgi?id=31947

        Instead of getting the pending-review attachment ids by scanning each
        bug (which results in a network request), we should just get them all
        from webkit.org/pending-review in one shot.

        * Scripts/modules/bugzilla.py:
        * Scripts/modules/bugzilla_unittest.py:
        * Scripts/modules/commands/queries.py:
        * Scripts/modules/commands/queries_unittest.py:
        * Scripts/modules/commands/queues.py:
        * Scripts/modules/mock_bugzillatool.py:
        * Scripts/modules/patchcollection.py:

2009-11-28  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] CC webkit-bot-watchers whenever the bots touch bugs
        https://bugs.webkit.org/show_bug.cgi?id=31952

        The mailing list is open for anyone to subscribe.

        * Scripts/modules/bugzilla.py:
        * Scripts/modules/commands/queues.py:

2009-11-28  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] style-queue should report style errors to bugzilla
        https://bugs.webkit.org/show_bug.cgi?id=31945

        Currently, we're just logging the style errors locally.  With this
        patch we'll actually log the errors to bugzilla.  Note: I plan to run
        with the "local-only" logging during development.

        * Scripts/modules/commands/queues.py:
        * Scripts/modules/scm.py:

2009-11-28  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] style-queue shouldn't reject patches from the commit-queue
        https://bugs.webkit.org/show_bug.cgi?id=31944

        Currently the style-queue subprocess gets confused and thinks its the
        commit-queue.  If the patch has an error, it rejects it from the
        commit-queue.  Instead, we should have style-queue specific logic.
        This patch doesn't add that logic, but it gives us a callback we can
        use to add that logic.

        * Scripts/modules/buildsteps.py:
        * Scripts/modules/commands/queues.py:
        * Scripts/modules/landingsequence.py:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Rubber stamped by Eric Seidel.

        Rename CommitQueueStatus to QueueStatusServer to allow for more queues.

        * CommitQueueStatus: Removed.
        * CommitQueueStatus/app.yaml: Removed.
        * CommitQueueStatus/filters: Removed.
        * CommitQueueStatus/filters/__init__.py: Removed.
        * CommitQueueStatus/filters/webkit_extras.py: Removed.
        * CommitQueueStatus/index.html: Removed.
        * CommitQueueStatus/index.yaml: Removed.
        * CommitQueueStatus/queue_status.py: Removed.
        * CommitQueueStatus/stylesheets: Removed.
        * CommitQueueStatus/stylesheets/main.css: Removed.
        * CommitQueueStatus/update_status.html: Removed.
        * QueueStatusServer: Copied from WebKitTools/CommitQueueStatus.

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        style-queue should only process each patch once
        https://bugs.webkit.org/show_bug.cgi?id=31939

        Actually address reviewer comments!

        * Scripts/bugzilla-tool:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] style-queue fails to apply a bunch of patches for no reason
        https://bugs.webkit.org/show_bug.cgi?id=31942

        By passing --non-interactive to check-style, we convince check-style
        to pass --force to svn-apply, which lets it apply more patches.

        * Scripts/modules/commands/queues.py:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Support --status-host in style-queue
        https://bugs.webkit.org/show_bug.cgi?id=31941

        * Scripts/modules/commands/queues.py:
        * Scripts/modules/statusbot.py:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        style-queue should only process each patch once
        https://bugs.webkit.org/show_bug.cgi?id=31939

        Before processing a patch, the try-queues now ask the web service
        whether they have already processed the patch.  This is an initial cut
        of this functionality.  I expect we're make it richer over time.

        * Scripts/bugzilla-tool:
        * Scripts/modules/commands/queues.py:
        * Scripts/modules/patchcollection.py:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        PatchStatus does not return status
        https://bugs.webkit.org/show_bug.cgi?id=31938

        We need to parse attachment_id as an int.  Otherwise, we can't find
        anything in the datastore.

        * CommitQueueStatus/queue_status.py:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Make commit-queue status not throw an exception where there is not
        status
        https://bugs.webkit.org/show_bug.cgi?id=31936

        We need to actually fetch the results of the query to see what's in the
        datastore.

        * CommitQueueStatus/queue_status.py:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] unit test ApplyPatches and ApplyAttachment
        https://bugs.webkit.org/show_bug.cgi?id=31935

        * Scripts/modules/commands/download.py:
        * Scripts/modules/commands/download_unittest.py:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Unit test download commands
        https://bugs.webkit.org/show_bug.cgi?id=31923

        Adds download_unittest and fixes a bug found while testing.

        * Scripts/modules/commands/commandtest.py:
        * Scripts/modules/commands/download.py:
            Fixed a bug where we'd throw an error because [].append returns
            None.
        * Scripts/modules/commands/download_unittest.py: Added.
        * Scripts/modules/mock_bugzillatool.py:
        * Scripts/run-webkit-unittests:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Unreviewed "build" fix found while writing unit tests.

        * Scripts/modules/commands/download.py:

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Kill WebKitLandingScripts
        https://bugs.webkit.org/show_bug.cgi?id=31904

        Step 6: Kill the rest.

        * Scripts/modules/buildsteps.py:
        * Scripts/modules/commands/download.py:
        * Scripts/modules/commands/queries.py:
        * Scripts/modules/commands/upload.py:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/scm.py:
        * Scripts/modules/webkitlandingscripts.py: Removed.

2009-11-27  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Unit test upload commands
        https://bugs.webkit.org/show_bug.cgi?id=31903

        Adds unit tests for all but two of the upload commands.  The two
        remaining ones are more difficult.  I'll return to them later.  The
        goal of these tests is just to run the commands.  We can test more
        detailed behavior later.

        * Scripts/modules/commands/commandtest.py:
        * Scripts/modules/commands/upload.py:
        * Scripts/modules/commands/upload_unittest.py:
        * Scripts/modules/mock.py: Added.
        * Scripts/modules/mock_bugzillatool.py:

2009-11-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Kill WebKitLandingScripts
        https://bugs.webkit.org/show_bug.cgi?id=31904

        Step 5: Kill run_and_throw_if_fail.

        * Scripts/modules/buildsteps.py:
        * Scripts/modules/processutils.py: Added.
        * Scripts/modules/webkitlandingscripts.py:

2009-11-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Kill WebKitLandingScripts
        https://bugs.webkit.org/show_bug.cgi?id=31904

        Step 4: Kill run_webkit_script.

        * Scripts/modules/buildsteps.py:
        * Scripts/modules/commands/download.py:
        * Scripts/modules/webkitlandingscripts.py:

2009-11-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Kill WebKitLandingScripts
        https://bugs.webkit.org/show_bug.cgi?id=31904

        Step 3: Kill build_webkit.

        * Scripts/modules/buildsteps.py:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/webkitlandingscripts.py:

2009-11-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Kill WebKitLandingScripts
        https://bugs.webkit.org/show_bug.cgi?id=31904

        Step 2: Kill ensure_builders_are_green.

        * Scripts/modules/buildsteps.py:
        * Scripts/modules/commands/download.py:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/webkitlandingscripts.py:

2009-11-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        [bzt] Kill WebKitLandingScripts
        https://bugs.webkit.org/show_bug.cgi?id=31904

        Step 1: Kill prepare_clean_working_directory and run_webkit_tests.

        * Scripts/bugzilla-tool:
        * Scripts/modules/buildsteps.py: Added.
        * Scripts/modules/commands/download.py:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/webkitlandingscripts.py:

2009-11-26  Zoltan Horvath  <zoltan@webkit.org>

        Reviewed by Adam Barth.

        Remove directory prefixes from linux commands

        SCM unittests can cause errors on some systems if we use absolute reference to
        the commands, so directory prefixes have been removed.

        * Scripts/modules/scm_unittest.py:

2009-11-21  Holger Hans Peter Freyther  <zecke@selfish.org>

        Reviewed by Kenneth Rohde Christiansen.

        Link DumpRenderTree to the Qt Ui Tools
        https://bugs.webkit.org/show_bug.cgi?id=31203

        Implement QWebPage::createPlugin using the Qt Ui Tools
        to be able to create classes like QProgressBar from within
        the <object></object> tags This is required for the
        new automatic test of Qt Plugins.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::createPlugin):
        * DumpRenderTree/qt/DumpRenderTree.h:
        * DumpRenderTree/qt/DumpRenderTree.pro:

2009-11-25  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Eric Seidel.

        Update pywebsocket to 0.4.2

        Update pywebsocket to 0.4.2
        https://bugs.webkit.org/show_bug.cgi?id=31861

        * pywebsocket/example/echo_client.py:
        * pywebsocket/example/echo_wsh.py:
        * pywebsocket/mod_pywebsocket/__init__.py:
        * pywebsocket/mod_pywebsocket/dispatch.py:
        * pywebsocket/mod_pywebsocket/msgutil.py:
        * pywebsocket/mod_pywebsocket/standalone.py:
        * pywebsocket/setup.py:
        * pywebsocket/test/test_dispatch.py:
        * pywebsocket/test/test_msgutil.py:

2009-11-25  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Add unit test for mark-fixed
        https://bugs.webkit.org/show_bug.cgi?id=31896

        * Scripts/modules/commands/commandtest.py: Added.
        * Scripts/modules/commands/queries_unittest.py:
        * Scripts/modules/commands/upload_unittest.py: Added.
        * Scripts/modules/mock_bugzillatool.py:
        * Scripts/run-webkit-unittests:

2009-11-25  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        bugzilla-tool should have a mark-fixed command
        https://bugs.webkit.org/show_bug.cgi?id=31853

        Pretty simple stuff.

        * Scripts/modules/commands/upload.py:

2009-11-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        'bugzilla-tool help' should only show common commands like how 'git help' does
        https://bugs.webkit.org/show_bug.cgi?id=31772

        I also took this opportunity to make 'help' a real Command.
        Making 'help' a real command required adding Command.tool (which we've wanted to do for a while).

        * Scripts/bugzilla-tool:
         - change should_show_command_help to should_show_in_main_help
        * Scripts/modules/commands/download.py:
         - Mark commands as being shown in main help or not.
         - show_in_main_help = False is not required (default is false),
           but it seemed to make the commands more self-documenting.
        * Scripts/modules/commands/queries.py: ditto
        * Scripts/modules/commands/queues.py: ditto
        * Scripts/modules/commands/upload.py: ditto
        * Scripts/modules/multicommandtool.py:
         - Make Command hold a pointer to tool in self.tool.  Most Command
           subclasses do not take advantage of this yet, but it was required
           for HelpCommand to be able to reach the tool from _help_epilog().
         - Move MultiCommandTool._standalone_help_for_command to Command.standalone_help
         - Move MultiCommandTool._help_epilog to Command._help_epilog
         - Move "help" logic into HelpCommand.execute()
         - Change should_show_command_help to should_show_in_main_help and add a default implementation.
        * Scripts/modules/multicommandtool_unittest.py:
         - Test hiding of Commands in --help, and that all commands are shown in 'help --all-commands'

2009-11-25  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Dan Bernstein.
        
        Patch by Mark Rowe.

        The buildbots are failing on Windows because when they were upgraded
        to 4.0.4, Apple Application Support was not in their path. Add it to
        the path to fix the buildots.

        * Scripts/webkitdirs.pm:

2009-11-25  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by David Kilzer.

        run-webkit-tests doesn't accept directories/files with --skipped=only parameter
        https://bugs.webkit.org/show_bug.cgi?id=31799

        * Scripts/run-webkit-tests: Fixed.

2009-11-25  Zoltan Horvath  <zoltan@webkit.org>

        Reviewed by Eric Seidel.

        Change run_command to give back stderr by default
        https://bugs.webkit.org/show_bug.cgi?id=31734

        Change run_command to give back stderr by default.
        Set run_commands's 'svn-create-patch' calling to put only the stdout into the patches.
        Change the related unittest call.

        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py:

2009-11-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Centralize required argument parsing in Command
        https://bugs.webkit.org/show_bug.cgi?id=31872

        * Scripts/modules/commands/download.py: remove custom required arg message.
        * Scripts/modules/commands/upload.py: ditto.
        * Scripts/modules/multicommandtool.py:
         - Add _parse_required_arguments.
         - Pass program name off to OptionParser.
         - Add name() for access to tool name.
         - Add check_arguments_and_execute and make it return a return code.
         - Replace a couple uses of + with %.
        * Scripts/modules/multicommandtool_unittest.py: test _parse_required_arguments

2009-11-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Abstract out capturing stdout/stderr into a new OutputCapture class for re-use among the various unit tests.
        https://bugs.webkit.org/show_bug.cgi?id=31870

        * Scripts/modules/commands/queries_unittest.py: Use the new class.
        * Scripts/modules/multicommandtool_unittest.py: Ditto.
        * Scripts/modules/outputcapture.py: Added.

2009-11-24  Dmitry Titov  <dimich@chromium.org>

        Reviewed by Eric Seidel.

        Add ENABLE_SHARED_SCRIPT feature define and flag for build-webkit
        https://bugs.webkit.org/show_bug.cgi?id=31444

        * Scripts/build-webkit:

2009-11-24  Chris Marrin  <cmarrin@apple.com>

        Reviewed by Simon Fraser.

        Changes the way 3D_RENDERING and ACCELERATED_COMPOSITING related tests are excluded
        https://bugs.webkit.org/show_bug.cgi?id=27314
        
        Now the script allows the directories with these tests to be included on all
        platforms but Mac, where they behave the same as always. For all other platforms
        the tests need to be excluded using the Skipped files, which is currently done
        for all platforms (including win since we're not turned on yet)

        * Scripts/webkitdirs.pm:

2009-11-24  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        queries_unittest.py should test command output
        https://bugs.webkit.org/show_bug.cgi?id=31845

        * Scripts/modules/commands/queries_unittest.py:
         - Capture stdout and stderr and compare with expected strings.

2009-11-24  Simon Fraser  <simon.fraser@apple.com>

        No Review.

        Fix spelling error ("depenedencies").

        * Scripts/build-webkit:

2009-11-24  Mark Rowe  <mrowe@apple.com>

        Land the configuration that includes the two debug GTK Linux builders.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2009-11-24  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/31840> bisect-builds broke after r50080

        Reviewed by Dan Bernstein.

        * Scripts/bisect-builds:
        (mountAndRunNightly): Switched back to using backticks to run
        the hdiutil command since exec() will terminate the existing
        script, which is not what we want.  Store the output of
        File::Spec->devnull() in a variable for use in the hdiutil
        detach commands.

2009-11-23  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        Include "config.h" to meet Coding Style Guidelines
        https://bugs.webkit.org/show_bug.cgi?id=31792

        * DumpRenderTree/pthreads/JavaScriptThreadingPthreads.cpp:
        * DumpRenderTree/qt/jsobjects.cpp:
        * DumpRenderTree/win/DRTDesktopNotificationPresenter.cpp:

2009-11-23  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Oliver Hunt.

        Implement new required function to pass test we used to pass. This
        change is required since r51294.

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setAllowUniversalAccessFromFileURLs):

2009-11-23  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] DRT: dumpBackForwardList() does not work properly with non-file URLs.
        https://bugs.webkit.org/show_bug.cgi?id=31775

        LayoutTestController::dumpBackForwardList() should work with local URLs
        as well as with normal URLs (in http tests for instance).
        Currently it does not output the latter properly.

        Unskip a bunch of passing http/navigation tests.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::dumpHistoryItem):

2009-11-22  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Oliver Hunt.

        ARIA: support aria-flowto
        https://bugs.webkit.org/show_bug.cgi?id=31762

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (ariaFlowToElementAtIndexCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::ariaFlowToElementAtIndex):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::ariaFlowToElementAtIndex):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::ariaFlowToElementAtIndex):

2009-11-22  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Kenneth Christiansen.

        [Qt] fast/history/back-forward-reset-after-error-handling.html failing due to WorkQueue not being un-frozen
        https://bugs.webkit.org/show_bug.cgi?id=31638

        Unfreeze WorkQueue after each test execution.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):

2009-11-22  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Adam Barth.

        [Qt] DumpRenderTree should explicitly ignore any SSL certificate errors
        for localhost and 127.0.0.1.
        https://bugs.webkit.org/show_bug.cgi?id=31783

        Unskip the http/tests/ssl/verify-ssl-enabled.php test, which is passing now.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::NetworkAccessManager::NetworkAccessManager):
        (WebCore::NetworkAccessManager::sslErrorsEncountered):
        (WebCore::WebPage::WebPage):
        * DumpRenderTree/qt/DumpRenderTree.h:

2009-11-22  Chris Evans  <cevans@chromium.org>

        Reviewed by Adam Barth.

        Disable access to file:/// directory listings
        https://bugs.webkit.org/show_bug.cgi?id=31329

        Implemented setAllowUniversalAccessFromFileURLs to support testing of
        file URL security.

        * DumpRenderTree/LayoutTestController.cpp:
        (setAllowUniversalAccessFromFileURLsCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setAllowUniversalAccessFromFileURLs):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setAllowUniversalAccessFromFileURLs):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setAllowUniversalAccessFromFileURLs):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setAllowUniversalAccessFromFileURLs):

2009-11-22  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Fix the timeout of fast/frames/frame-navigation.html
        https://bugs.webkit.org/show_bug.cgi?id=31638

        The test is timeouting, because it uses the WorkQueue to load a document in one
        of the child frames and once the loading is finished, the DRT does not dump the
        tree. This is because it waits for the QWebFrame::loadFinished() signal from
        the main frame, while it should connect to QWebPage::loadFinished().

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):

2009-11-21  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool --help spews way too much text
        https://bugs.webkit.org/show_bug.cgi?id=31771

        * Scripts/bugzilla-tool:
         - Remove self.cached_scm initialization hack.
        * Scripts/modules/buildbot.py:
         - Make default_host accessible to callers.
        * Scripts/modules/commands/download.py:
         - Phrase help for all commands consistently and remove spurious help text punctuation.
        * Scripts/modules/commands/queries.py: Ditto.
        * Scripts/modules/commands/queues.py: Ditto.
        * Scripts/modules/commands/upload.py: Ditto.
        * Scripts/modules/multicommandtool.py:
         - Add HelpPrintingOptionParser.format_epilog to replace
           NonWrappingEpilogIndentedHelpFormatter and allow us to lazily initialize
           per-command help (thus removing the need for the cached_scm hack in BugzillaTool).
         - Make --help only show a list of commands like "svn help" and "git help" do --
           previously --help was listing all commands and options.
         - Sort list of commands alphabetically.

2009-11-21  Eric Seidel  <eric@webkit.org>

        No review.  Fixing a typo from the previous patch for bug 31767.

        AbstractQueue.run_bugzilla_tool throws an exception
        https://bugs.webkit.org/show_bug.cgi?id=31769

        * Scripts/modules/commands/queues.py:

2009-11-21  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue fails to run with "permissions error" due to bad bugzilla-tool path
        https://bugs.webkit.org/show_bug.cgi?id=31767

        What we really want to test is BugzillaTool.path() instead of TrivialTool.path().
        Since we don't have a good way to test BugzillaTool pieces, I've
        left out a test for now.

        * Scripts/bugzilla-tool:
         - Add a path() implementation to expose bugzilla-tool's __file__ path to commit-queue.
        * Scripts/modules/commands/queues.py:
         - Use tool.path() instead of __file__.
        * Scripts/modules/multicommandtool.py:
         - Add a new path() method to MultiComandTool.
        * Scripts/modules/multicommandtool_unittest.py:
         - Provide a path() method.  Little point in testing this mock implementation.

2009-11-21  Adam Barth  <abarth@webkit.org>

        Unreviewed "build" fix.  Turns out I was testing the wrong copy of
        WebKitTools.

        * Scripts/modules/commands/download.py:

2009-11-21  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Convert check-style to use LandingSequence
        https://bugs.webkit.org/show_bug.cgi?id=31763

        Instead of manipulating the working copy by hand, we should use the
        LandingSequence in CheckStyle.  This will make this code eaiser to
        test.

        * Scripts/modules/commands/download.py:

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Unit test query commands
        https://bugs.webkit.org/show_bug.cgi?id=31755

        These tests are pretty rough, but hopefully they'll grow.

        * Scripts/modules/commands/queries_unittest.py: Added.
        * Scripts/modules/mock_bugzillatool.py: Added.
        * Scripts/run-webkit-unittests:

2009-11-20  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Fix a bunch of unit test regressions from our recent bugzilla-toll hacking
        https://bugs.webkit.org/show_bug.cgi?id=31758

        * Scripts/modules/multicommandtool.py:
         - Allow passing of explicit commands to MultiCommandTool.__init__
        * Scripts/modules/multicommandtool_unittest.py:
         - Use new Command.name naming system.
         - Test Command auto-discovery.
        * Scripts/modules/workqueue.py:
         - bug_id no longer exists, use patch['bug_id'] instead.
        * Scripts/modules/workqueue_unittest.py:
         - WorkQueues require names now.
         - should_proceed_with_work_item must return a patch object.

2009-11-20  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Beth Dakin.

        WAI-ARIA: add support for aria-owns
        https://bugs.webkit.org/show_bug.cgi?id=31702

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (ariaOwnsElementAtIndexCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::ariaOwnsElementAtIndex):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::ariaOwnsElementAtIndex):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::ariaOwnsElementAtIndex):

2009-11-20  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Fix exception thrown when running the commit-queue.

        * Scripts/modules/statusbot.py: patch is optional.
        * Scripts/modules/workqueue.py: WorkQUeue requires a name.

2009-11-20  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Teach the StatusBot how to support more than just the commit-queue
        https://bugs.webkit.org/show_bug.cgi?id=31754

        * Scripts/modules/workqueue.py: Another typo.

2009-11-20  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Teach the StatusBot how to support more than just the commit-queue
        https://bugs.webkit.org/show_bug.cgi?id=31754

        * Scripts/modules/commands/queues.py: Fix silly typo.

2009-11-20  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Teach the StatusBot how to support more than just the commit-queue
        https://bugs.webkit.org/show_bug.cgi?id=31754

        * CommitQueueStatus/index.yaml:
         - Add indices required for the new queries.
        * CommitQueueStatus/queue_status.py:
         - Add a patch-status page and move update_status to update-status.
         - Only display "commit-queue" status records for the commit-queue.
         - Add support for a queue_name property on status records.
         - Fix _int_from_request to actually work.
        * CommitQueueStatus/update_status.html:
         - Add support for a queue_name on status records.
         - Remove unused list of bug ids.
         * Scripts/modules/commands/queues.py
          - Make the queues pass the patch instead of the bug_id to StatusBot.
        * Scripts/modules/statusbot.py:
         - Support passing the queue_name to the status updates.
         - Support fetching patch status with patch_status().
        * Scripts/modules/workqueue.py:
         - Pass the patch to the StatusBot instead of the bug_id.
         - Let WorkQueues have a name.

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Move bugzilla-tool commands into their own file
        https://bugs.webkit.org/show_bug.cgi?id=31752

        This will let us write unit tests.

        * Scripts/bugzilla-tool:
        * Scripts/modules/commands/__init__.py: Added.
        * Scripts/modules/commands/download.py: Added.
        * Scripts/modules/commands/queries.py: Added.
        * Scripts/modules/commands/queues.py: Added.
        * Scripts/modules/commands/upload.py: Added.
        * Scripts/modules/grammar.py: Added.

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        BuildQueue should check if the tree is currently buildable
        https://bugs.webkit.org/show_bug.cgi?id=31744

        * Scripts/bugzilla-tool:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/webkitlandingscripts.py:

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Move prepare_clean_working_directory into the LandingSequence
        https://bugs.webkit.org/show_bug.cgi?id=31743

        * Scripts/bugzilla-tool:
        * Scripts/modules/landingsequence.py:

2009-11-20  Yael Aharon  <yael.aharon@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        NPN_ReloadPlugins does not reload the page even if reloadPages is true.
        https://bugs.webkit.org/show_bug.cgi?id=30460

        Added code for calling NPN_ReloadPlugins with reloadPages true and false.

        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp:
        (pluginInvoke):

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Pass the port information to the child process
        https://bugs.webkit.org/show_bug.cgi?id=31736

        We need to do this so the child process knows what to build!

        * Scripts/bugzilla-tool:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/webkitport.py:
        * Scripts/modules/webkitport_unittest.py:

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Support Qt port in build-queue
        https://bugs.webkit.org/show_bug.cgi?id=31733

        * Scripts/bugzilla-tool:

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Implement a build-queue
        https://bugs.webkit.org/show_bug.cgi?id=31725

        Currently this just builds the first 10 patches in the review queue.
        We'll want to do something smarter soon.

        * Scripts/bugzilla-tool:

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Make commit-queue and style-queue show up in help
        https://bugs.webkit.org/show_bug.cgi?id=31724

        We need to store their names on their class to make these commands
        properly register themselves with MultiCommandTool.

        * Scripts/bugzilla-tool:

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Implement bugzilla-tool build-attachment
        https://bugs.webkit.org/show_bug.cgi?id=31722

        This command builds an attachment from bugzilla.  It leaves the built
        patch in the working copy.

        * Scripts/bugzilla-tool:
        * Scripts/modules/landingsequence.py:
        * Scripts/modules/webkitlandingscripts.py:

2009-11-20  Alejandro G. Castro  <alex@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] DRT release event does not create the state correctly
        https://bugs.webkit.org/show_bug.cgi?id=31717

        * WebKitTools/DumpRenderTree/gtk/EventSender.cpp:

2009-11-20  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        MultiCommandTool should find Command objects automatically instead of with a manual list
        https://bugs.webkit.org/show_bug.cgi?id=31710

        * Scripts/bugzilla-tool:
        * Scripts/modules/multicommandtool.py:
         - Use some wild python-fu to crawl all the known subclasses of Command.

2009-11-20  Adam Barth  <abarth@webkit.org>

        Unreviewed "build" fix.  Added missing import.

        * Scripts/bugzilla-tool:

2009-11-20  Adam Barth  <abarth@webkit.org>

        Unreviewed "build" fix.  I failed to update LandingSequence.test
        properly.

        * Scripts/modules/landingsequence.py:

2009-11-20  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Create LandingSequence as the all-sing, all-dance landing class
        https://bugs.webkit.org/show_bug.cgi?id=31709

        Client can inherit from this class to carefully control exactly which
        steps they wish to have happen in the landing sequence.

        * Scripts/bugzilla-tool:
        * Scripts/modules/landingsequence.py: Added.
        * Scripts/modules/webkitlandingscripts.py: Added.

2009-11-19  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Abstract AbstractPatchProcessingCommand from AbstractPatchLandingCommand
        https://bugs.webkit.org/show_bug.cgi?id=31707

        This is to help when we implement build-attachment.

        * Scripts/bugzilla-tool:

2009-11-19  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Support Qt port in bugzilla-tool
        https://bugs.webkit.org/show_bug.cgi?id=31701

        Now we support building with Qt!

        * Scripts/bugzilla-tool:
        * Scripts/modules/webkitport.py: Added.
        * Scripts/modules/webkitport_unittest.py: Added.
        * Scripts/run-webkit-unittests:

2009-11-19  Zoltan Horvath  <zoltan@webkit.org>

        Reviewed by Adam Barth.

        Remove inserting stderr into patch in bugzilla-tool
        https://bugs.webkit.org/show_bug.cgi?id=29914

        Modify SCM python module's run_command function to avoid return of stderr
        by default, so stderr won't be inserted into the patches.
        Modify the related unit test.

        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py:

2009-11-19  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool needs per-command help
        https://bugs.webkit.org/show_bug.cgi?id=31697

        Added support for "bugzilla-tool help command-name"
        and a unit test to make sure it works.

        * Scripts/modules/multicommandtool.py:
        * Scripts/modules/multicommandtool_unittest.py:

2009-11-19  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Move MultiCommandTool and Command into a separate file and add some basic unit tests
        https://bugs.webkit.org/show_bug.cgi?id=31695

        * Scripts/bugzilla-tool:
        * Scripts/modules/multicommandtool.py: Added.
        * Scripts/modules/multicommandtool_unittest.py: Added.
        * Scripts/run-webkit-unittests:

2009-11-19  Eric Seidel  <eric@webkit.org>

        No review, just adding a FIXME.

        Split out command parsing and help printing from BugzillaTool
        https://bugs.webkit.org/show_bug.cgi?id=31688

        * Scripts/bugzilla-tool: Add an extra comment about current design failures.

2009-11-19  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Split out command parsing and help printing from BugzillaTool
        https://bugs.webkit.org/show_bug.cgi?id=31688

        * Scripts/bugzilla-tool:
         - Add new MultiCommandTool class to contain option parsing and help printing logic.
         - Rename private methods to use _ pattern.
         - MultiCommandTool has two abstract methods should_show_command_help and should_execute_command.
         - 

2009-11-19  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Re-factor help printing to use modern python idioms
        https://bugs.webkit.org/show_bug.cgi?id=31685

        * Scripts/bugzilla-tool:

2009-11-19  Eric Seidel  <eric@webkit.org>

        Reviewed by Darin Adler.

        commit-queue empty queue logs twice
        https://bugs.webkit.org/show_bug.cgi?id=31679

        * Scripts/bugzilla-tool:

2009-11-19  Eric Seidel  <eric@webkit.org>

        Reviewed by Darin Adler.

        bugzilla-tool's reviewer/committer rejection message should be clearer
        https://bugs.webkit.org/show_bug.cgi?id=31126

        Add more explanatory prose to bugzilla-tool's flag permission rejection message.

        * Scripts/modules/bugzilla.py:

2009-11-19  Eric Z. Ayers  <zundel@google.com>

        Reviewed by Pavel Feldman.

        Forces a WM_PAINT event on calling layoutTestController.display()
        in order to enable the timeline-paint.html test on Windows.
        ::UpdateWindow() does not force an event becaue the window is 
        not visible.

        https://bugs.webkit.org/show_bug.cgi?id=31402

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (displayWebView):

2009-11-19  Michelangelo De Simone  <michelangelo@webkit.org>

        No review needed.

        Added myself to committers list.

        * Scripts/modules/committers.py:

2009-11-19  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Bugzilla-tool command classes should match command names
        https://bugs.webkit.org/show_bug.cgi?id=31666

        I renamed all the commands except CommitMessageForCurrentDiff because
        the new name would conflict with an existing class.

        * Scripts/bugzilla-tool:

2009-11-19  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Gustavo Noronha Silva.

        Web Inspector: Implement "show inspector" in WebKit GTK
        API and enable console tests.

        https://bugs.webkit.org/show_bug.cgi?id=31669

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::showWebInspector):

2009-11-19  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        Minor refactoring + more documentation.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::clearHistory):
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):

2009-11-19  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by Eric Seidel.

        Ignore websocket tests when --no-http is specified.
        https://bugs.webkit.org/show_bug.cgi?id=31662

        * Scripts/run-webkit-tests:

2009-11-18  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Normalize ' and " in bugzilla-tool
        https://bugs.webkit.org/show_bug.cgi?id=31655

        We decided " is better than ' and we should be consistent.

        * Scripts/bugzilla-tool:

2009-11-18  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Remove support for Qt v4.3 or older versions
        https://bugs.webkit.org/show_bug.cgi?id=29469

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/ImageDiff.pro:

2009-11-18  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Eric Seidel.

        GitTest.test_create_binary_patch fails if /tmp is symlink
        https://bugs.webkit.org/show_bug.cgi?id=31536

        * Scripts/modules/scm_unittest.py:

2009-11-18  Yaar Schnitman  <yaar@chromium.org>

        Reviewed by Darin Adler.

        Configuration for Chromium Build Slaves.

        https://bugs.webkit.org/show_bug.cgi?id=31442

        * BuildSlaveSupport/build.webkit.org-config/config.json:
        * BuildSlaveSupport/build.webkit.org-config/master.cfg:

2009-11-18  Eric Seidel  <eric@webkit.org>

        Reviewed by Darin Adler.

        workqueue.py results in totally broken commit-queue UI
        https://bugs.webkit.org/show_bug.cgi?id=31645

        * Scripts/bugzilla-tool:
         - Remove unneeded use of PatchCollection.
         - Grab a new copy of the cq'd patches every run of the queue.

2009-11-18  Sam Weinig  <sam@webkit.org>

        Reviewed by Anders Carlsson.

        Make the Mac Geolocation API async.

        Update DRT to use the new async Mac Geolocation API.

        * DumpRenderTree/mac/UIDelegate.mm:
        (-[UIDelegate webView:decidePolicyForGeolocationRequestFromOrigin:frame:listener:]):

2009-11-18  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Kenneth Rohde Christiansen.

        Add and option to toggle HTML5 datalist support to build-webkit
        https://bugs.webkit.org/show_bug.cgi?id=31599

        * Scripts/build-webkit:

2009-11-18  Kevin Watters  <kevinwatters@gmail.com>

        Reviewed by Kevin Ollivier.

        Enable wx plugin support using the Windows implementation as a base.
        
        https://bugs.webkit.org/show_bug.cgi?id=31636

        * wx/build/settings.py:

2009-11-18  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        Change the initialization order so that the controllers
        will be created before exporting them to the JS DOM window.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):

2009-11-18  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        Fix a code copy and paste error. m_page should be page.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::createWindow):

2009-11-17  Mark Rowe  <mrowe@apple.com>

        Reviewed by Alexey Proskuryakov.

        <http://webkit.org/b/31603> WebSocket server is confused if WebKit tests run from within /tmp on Mac OS X

        * pywebsocket/mod_pywebsocket/dispatch.py: Use os.path.realpath as it returns the canonical path of a file.
        This prevents symlinks from confusing the descendant check.

2009-11-17  Mark Rowe  <mrowe@apple.com>

        Reviewed by Alexey Proskuryakov.

        <http://webkit.org/b/31602> Failing to start the WebSocket server shouldn’t terminate entire test run

        If the WebSocket server fails to start have DRT load an error page in place of tests that require the
        server to be up rather than having run-webkit-tests abort immediately.

        * Scripts/run-webkit-tests:

2009-11-17  Eric Seidel  <eric@webkit.org>

        Reviewed by Darin Adler.

        commit-queue is failing to set reviewer in ChangeLogs
        https://bugs.webkit.org/show_bug.cgi?id=31592

        * Scripts/bugzilla-tool: Clarify the "applying" log message.
        * Scripts/modules/bugzilla.py:
         - Add a new _validate_committer_and_reviewer function as a
           temporary solution until we can make a real Attachment object
           which knows how to fill in its committer/reviewer fields automatically.

2009-11-17  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Unreviewed buildbot fix.

        Revert part of earlier patch and add comment, as it
        was causing timeouts on the buildbot.

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::notifyDone):

2009-11-17  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Oliver Hunt.

        Make the timeout 15 sec as for the other DRT's and make
        it print out the same output when a test timeout.

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::waitUntilDone):
        (LayoutTestController::notifyDone):
        (LayoutTestController::timerEvent):

2009-11-17  Joseph Pecoraro  <joepeck@webkit.org>

        Reviewed by Timothy Hatcher.

        Fixed typos in comments.

        * Scripts/modules/committers.py:

2009-11-17  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Timothy Hatcher.

        Web Inspector: Make DRT show web inspector for tests in inspector/ folder.
        - Updated DRT to show/close inspector for all tests under /inspector
        - Introduced LayoutTestController::setTimelineProfilingEnabled and
          WebInspector::setTimelineProfilingEnabled beside setJavaScriptProfilingEnabled
        - Removed reload on each inspector test
        - Renamed fast/inspector to fast/inspector-support in order not to trigger
        inspector for those.
        - Reimplemented timeline tests in order to get rid of reload there.
        - Moved tests that don't require harness into the fast group.

        https://bugs.webkit.org/show_bug.cgi?id=31472

        * DumpRenderTree/LayoutTestController.cpp:
        (setTimelineProfilingEnabledCallback):
        (closeWebInspectorCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (shouldOpenWebInspector):
        (runTest):
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setTimelineProfilingEnabled):
        * DumpRenderTree/mac/DumpRenderTree.mm:
        (shouldOpenWebInspector):
        (runTest):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setTimelineProfilingEnabled):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (shouldOpenWebInspector):
        (runTest):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setTimelineProfilingEnabled):

2009-11-17  Oliver Hunt  <oliver@apple.com>

        Reviewed by Maciej Stachowiak.

        Incorrect use of JavaScriptCore API in DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=31577

        Return undefined rather than a literal null.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (setSelectedTextRangeCallback):
        (incrementCallback):
        (decrementCallback):
        (showMenuCallback):

2009-11-16  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Beth Dakin.

        AX: aria-labelledby duplicates some of its WAI-ARIA label
        https://bugs.webkit.org/show_bug.cgi?id=31565

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (titleUIElementCallback):
        (getIsValidCallback):
        (AccessibilityUIElement::getJSClass):

2009-11-16  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        r50942 broke output from created windows. Make the
        m_enableTextOutput a member of the DRT and not the
        WebPage.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):
        (WebCore::WebPage::javaScriptAlert):
        (WebCore::WebPage::javaScriptConsoleMessage):
        (WebCore::WebPage::javaScriptConfirm):
        (WebCore::WebPage::javaScriptPrompt):
        (WebCore::WebPage::acceptNavigationRequest):
        (WebCore::DumpRenderTree::DumpRenderTree):
        (WebCore::DumpRenderTree::open):
        (WebCore::DumpRenderTree::createWindow):
        * DumpRenderTree/qt/DumpRenderTree.h:
        (WebCore::DumpRenderTree::setTextOutputEnabled):
        (WebCore::DumpRenderTree::isTextOutputEnabled):
        (WebCore::WebPage::shouldInterruptJavaScript):
        (WebCore::WebPage::isTextOutputEnabled):
        (WebCore::WebPage::setViewGeometry):

2009-11-16  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Gustavo Noronha Silva.

        Moved DumpRenderTree/gtk/TestNetscapePlugin to DumpRenderTree/unix/TestNetscapePlugin
        as the implementation is being used by at least Qt and Gtk+.

        Update buildsystems as well.

        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:
        * DumpRenderTree/unix/TestNetscapePlugin/ForwardingHeaders/WebKit/npapi.h:
        * DumpRenderTree/unix/TestNetscapePlugin/ForwardingHeaders/WebKit/npfunctions.h:
        * DumpRenderTree/unix/TestNetscapePlugin/ForwardingHeaders/WebKit/npruntime.h:
        * DumpRenderTree/unix/TestNetscapePlugin/TestNetscapePlugin.cpp:
        * GNUmakefile.am:

2009-11-16  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Alexey Proskuryakov.

        Disable wss until all platforms support pyOpenSSL

        https://bugs.webkit.org/show_bug.cgi?id=31479

        * Scripts/run-webkit-tests:

2009-11-14  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Kenneth Christiansen.

        [Qt] Implement load error pages support for Qt's DRT.
        https://bugs.webkit.org/show_bug.cgi?id=31509

        For now, it will not be a default feature, and layout tests
        that want to make use of this have to explicitily call
        'handleErrorPages();' for the test source.

        Any of the other DumpRenderTree's (mac, win and gtk)
        support handling error pages. Qt's will be the first.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::supportsExtension):
        (WebCore::WebPage::extension):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::reset):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        (LayoutTestController::shouldHandleErrorPages):
        (LayoutTestController::handleErrorPages):

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Rename the --commit-queue flag on land-* now that the commit-queue needs no special treatment
        https://bugs.webkit.org/show_bug.cgi?id=31549

        Renamed --commit-queue to --non-interactive in most places
        and remove the code in land-patches which is no longer needed.

        * Scripts/bugzilla-tool:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        The commit-queue should use land-attachment
        https://bugs.webkit.org/show_bug.cgi?id=31548

        * Scripts/bugzilla-tool:

2009-11-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Convert CommitQueue over to PatchCollection
        https://bugs.webkit.org/show_bug.cgi?id=31547

        Also fixes a bug in workqueue and adds a test!

        * Scripts/bugzilla-tool:
        * Scripts/modules/workqueue.py:
        * Scripts/modules/workqueue_unittest.py:

2009-11-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Move StyleQueue over to using PatchCollection
        https://bugs.webkit.org/show_bug.cgi?id=31544

        That's what the class it's for.

        * Scripts/bugzilla-tool:
        * Scripts/modules/patchcollection.py:
        * Scripts/modules/patchcollection_unittest.py:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool needs a land-attachment command
        https://bugs.webkit.org/show_bug.cgi?id=31546

        * Scripts/bugzilla-tool:
         - Move all the logic into AbstractLandingCommand and
           add a new LandAttachment command subclass.
         - Split out _collect_patches_by_bug logging from _fetch_list_of_patches_to_land.

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Move more patch-landing code into WebKitLandingScripts in preparation for land-attachment
        https://bugs.webkit.org/show_bug.cgi?id=31543

        Just moving code and updating the one caller to use WebKitLandingScripts instead of 'self'.

        * Scripts/bugzilla-tool:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Disable the style queue from posting to the commit queue status page.

        * Scripts/bugzilla-tool:

2009-11-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Implement PatchCollection
        https://bugs.webkit.org/show_bug.cgi?id=31541

        This class holds a set of patches and lets clients iterate through
        them.  Optionally, clients can install a filter.

        * Scripts/modules/patchcollection.py: Added.
        * Scripts/modules/patchcollection_unittest.py: Added.
        * Scripts/run-webkit-unittests:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool land-patches will close bugs with patches r=?
        https://bugs.webkit.org/show_bug.cgi?id=28230

        The commit-queue shouldn't close patches with outstanding reviews on them,
        even if many reviewers seem to be against multi-patch bugs.

        * Scripts/bugzilla-tool:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool check-style should work with attachment ids instead of bug ids
        https://bugs.webkit.org/show_bug.cgi?id=31540

        * Scripts/bugzilla-tool:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        WorkQueue is the only place that should know about special exit codes
        https://bugs.webkit.org/show_bug.cgi?id=31534

        Move LandPatchesFromBugs.handled_error to WorkQueue.exit_after_handled_error
        and add tests for handling exit codes.
        I also cleaned up workqueue_unittest.py more.

        * Scripts/bugzilla-tool:
        * Scripts/modules/workqueue.py:
        * Scripts/modules/workqueue_unittest.py:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Re-factor workqueue_unittest to allow for more than one test.
        https://bugs.webkit.org/show_bug.cgi?id=31535

        * Scripts/modules/workqueue_unittest.py:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        land-patches needs to be re-factored into smaller chunks
        https://bugs.webkit.org/show_bug.cgi?id=31532

        * Scripts/bugzilla-tool: fix a couple obvious typos.

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        land-patches needs to be re-factored into smaller chunks
        https://bugs.webkit.org/show_bug.cgi?id=31532

        The next patch will move these methods into WebKitLandingScripts.

        * Scripts/bugzilla-tool:
         - Split out _land_patch and _close_bug_if_no_active_patches.

2009-11-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Fix silly copy-and-paste code.  I am a terrible coder.

        * Scripts/modules/bugzilla.py:

2009-11-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Implement a StyleQueue
        https://bugs.webkit.org/show_bug.cgi?id=31537

        The first iteration of the style queue only produces output locally.
        There is also a limit of 10 patches because it's not that useful to
        iterate through the entire review queue at this point.  We can remove
        the limit later.

        * Scripts/bugzilla-tool:
        * Scripts/modules/bugzilla.py:

2009-11-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Unit test WorkQueue
        https://bugs.webkit.org/show_bug.cgi?id=31531

        Adds basic unit testing for WorkQueue.  Just runs through one cycle.

        * Scripts/bugzilla-tool:
        * Scripts/modules/statusbot.py:
        * Scripts/modules/workqueue.py:
        * Scripts/modules/workqueue_unittest.py: Added.
        * Scripts/run-webkit-unittests:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool land-diff should know how to parse bug ids out of ChangeLogs
        https://bugs.webkit.org/show_bug.cgi?id=31530

        * Scripts/bugzilla-tool:

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool needs apply-attachment
        https://bugs.webkit.org/show_bug.cgi?id=31528

        * Scripts/bugzilla-tool:
         - Add ApplyAttachment command.
         - Abstract applying code into WebKitApplyingScripts.
         - Rename setup_for_landing to prepare_clean_working_directory and make local_commit checking optional.
        * Scripts/modules/bugzilla.py:
         - Add fetch_attachment and bug_id_for_attachment_id.
        * Scripts/modules/bugzilla_unittest.py:
         - Add test for new parsing.
         - Fix previous parsing test which broke with Adam's check-style patch (bug 31515).

2009-11-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Document check-style's use of force_clean.

        * Scripts/bugzilla-tool:
        * Scripts/modules/scm.py:

2009-11-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Move WorkQueue to its own file
        https://bugs.webkit.org/show_bug.cgi?id=31529

        WorkQueue and WorkQueueDelegate are separate concerns from
        bugzilla-tool.  Also added a missing include to logging.py.

        * Scripts/bugzilla-tool:
        * Scripts/modules/logging.py:
        * Scripts/modules/workqueue.py:

2009-11-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Move OutputTee to logging.py.

        * Scripts/bugzilla-tool:
        * Scripts/modules/logging.py:

2009-11-15  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Refactor bugzilla-tool to allow for multiple queues
        https://bugs.webkit.org/show_bug.cgi?id=31513

        Divide the commit queue class into three class to make creating
        additional queues easier.

        * Scripts/bugzilla-tool:

2009-11-15  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Eric Seidel.

        svn-apply may not handle git patches created by bugzilla-tool
        https://bugs.webkit.org/show_bug.cgi?id=31457

        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py:

2009-11-15  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Eric Seidel.

        bugzilla-tool should post git binary diff
        https://bugs.webkit.org/show_bug.cgi?id=31458

        Add --binary option to Git.create_patch.

        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py:

2009-11-15  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Adler.

        Add bugzilla-tool check-style
        https://bugs.webkit.org/show_bug.cgi?id=31515

        * Scripts/bugzilla-tool:
        * Scripts/modules/bugzilla.py:

2009-11-13  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        Make the Qt Linux only --valgrind feature, suppress errors
        defined in the SuppressedValgrindErrors file.

        * Scripts/run-webkit-tests:

2009-11-13  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        Set the locale to C and not to the current one in use on the system.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):

2009-11-13  Adam Roben  <aroben@apple.com>

        Add support for
        http/tests/security/isolatedWorld/didClearWindowObject.html

        Fixes <http://webkit.org/b/31124> Tell the WebFrameLoadDelegate when
        window objects in isolated worlds are cleared

        Reviewed by Dave Hyatt.

        * DumpRenderTree/mac/DumpRenderTreeMac.h: Declared worldIDForWorld.

        * DumpRenderTree/mac/FrameLoadDelegate.mm:
        (-[FrameLoadDelegate didClearWindowObjectInStandardWorldForFrame:]):
        Added. Moved code here from -webView:didClearWindowObject:forFrame:.
        (-[FrameLoadDelegate didClearWindowObjectForFrame:inIsolatedWorld:]):
        Added. Sets a __worldID property on the global object whose value is
        the ID of this world.
        (-[FrameLoadDelegate webView:didClearWindowObjectForFrame:inScriptWorld:]):
        Respond to this new delegate callback by calling through to one of the
        above new methods.
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (worldMap): Added. Returns a HashMap containing all the worlds we've
        created.
        (worldIDForWorld): Added. Returns the ID for this world, or 0 if we
        haven't kept track of this world.
        (LayoutTestController::evaluateScriptInIsolatedWorld): Use worldMap()
        instead of declaring our own.

        * DumpRenderTree/win/DumpRenderTreeWin.h: Declared worldIDForWorld.

        * DumpRenderTree/win/FrameLoadDelegate.cpp:
        (FrameLoadDelegate::didClearWindowObject): Moved code from hear to
        didClearWindowObjectForFrameInStandardWorld.
        (FrameLoadDelegate::didClearWindowObjectForFrameInScriptWorld):
        Respond to this new delegate callback by calling through to one of the
        below new methods.
        (FrameLoadDelegate::didClearWindowObjectForFrameInIsolatedWorld):
        Added. Sets a __worldID property on the gobal object whose value is
        the ID of this world.
        (FrameLoadDelegate::didClearWindowObjectForFrameInStandardWorld):
        Added. Moved code here from didClearWindowObject.

        * DumpRenderTree/win/FrameLoadDelegate.h: Added the
        didClearWindowObjectForFrame* functions.

        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (worldMap): Added. Returns a HashMap containing all the worlds we've
        created.
        (worldIDForWorld): Added. Returns the ID of this world, or 0 if we
        haven't kept track of this world.
        (LayoutTestController::evaluateScriptInIsolatedWorld): Use worldMap()
        instead of declaring our own.

2009-11-13  Adam Roben  <aroben@apple.com>

        Finish replacing worldIDs with world objects

        The only remaining use of worldIDs was in a method only used by DRT
        for the isolated worlds tests.

        Fixes <http://webkit.org/b/31414> Replace worldIDs with world objects

        Reviewed by Mark Rowe.

        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::evaluateScriptInIsolatedWorld):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::evaluateScriptInIsolatedWorld):
        Updated for changes to WebFrame. Now holds the map of worldID -> world
        at this level instead of making WebKit do it.

2009-11-13  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Simon Hausmann.

        [Qt] Ensure the DRT does not output anything until first test is run

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        * DumpRenderTree/qt/DumpRenderTree.h:

2009-11-13  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Tor Arne Vestbø.

        Clear the undo stack in before each new test run.

        Locally fixes 3 incorrect layouts, 9 timeouts and 7 crashes.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):

2009-11-13  Andras Becsi  <becsi.andras@stud.u-szeged.hu>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Add WebKitUsesPageCachePreferenceKey overriding support to DRT's LayoutTestController.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::resetSettings):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::overridePreference):

2009-11-13  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        Update committers.py based on svn records
        https://bugs.webkit.org/show_bug.cgi?id=31366

        This list was generated using validate-committer-lists from
        https://bugs.webkit.org/show_bug.cgi?id=30970
        and makes committers.py current for committers who have
        committed in the last 3 years.

        * Scripts/modules/committers.py:

2009-11-12  Anantanarayanan G Iyengar  <ananta@chromium.org>

        Reviewed by Adam Barth.

        The document-open.html test was flaky at times. The test invokes the layout test plugin
        which in its destroy stream handler opens a new document. This basically tears down the
        stream and the associated plugin instance. The pluginLog function in the layout test
        plugin attempts to retrieve the window script object on a torn down plugin instance
        which crashed consistently on windows in the debugger. The functions which issue
        these logs already have a valid window script object. We now have variants of the pluginLog
        function which take in a window script object with and without variable arguments. 

        https://bugs.webkit.org/show_bug.cgi?id=31067

        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp:
        (pluginLogWithWindowObject):
        (pluginLogWithWindowObjectVariableArgs):
        (pluginLog):
        (notifyTestCompletion):
        (testDocumentOpen):
        (testWindowOpen):

2009-11-12  Joanmarie Diggs  <joanmarie.diggs@gmail.com>

        Reviewed by Gustavo Noronha Silva.

        https://bugs.webkit.org/show_bug.cgi?id=30997
        [Gtk] Implemment AtkDocument

        Added testing support.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        * DumpRenderTree/AccessibilityUIElement.h:
        (getDocumentEncodingCallback):
        (getDocumentURICallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::documentEncoding):
        (AccessibilityUIElement::documentURI):

2009-11-12  Adam Roben  <aroben@apple.com>

        Replace worldIDs with world objects

        Part of <http://webkit.org/b/31414> Implement new SPI for dealing with
        user scripts/stylesheets and isolated worlds

        Reviewed by Sam Weinig.

        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::addUserScript):
        (LayoutTestController::addUserStyleSheet):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::addUserScript):
        (LayoutTestController::addUserStyleSheet):
        Changed these functions to create a new WebJSWorld each time they're
        called and to pass that world to WebKit.

2009-11-11  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Oliver Hunt.

        need to implement aria tree roles
        https://bugs.webkit.org/show_bug.cgi?id=31284

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (disclosedRowAtIndexCallback):
        (selectedRowAtIndexCallback):
        (isEqualCallback):
        (isAttributeSettableCallback):
        (isActionSupportedCallback):
        (disclosedByRowCallback):
        (hierarchicalLevelCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        (AccessibilityUIElement::isEqual):
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::hierarchicalLevel):
        (AccessibilityUIElement::disclosedRowAtIndex):
        (AccessibilityUIElement::selectedRowAtIndex):
        (AccessibilityUIElement::disclosedByRow):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::getChildAtIndex):
        (AccessibilityUIElement::disclosedRowAtIndex):
        (AccessibilityUIElement::selectedRowAtIndex):
        (AccessibilityUIElement::titleUIElement):
        (AccessibilityUIElement::parentElement):
        (AccessibilityUIElement::disclosedByRow):
        (AccessibilityUIElement::hierarchicalLevel):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::hierarchicalLevel):
        (AccessibilityUIElement::disclosedRowAtIndex):
        (AccessibilityUIElement::selectedRowAtIndex):
        (AccessibilityUIElement::disclosedByRow):

2009-11-11  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Darin Adler.

        svn-apply can not handle git binary diffs
        https://bugs.webkit.org/show_bug.cgi?id=26830

        Support "literal" type git binary diffs.

        * Scripts/VCSUtils.pm:
        * Scripts/modules/scm_unittest.py:
        * Scripts/svn-apply:

2009-11-11  Dmitry Titov  <dimich@chromium.org>

        Not reviewed, removing duplicate entry for myself in committers.py.

        * Scripts/modules/committers.py:

2009-11-11  Alexey Proskuryakov  <ap@apple.com>

        Reviewed by Darin Adler and Mark Rowe.

        https://bugs.webkit.org/show_bug.cgi?id=31200
        Tests in http/tests/security/mixedContent start to fail when new tests are added

        * DumpRenderTree/mac/DumpRenderTree.mm: (dumpRenderTree): Added a workaround for Tiger bug.

2009-11-11  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Jan Alonzo.

        Create, and display a window for the inspector, for inspector
        tests.

        Need to also show/hide the inspector window to avoid having
        problems with code assuming it is realized
        https://bugs.webkit.org/show_bug.cgi?id=31347

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (webInspectorShowWindow):
        (webInspectorCloseWindow):
        (webInspectorInspectWebView):
        (createWebView):

2009-11-11  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Unreviewed Qt buildbot fix.

        My previous fix was wrong, so revert that change and fix it by
        returning when the document of the frame has no document element.
        Idea is borrowed from mac and win DRT.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::dumpFramesAsText):

2009-11-11  Eric Seidel  <eric@webkit.org>

        Reviewed byg Kenneth Rohde Christiansen.

        Update Kenneth's committer record to include the email he
        uses on lists.webkit.org.

        * Scripts/modules/committers.py:

2009-11-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Gustavo Noronha Silva.

        Several committers use separate email addresses for bugzilla and svn.webkit.org
        https://bugs.webkit.org/show_bug.cgi?id=31364

        Update records for existing committers to include email addresses
        used in svn.webkit.org and lists.webkit.org.
        Most committers use the same email address in all 3 places, but some use
        separate addresses.  committers.py needs record of each of these addresses.

        * Scripts/modules/committers.py:

2009-11-11  Eric Seidel  <eric@webkit.org>

        No review, adding second email address for an existing committer.

        Add Yong Li's second bugzilla account to his committer record.
        See: https://bugs.webkit.org/show_bug.cgi?id=27371#c27

        * Scripts/modules/committers.py:

2009-11-11  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        If the frame has no innerText don't append it, and
        do not add a newline which breaks some cross platform
        results.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::dumpFramesAsText):

2009-11-11  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        Implement missing functionality in the Gtk/Qt TestNetscapePlugin.

        * DumpRenderTree/gtk/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_new_instance):
        (webkit_test_plugin_destroy_instance):
        (webkit_test_plugin_destroy_stream):

2009-11-11  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Mark Rowe.

        Implement the functionality needed by plugins/window-open.html

        * DumpRenderTree/gtk/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_new_instance):
        (webkit_test_plugin_set_window):

2009-11-11  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Simon Hausmann.

        [Qt] Force -graphicssystem raster and -style windows when running DRT

        * DumpRenderTree/qt/main.cpp:
        * Scripts/run-webkit-tests:

2009-11-11  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Simon Hausmann.

        Compute correct library paths for Qt

        * Scripts/webkitdirs.pm:

2009-11-10  Mark Rowe  <mrowe@apple.com>

        Reviewed by Sam Weinig.

        <http://webkit.org/b/31200> Tests in http/tests/security/mixedContent start to fail when new tests are added

        The first request to an HTTPS URL results in didFailProvisionalLoadWithError being called with an error
        about the validity of the self-signed certificates used in the regression tests.  We would then add the
        host to the ignore list for SSL certificate errors and retry the request.  If this happened during a test
        that had enabled frame load delegate logging this would result in extra log messages being generated,
        causing the test to fail.

        We address this by explicitly ignoring SSL certificate errors for localhost and 127.0.0.1 before running any
        tests.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (dumpRenderTree):
        * DumpRenderTree/mac/FrameLoadDelegate.mm:
        (-[FrameLoadDelegate webView:didFailProvisionalLoadWithError:forFrame:]):

2009-11-10  Andras Becsi  <becsi.andras@stud.u-szeged.hu>

        Reviewed by Kenneth Rohde Christiansen.

        [Qt] Remove obsolete scrollbar policy settings from DRT constructor.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):

2009-11-10  Philippe Normand  <pnormand@igalia.com>

        Reviewed by Jan Alonzo.

        [GTK] Remove WebSocket configuration from WebKitWebSettings
        https://bugs.webkit.org/show_bug.cgi?id=31244

        Follow-up of r50724. Don't set the enable-web-socket property
        anymore.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2009-11-10  Oliver Hunt  <oliver@apple.com>

        Reviewed by Maciej Stachowiak.

        Rename 3D Canvas related classes to use WebGL prefix
        https://bugs.webkit.org/show_bug.cgi?id=29095

        Checkin new version of do-webcore-rename used to do the WebGL type rename,
        and upate webkitdirs script to new method of testing for WebGL.

        * Scripts/do-webcore-rename:
        * Scripts/webkitdirs.pm:

2009-11-09  Oliver Hunt  <oliver@apple.com>

        Reviewed by Geoff Garen.

        Make do-webcore-rename work with git.

        * Scripts/do-webcore-rename:

2009-11-09  Simon Hausmann  <simon.hausmann@nokia.com>

        Adding Kenneth to the reviewers list.

        * Scripts/modules/committers.py:

2009-11-09  Martin Robinson  <martin.james.robinson@gmail.com>

        Reviewed by Jan Alonzo.

        [GTK] Expose Page::tabKeyCyclesThroughElements in the API
        https://bugs.webkit.org/show_bug.cgi?id=30482

        LayoutTestControllerGtk now uses the exposed
        Page::tabKeyCyclesThroughElements API

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setTabKeyCyclesThroughElements):

2009-11-08  Shu Chang  <Chang.Shu@nokia.com>

        Reviewed by Holger Freyther.

        [Qt] Added support for key code 8 (backspace) in EventSenderQt.
        This helps to pass the test case below. Also replaced hardcoded
        code numbers with defined constants.
        https://bugs.webkit.org/show_bug.cgi?id=31185
        
        Test: editing/undo/undo-deleteWord.html

        * DumpRenderTree/qt/EventSenderQt.cpp:
        (EventSender::keyDown):

2009-11-07  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Holger Freyther.

        [Qt] [DRT] Fix wrong logic in LayoutTestController processWork
        https://bugs.webkit.org/show_bug.cgi?id=31164

        Fixed wrong logic to assume WorkQueue is done in QT's DRT.

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::processWork):

2009-11-05  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Holger Freyther.

        [Qt][DRT] Replace queueScript by queueNonLoadingScript and queueLoadingScript method
        https://bugs.webkit.org/show_bug.cgi?id=31158

        By invoking a script queue'd by queueScript(), 'true' was beeing returned
        always, which from WorkQueue prospective means that a load has been started
        and the queue processing should stop and wait for the load to finish.
        Spinning it off into a loading and a non-loading variants was the solution
        adopted by Mac's DRT to work around this problem. The former keeps returning
        'true' while the later executes the script synchronously and returns 'false'
        making it possible to the WorkQueue to proceed right away.

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::processWork):
        (LayoutTestController::queueLoadingScript):
        (LayoutTestController::queueNonLoadingScript):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:
        * DumpRenderTree/qt/WorkQueueItem.h:
        (LoadingScriptItem::LoadingScriptItem):
        (LoadingScriptItem::invoke):
        (NonLoadingScriptItem::NonLoadingScriptItem):
        (NonLoadingScriptItem::invoke):

2009-11-07  Mark Rowe  <mrowe@apple.com>

        Rubber-stamped by Cameron Zwarich.

        Invoke prepare-ChangeLog via an absolute path rather than assuming it can be found in PATH.

        * Scripts/commit-log-editor:

2009-11-07  Mark Rowe  <mrowe@apple.com>

        Reviewed by Darin Adler.

        Fix <https://bugs.webkit.org/show_bug.cgi?id=28168>.
        commit-log-editor does not support all the email address configurations that prepare-Changelog supports

        Move logic for determining the name and email address to use in a ChangeLog entry from
        prepare-ChangeLog to VCSUtils so that commit-log-editor can use it.  It wants to check
        whether the author of the patch matches committer, and therefore needs access to the
        email address that would be used in a ChangeLog entry.

        Based on a patch by Pierre d'Herbemont.

        * Scripts/VCSUtils.pm:
        * Scripts/commit-log-editor:
        * Scripts/prepare-ChangeLog:
        * Scripts/webkitdirs.pm:

2009-11-06  Anantanarayanan G Iyengar  <ananta@chromium.org>

        Reviewed by Adam Barth.

        Added functionality to the layout test plugin to invoke document.open and
        window.open with default arguments. The associated webkit bug is
        https://bugs.webkit.org/show_bug.cgi?id=31067, which affects Chromium. Basically
        window.open and document.open calls issued by NPAPI plugins via NPN_Invoke don't
        work in Chromium (V8) if there is no calling javascript context. To achieve this
        effect we invoke these functions in the layout test plugin in the NPP_SetWindow
        for the window.open test case and in NPP_DestroyStream for the document.open test case.

        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp:
        (testDocumentOpen):
        (testWindowOpen):
        (pluginAllocate):
        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.h:
        * DumpRenderTree/TestNetscapePlugIn.subproj/main.cpp:
        (NPP_New):
        (NPP_SetWindow):
        (NPP_DestroyStream):
        * DumpRenderTree/win/TestNetscapePlugin/main.cpp:
        (NPP_New):
        (NPP_SetWindow):
        (NPP_NewStream):
        (NPP_DestroyStream):

2009-11-06  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool crashed with exception
        https://bugs.webkit.org/show_bug.cgi?id=31092

        * Scripts/modules/bugzilla.py: Change a ',' to a '%' to fix the error.

2009-11-04  Eric Seidel  <eric@webkit.org>

        No review, just add a line which got left out of the patch uploaded for commit.

        commit-queue is crashing when trying to reject patches after unknown failures
        https://bugs.webkit.org/show_bug.cgi?id=31091

        * Scripts/bugzilla-tool: Set bug_log = None after closing to we don't re-close and crash.

2009-11-04  Adam Roben  <aroben@apple.com>

        Remove bogus else clause in bugzilla-tool

        Fixes <http://webkit.org/b/31125> REGRESSION (r47121): bugzilla-tool
        create-bug raises exception after entering bug description

        Reviewed by David Kilzer.

        * Scripts/bugzilla-tool:
        (CreateBug): else clauses are only hit if no exception is raised, so
        it makes no sense to try to re-raise the exception in an else clause.
        The exception will automatically be re-raised if it doesn't match any
        of the except clauses, so we don't have to do anything special here at
        all to get the desired behavior.

2009-11-04  Eric Seidel  <eric@webkit.org>

        Reviewed by David Kilzer.

        svn-apply's fixChangeLogPatch function seems broken
        https://bugs.webkit.org/show_bug.cgi?id=30683

        Update fixChangeLogPatch to be able to handle patches which
        don't start at line 1.
        Add unit tests for svn-apply to scm_unittest.py.

        * Scripts/VCSUtils.pm:
        * Scripts/modules/scm_unittest.py:

2009-11-04  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Beth Dakin.

        Need to implement ARIA role="combobox"
        https://bugs.webkit.org/show_bug.cgi?id=31096

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (showMenuCallback):
        (getIsExpandedCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::isExpanded):
        (AccessibilityUIElement::showMenu):
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::isExpanded):
        (AccessibilityUIElement::showMenu):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::isSelected):
        (AccessibilityUIElement::isExpanded):
        (AccessibilityUIElement::showMenu):

2009-11-04  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue is crashing when trying to reject patches after unknown failures
        https://bugs.webkit.org/show_bug.cgi?id=31091

        * Scripts/bugzilla-tool:
         - patch['id'] was a copy/paste mistake.  This code has no 'patch' variable
           so we have to find out what the current patch is by asking bugzilla again.
         - Discovered that this code was also leaking file descriptors, so fixed that.

2009-11-04  Adam Roben  <aroben@apple.com>

        Make run-webkit-tests work for the Debug_Internal Windows
        configuration

        In Debug_Internal, DumpRenderTree.exe and ImageDiff.exe have no _debug
        suffix.

        Fixes <http://webkit.org/b/31123>.

        Reviewed by Sam Weinig.

        * Scripts/run-webkit-tests: Don't add the _debug suffix in
        Debug_Internal, either.

2009-11-04  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        committers.py needs a way to store non-bugzilla email addresses
        https://bugs.webkit.org/show_bug.cgi?id=31037

        Make Committer and Reviewer constructors take a single email or a list of emails.
        Change committer_by_bugzilla_email functions to committer_by_email to support lookup by any email.
        Expose reviewers(), used by validate-committer-lists on bug 30970.

        * Scripts/modules/committers.py:
        * Scripts/modules/committers_unittest.py: Added tests for the new code.

2009-11-03  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by David Levin.

        Start/Stop Web Socket and Web Socket Secure servers for layout tests.
        https://bugs.webkit.org/show_bug.cgi?id=27491

        The test path determination logic is changed to handle websocket and websocket/ssl cases.
        The logic for non-http (and now also non-websocket) tests is moved toward the end of the if-elsif statement.

        Functions to start or stop Web Socket servers are added.

        * Scripts/run-webkit-tests:

2009-11-03  Eric Seidel  <eric@webkit.org>

        No review, just changing wording of log message.

        Change log string to say "failed" instead of "rejected"
        when a commit fails due to an out of date checkout.
        This makes grepping the commit-queue log for rejected patches easier.

        * Scripts/bugzilla-tool:

2009-11-03  Eric Seidel  <eric@webkit.org>

        No review, adding commonly known committers missing from the file.

        * Scripts/modules/committers.py: Add committers found by looking at SVN records.

2009-11-03  Eric Seidel  <eric@webkit.org>

        No review, just sort-order cleanup.

        * Scripts/modules/committers.py: Sort committers/reviewers alphabetically.

2009-11-03  Stephen White  <senorblanco@chromium.org>

        (Unreviewed).

        Add myself to committers.py.

        * Scripts/modules/committers.py:

2009-11-03  Robin Dunn  <robin@alldunn.com>

        Reviewed by Kevin Ollviier.

        Add packaging scripts for Debian-based Linux distros.
        
        https://bugs.webkit.org/show_bug.cgi?id=31075

        * wx/packaging/build-debian-installer.py: Added.
        * wx/packaging/debian: Added.

2009-11-03  Dan Bernstein  <mitz@apple.com>

        Reviewed by Anders Carlsson and Beth Dakin.

        https://bugs.webkit.org/show_bug.cgi?id=31070

        Added an 'ondestroy' parameter to the test plug-in. When the plug-in is
        destroyed, it executes the value of the 'ondestroy' parameter as a
        script.

        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp:
        (pluginAllocate): Initialize onDestroy.
        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.h: Define
        onDestroy.
        * DumpRenderTree/TestNetscapePlugIn.subproj/main.cpp:
        (NPP_New): Set onDestroy to the value of the 'ondestroy' parameter, if
        specified.
        (NPP_Destroy): Execute the value of 'ondestroy' as a script.

2009-11-02  Joanmarie Diggs  <joanmarie.diggs@gmail.com>

        Reviewed by Xan Lopez.

        https://bugs.webkit.org/show_bug.cgi?id=31035
        [GTK] some accessibility tests hitting assertion in debug builds

        Get the correct Gtk+ object before attempting to turn it into an AtkObject.

        * DumpRenderTree/gtk/AccessibilityControllerGtk.cpp:
        (AccessibilityController::rootElement):

2009-11-02  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Beth Dakin.

        Support ARIA "tab" roles
        https://bugs.webkit.org/show_bug.cgi?id=30842

        * DumpRenderTree/AccessibilityUIElement.cpp:
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:

2009-11-01  Eric Seidel  <eric@webkit.org>

        Reviewed by David Levin.

        buildbots should use --exit-after-N-failures
        https://bugs.webkit.org/show_bug.cgi?id=30809

        Make the bots exit after 20 failures to prevent never-ending
        test runs where every test spends a minute crashing.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:

2009-11-01  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Eric Seidel.

        Turn on warnings for QtWebKit for gcc
        https://bugs.webkit.org/show_bug.cgi?id=30958

        * DumpRenderTree/qt/main.cpp: 
        (crashHandler): Mark function NO_RETURN

2009-11-01  Jessie Berlin  <jberlin@webkit.org>

        Adding myself to the committers list.

        * Scripts/modules/committers.py:

2009-10-30  Jon Honeycutt  <jhoneycutt@apple.com>

        Fix an issue that Adam noticed in DRT.

        Reviewed by Darin Adler.

        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::role):
        Get the length of the role text, and create a buffer dynamically.

2009-10-30  Eric Seidel  <eric@webkit.org>

        No review, rolling out r50105.
        http://trac.webkit.org/changeset/50105

        This commit was causing:
        https://bugs.webkit.org/show_bug.cgi?id=30869
        We'll re-implement the feature a different way.

        * Scripts/bugzilla-tool:

2009-10-29  Jon Honeycutt  <jhoneycutt@apple.com>

        Test for MSAA: Accessibility of headings is not correct

        https://bugs.webkit.org/show_bug.cgi?id=30937

        Reviewed by Adam Roben.

        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::role):
        Allow the role returned to be a BSTR.
        (AccessibilityUIElement::description):
        Fix a copy/paste error.

2009-10-29  Jon Honeycutt  <jhoneycutt@apple.com>

        Test for MSAA: Accessibility of links is wrong

        https://bugs.webkit.org/show_bug.cgi?id=30928

        Reviewed by Darin Adler.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (getAccessibilityValueCallback):
        Return the accessibility value.
        (AccessibilityUIElement::getJSClass):
        Added "accessibilityValue" value.

        * DumpRenderTree/AccessibilityUIElement.h:

        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::accessibilityValue):
        Stubbed.

        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::accessibilityValue):
        Stubbed.

        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::accessibilityValue):
        Get the object's value, and return it as a JS string.

2009-10-30  Kevin Ollivier  <kevino@theolliviers.com>

        Fix typo in command name used by wx build system.

        * wx/build/build_utils.py:

2009-10-30  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Adler.

        Patch v1 is a dumb default name for patches
        https://bugs.webkit.org/show_bug.cgi?id=30952

        Let's use "Patch" instead.

        * Scripts/bugzilla-tool:

2009-10-30  Andras Becsi  <becsi.andras@stud.u-szeged.hu>

        Unreviewed trivial buildfix.

        [Qt] Buildfix for r50333.

        * DumpRenderTree/qt/DumpRenderTree.pro:

2009-10-30  Antonio Gomes  <tonikitoo@webkit.org>

        Reviewed by Holger Freyther.

        [Qt] Remove qt/WorkQueue.cpp|h in favor of platform independent WorkQueue
        https://bugs.webkit.org/show_bug.cgi?id=30953

        DumpRenderTree/WorkQueue and DumpRenderTree/qt/WorkQueue share mostly the
        same implementation. Some Q_ASSERTs differ from ASSERTs basically. Patch
        makes qt DRT to share this implementation (as gtk and mac ports do).

        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/WorkQueue.cpp: Removed.
        * DumpRenderTree/qt/WorkQueue.h: Removed.

2009-10-30  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Unreviewed potential buildbot fix.

        Second try: Reset page history before running each test.

        Apparently the QWebHistory::clear() keeps the current page
        in history which is not what we want, so we not additionally
        sets the history capacity to 0 (forces removing everything)
        and then sets it back to its original value.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):

2009-10-30  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Unreviewed potential buildbot fix.

        Reset page history before running each test.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):

2009-10-30  Roland Steiner  <rolandsteiner@chromium.org>

        Reviewed by Eric Seidel.

        Remove ENABLE_RUBY guards as discussed with Dave Hyatt and Maciej Stachowiak.

        Bug 28420 -  Implement HTML5 <ruby> rendering
        (https://bugs.webkit.org/show_bug.cgi?id=28420)

        No new tests (no functional change).

        * Scripts/build-webkit:

2009-10-29  Dan Bernstein  <mitz@apple.com>

        Reviewed by Mark Rowe.

        Fix “Undefined subroutine” errors in svn-*apply by moving the removeEOL subroutine
        from the two scripts that define it but don’t use it to the script that uses it but doesn’t
        define it.

        * Scripts/VCSUtils.pm:
        * Scripts/svn-apply:
        * Scripts/svn-unapply:

2009-10-29  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Gustavo Noronha.

        Use the GTK+ main loop instead of rolling our own mini-version of
        it.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (dump):
        (runTest):
        (webViewLoadFinished):

2009-10-29  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Oliver Hunt.

        Implement the Qt version of DRT dumpBackForwardList().

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::dumpHistoryItem):
        (WebCore::DumpRenderTree::dumpBackForwardList):

2009-10-29  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Adam Roben.

        Implement DRT functionality for Qt introduced in
        r28690 and r28705.

        - Implemented pathToLocalResource which exposes the functionality of
        converting a given unix path to the correct location on Windows.
        - Implemented a way to remove machine-dependent information from paths
        in layout test results.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::urlSuitableForTestResult):
        (WebCore::WebPage::javaScriptConsoleMessage):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::pathToLocalResource):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2009-10-28  Roland Steiner  <rolandsteiner@chromium.org>

        Adding myself to the committers list.

        * Scripts/modules/committers.py:

2009-10-28  Chris Fleizach  <cfleizach@apple.com>

        Adding myself to the committers list.

        * Scripts/modules/committers.py:

2009-10-28  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Jan Alonzo.

        [GTK] API to start inspector for a WebView
        https://bugs.webkit.org/show_bug.cgi?id=22551

        Use the new inspector API to implement the LayoutTestController
        interfaces used to test the inspector.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (webInspectorInspectWebView):
        (createWebView):
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::showWebInspector):
        (LayoutTestController::closeWebInspector):
        (LayoutTestController::evaluateInWebInspector):

2009-10-28  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Eric Seidel.

        [Qt] WebFrame::counterValueForElementById must not be exposed
        https://bugs.webkit.org/show_bug.cgi?id=30882

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::counterValueForElementById):

2009-10-28  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Rubberstamped by Oliver Hunt.

        Fix the warning:

        "warning: ignoring return value of 'char* getcwd(char*, size_t)',
        declared with attribute warn_unused_result".

        by actually checking the result. In the case it is null, an
        error has occoured, so treat it as the other fatal errors.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::initializeFonts):

2009-10-27  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Darin Adler.

        Provide a way to get counter values with layoutTestContoller
        https://bugs.webkit.org/show_bug.cgi?id=30555

        Define layoutTestContoller.counterValueForElementById.

        * DumpRenderTree/LayoutTestController.cpp:
        (counterValueForElementByIdCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::counterValueForElementById):

2009-10-27  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Rubberstamped by Oliver Hunt.

        Change two methods to be internal for DRT use only.

        Part of [Qt] Review all new API in Qt 4.6
        https://bugs.webkit.org/show_bug.cgi?id=29843#c11

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::whiteListAccessFromOrigin):

2009-10-27  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        REGRESSION: svn-apply exits(1) when applying a patch with a file add
        https://bugs.webkit.org/show_bug.cgi?id=30826

        * Scripts/svn-apply:
         - Add () around all system() calls.
         - Use the correct system() == 0 or die instead of system() or die
         - Add descriptive messages to all die statements.

2009-10-27  Steve Block  <steveblock@google.com>

        Reviewed by NOBODY.

        Adds steveblock@google.com to list of committers.

        * Scripts/modules/committers.py: Adds steveblock@google.com to list of committers.

2009-10-27  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        svn-apply can exit(0) even on patch failure
        https://bugs.webkit.org/show_bug.cgi?id=29622

        * Scripts/svn-apply:
         - Add a bunch of "or die" statements, hopefully catching all
           possible cases where failure could still exit(0).

2009-10-27  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        svn-* scripts should share code through VCSUtils.pm
        https://bugs.webkit.org/show_bug.cgi?id=30791

        Just moving code into a shared location.

        * Scripts/VCSUtils.pm:
        * Scripts/prepare-ChangeLog:
        * Scripts/resolve-ChangeLogs:
        * Scripts/svn-apply:
        * Scripts/svn-create-patch:
        * Scripts/svn-unapply:
        * Scripts/update-webkit:

2009-10-27  Vadim Zeitlin  <vadim@wxwidgets.org>

        Suppress a huge number of MSVC warnings when building wxWebKit.

        * wx/build/settings.py:

2009-10-26  Eric Seidel  <eric@webkit.org>

        No review, just adding Mike Belshe to the committers list.

        * Scripts/modules/committers.py:

2009-10-26  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Darin Adler.

        Make .rc files compile on Windows without depending on MFC headers
        https://bugs.webkit.org/show_bug.cgi?id=30750

        * DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.rc: Use
        windows.h instead of afxres.h because it exists even when MFC is not 
        installed, and is all that's needed here.

        * FindSafari/FindSafari.rc: Ditto

2009-10-24  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool post-diff should know how to mark commit-queue=?
        https://bugs.webkit.org/show_bug.cgi?id=29202

        * Scripts/bugzilla-tool:
         - Add --commit-queue option to post-diff, post-commits and create-bug.
        * Scripts/modules/bugzilla.py:
         - Added support for --commit-queue to add_patch_to_bug and create_bug_with_patch.
         - Added _fill_attachment_form to share code between add_patch_to_bug and create_bug_with_patch.

2009-10-23  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool commit-queue does not notice modifications to committers.py
        https://bugs.webkit.org/show_bug.cgi?id=30084

        * Scripts/bugzilla-tool:
         - Make commit-queue re-exec itself instead of using while(1).
         - Add a --is-relaunch parameter to commit-queue to bypass initialization on re-launch.
         - Add a _next_patch() method which calls exec() (and could eventually call update-webkit too).

2009-10-22  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue will get stuck on patches if land-patches terminates unexpectedly
        https://bugs.webkit.org/show_bug.cgi?id=30634

        * Scripts/bugzilla-tool:
         - Add a way for land-patches to exit(2) to indicate an error, but one it has handled.
         - Make commit-queue auto cq- any patch where land-patches exited anything other than '0' or '2'.

2009-10-26  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by Eric Seidel.

        Upgrade pywebsocket to 0.4.1. This will make reusing LayoutTests/fast/js/resources easier, for example.

        https://bugs.webkit.org/show_bug.cgi?id=30763

        * pywebsocket/mod_pywebsocket/__init__.py:
        * pywebsocket/mod_pywebsocket/dispatch.py:
        * pywebsocket/mod_pywebsocket/headerparserhandler.py:
        * pywebsocket/mod_pywebsocket/standalone.py:
        * pywebsocket/setup.py:
        * pywebsocket/test/test_dispatch.py:

2009-10-26  Carol Szabo  <carol.szabo@nokia.com>

        Reviewed by David Levin.

        REGRESSION: 2 failures in run-webkit-unittests
        https://bugs.webkit.org/show_bug.cgi?id=30645

        * Scripts/modules/cpp_style_unittest.py:
        Fixed a few test scenarios which apparently lost some spaces from 
        text literals.

2009-10-26  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix. Make sure isQt() doesn't return true if --wx was passed to build-webkit.

        * Scripts/webkitdirs.pm:

2009-10-26  Csaba Osztrogonác  <ossy@webkit.org>

        Reviewed by Darin Adler.

        Unification of using null device in perl scripts.
        https://bugs.webkit.org/show_bug.cgi?id=30572

        * Scripts/VCSUtils.pm:
        * Scripts/bisect-builds:
        * Scripts/resolve-ChangeLogs:
        * Scripts/run-iexploder-tests:
        * Scripts/run-jsc:
        * Scripts/run-mangleme-tests:
        * Scripts/run-webkit-tests:
        * Scripts/webkitdirs.pm:
        Using File::Spec->devnull() instead of hard coded /dev/null.

2009-10-26  Eric Seidel  <eric@webkit.org>

        Reviewed by Holger Freyther.

        Reviewers are missing from committers.py
        https://bugs.webkit.org/show_bug.cgi?id=30733

        * Scripts/modules/committers.py:

2009-10-23  Eric Seidel  <eric@webkit.org>

        No review, only adding Alice to the list of reviewers.

        * Scripts/modules/committers.py:

2009-10-23  Eric Seidel  <eric@webkit.org>

        Reviewed by Eric Carlson.

        fast/media/mq-transform-02.html failed on Leopard Commit Bot
        https://bugs.webkit.org/show_bug.cgi?id=30700

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues): Update QuickTime version check.

2009-10-23  Kevin Ollivier  <kevino@theolliviers.com>

        wxMac 10.4 build fix, needs to link against WebKitSystemInterfaceTiger to get 
        character measurement APIs that are private on Tiger.

        * wx/build/settings.py:

2009-10-22  Gavin Barraclough  <barraclough@apple.com>

        Reviewed by NOBODY (build fix).
        Build fix following bug #30696.

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::evaluateScriptInIsolatedWorld):

2009-10-22  Gavin Barraclough  <barraclough@apple.com>

        Reviewed by Sam Weinig & Geoff Garen.

        https://bugs.webkit.org/show_bug.cgi?id=30696
        Enable isolated-worlds tests on mac.

        Add private interface for DRT to invoke execution in a given world.

        * DumpRenderTree/LayoutTestController.cpp:
        (evaluateScriptInIsolatedWorldCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::evaluateScriptInIsolatedWorld):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::evaluateScriptInIsolatedWorld):

2009-10-21  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool's "patch failed to download an apply" error should give more information
        https://bugs.webkit.org/show_bug.cgi?id=30632

        * Scripts/modules/scm.py:
         - Use the common run_command method instead of custom POpen code.
         - Make run_command know how to take pipes as input.
        * Scripts/modules/scm_unittest.py:
         - Add new tests to cover change.
         - Also move test_error_handlers into new SCMClassTests so we don't run it 3 times.

2009-10-21  Kent Tamura  <tkent@chromium.org>

        Unreviewed.  Adding myself to the committers list.

        * Scripts/modules/committers.py:

2009-10-21  Robin Dunn  <robin@alldunn.com>

        Reviewed by Kevin Ollivier.

        Update the Windows installer builder to work with Vista / Win 7 and with git.
        
        https://bugs.webkit.org/show_bug.cgi?id=30649

        * wx/build/build_utils.py:
        * wx/packaging/build-mac-installer.py:
        * wx/packaging/build-win-installer.py:
        * wx/packaging/wxWebKitInstaller.iss.in:

2009-10-21  Alejandro G. Castro  <alex@igalia.com>

        Reviewed by Gustavo Noronha.

        [GTK] Added conditional code to avoid using
        gdk_window_get_root_coords if we do not have a gtk+ release newer
        than 2.17.3.
        https://bugs.webkit.org/show_bug.cgi?id=30636

        * WebKitTools/DumpRenderTree/gtk/EventSender.cpp:

2009-10-21  Shu Chang  <Chang.Shu@nokia.com>

        Reviewed by Eric Seidel.

        [Qt] Added dummy implementation for keepWebHistory()
        https://bugs.webkit.org/show_bug.cgi?id=30592

        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::keepWebHistory):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2009-10-21  Alejandro G. Castro  <alex@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Fixed the double click condition, it is not double click if
        we move in just in one direction.
        https://bugs.webkit.org/show_bug.cgi?id=30636

        * WebKitTools/DumpRenderTree/gtk/EventSender.cpp:

2009-10-21  Alejandro G. Castro  <alex@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Initialize the events completly before emitting them.
        https://bugs.webkit.org/show_bug.cgi?id=30633

        * WebKitTools/DumpRenderTree/gtk/EventSender.cpp:

2009-10-21  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix. Fix for when linking using --as-needed with gcc.

        * wx/browser/wscript:

2009-10-21  Kevin Ollivier  <kevino@theolliviers.com>

        wxMac 10.4 build fix. Build and link against a version of libcurl new enough
        to support all the features used by CURL backend.
        
        * wx/build/settings.py:
        * wx/install-unix-extras:

2009-10-20  Anton Muhin  <antonm@chromium.org>

        Reviewed by Adam Barth.

        Add {ager,antonm,yurys}@chromium.org into committers.py
        https://bugs.webkit.org/show_bug.cgi?id=30560

        * Scripts/modules/committers.py:

2009-10-20  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Tor Arne Vestbø.

        Make the Netscape Test plugin available to the Qt launcher.

        * Scripts/run-launcher:

2009-10-20  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by David Levin.

        Removed WebSocket runtime settings.
        https://bugs.webkit.org/show_bug.cgi?id=29896

        WebSocket runtime configuration is supported by chromium/v8 only.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2009-10-19  Nate Chapin  <japhet@chromium.org>

        Reviewed by Adam Barth.

        Add testFail() to test plugin so we can test our handling of a
        plugin invoke call returning false.

        https://bugs.webkit.org/show_bug.cgi?id=30239

        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp: Add testFail().
        (pluginInvoke):
        (testIdentifierToString): Always return true, since returning false will now cause an exception to be thrown.

2009-10-19  Zan Dobersek  <zandobersek@gmail.com>

        Reviewed by Gustavo Noronha.

        Enable DOM pasting when running layout tests.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2009-10-18  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        Use the setPreferredContentsSize method instead
        of setFixedContentsSize, as the method has been renamed.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::open):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setFixedContentsSize):

2009-10-16  Steve Falkenburg  <sfalken@apple.com>

        Reviewed by Dan Bernstein.

        https://bugs.webkit.org/show_bug.cgi?id=30456
        Fixes for new Debug_All Windows build configuration.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (sharedCFURLCache): Use new DEBUG_ALL preprocessor define for library naming.
        * DumpRenderTree/win/DumpRenderTree.vcproj: Remove unused DEBUG_WEBKIT_HAS_SUFFIX.

2009-10-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue status bot should list which buildbot is blocking the queue
        https://bugs.webkit.org/show_bug.cgi?id=30452

        Add new methods and testing.

        * Scripts/bugzilla-tool:
        * Scripts/modules/buildbot.py:
        * Scripts/modules/buildbot_unittest.py:

2009-10-16  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        run-webkit-tests fails when CWD is not inside a WebKit checkout
        https://bugs.webkit.org/show_bug.cgi?id=30451

        * Scripts/modules/scm.py: in_working_directory shouldn't throw exceptions on failure.
        * Scripts/modules/scm_unittest.py:
          - Remove use of original_path (we don't need to restore the CWD).
          - Don't use '.' to find the webkit checkout, use __file__ instead.

2009-10-16  Steve Falkenburg  <sfalken@apple.com>

        Reviewed by Adam Roben.

        Add a Debug_All configuration to build entire stack as debug.
        Change Debug_Internal to:
        - stop using _debug suffix for all WebKit/Safari binaries
        - not use _debug as a DLL naming suffix
        - use non-debug C runtime lib.

        * DumpRenderTree/DumpRenderTree.sln: Add Debug_All configuration.
        * DumpRenderTree/win/DumpRenderTree.vcproj: Add Debug_All configuration.
        * DumpRenderTree/win/ImageDiff.vcproj: Add Debug_All configuration.
        * DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.vcproj:
        Add missing debug.vsprops inherited property sheet.
        Add Debug_All configuration.
        * FindSafari/FindSafari.vcproj: Renamed single configuration from "Release" to "all".
        * WinLauncher/WinLauncher.vcproj:
        Removed extraneous definitions inherited from vsprops.
        Add Debug_All configuration.

2009-10-16  Carol Szabo  <carol.szabo@nokia.com>

        Reviewed by David Levin.

        check-webkit-style is wrong about indent checking in namespaces
        in header files and a few other things
        https://bugs.webkit.org/show_bug.cgi?id=30362

        The few other things include:
        + check-webkit-style does not require spaces around the equal sign
          inside 'if' statements and around binary operators that take 
          numeric literals.
        + check-webkit-style reports false errors for the / operator
          when part of a filename in the #include directive.

        * Scripts/modules/cpp_style.py:
        Improved indentation checking and space checking around
        binary operators. While the checks are still not perfect,
        they are clearly better than before.
        * Scripts/modules/cpp_style_unittest.py:
        Added test cases for the newly supported checks and modified old
        test cases to match the new guidelines

2009-10-16  Kevin Ollivier  <kevino@theolliviers.com>

        wxMSW build fix. Link to MSW library needed by PluginPackageWin.cpp.

        * wx/build/settings.py:

2009-10-15  Yuzo Fujishima  <yuzo@google.com>

        Reviewed by David Levin.

        Add mod_pywebsocket to test Web Sockets.
        http://code.google.com/p/pywebsocket/
        https://bugs.webkit.org/show_bug.cgi?id=27490

        * pywebsocket/COPYING: Added.
        * pywebsocket/MANIFEST.in: Added.
        * pywebsocket/README: Added.
        * pywebsocket/example/echo_client.py: Added.
        * pywebsocket/example/echo_wsh.py: Added.
        * pywebsocket/mod_pywebsocket/__init__.py: Added.
        * pywebsocket/mod_pywebsocket/dispatch.py: Added.
        * pywebsocket/mod_pywebsocket/handshake.py: Added.
        * pywebsocket/mod_pywebsocket/headerparserhandler.py: Added.
        * pywebsocket/mod_pywebsocket/msgutil.py: Added.
        * pywebsocket/mod_pywebsocket/standalone.py: Added.
        * pywebsocket/mod_pywebsocket/util.py: Added.
        * pywebsocket/setup.py: Added.
        * pywebsocket/test/config.py: Added.
        * pywebsocket/test/mock.py: Added.
        * pywebsocket/test/run_all.py: Added.
        * pywebsocket/test/test_dispatch.py: Added.
        * pywebsocket/test/test_handshake.py: Added.
        * pywebsocket/test/test_mock.py: Added.
        * pywebsocket/test/test_msgutil.py: Added.
        * pywebsocket/test/test_util.py: Added.
        * pywebsocket/test/testdata/handlers/blank_wsh.py: Added.
        * pywebsocket/test/testdata/handlers/origin_check_wsh.py: Added.
        * pywebsocket/test/testdata/handlers/sub/exception_in_transfer_wsh.py: Added.
        * pywebsocket/test/testdata/handlers/sub/no_wsh_at_the_end.py: Added.
        * pywebsocket/test/testdata/handlers/sub/non_callable_wsh.py: Added.
        * pywebsocket/test/testdata/handlers/sub/plain_wsh.py: Added.
        * pywebsocket/test/testdata/handlers/sub/wrong_handshake_sig_wsh.py: Added.
        * pywebsocket/test/testdata/handlers/sub/wrong_transfer_sig_wsh.py: Added.

2009-10-15  James Robinson  <jamesr@google.com>

        Reviewed by David Levin.

        Updates check-webkit-style to reflect that code inside a namespace should not be indented, even in a header file.

        https://bugs.webkit.org/show_bug.cgi?id=30426

        * Scripts/modules/cpp_style.py:
        * Scripts/modules/cpp_style_unittest.py:

2009-10-15  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Adam Roben.

        Fixes <http://webkit.org/b/30411>.
        REGRESSION(49485): pdevenv doesn't compile in parallel for non-chromium builds on Windows.
        
        Added a check for isChromium() in pdevenv, and pass /useenv if we are not
        building Chromium.

        * Scripts/pdevenv:

2009-10-15  Robin Dunn  <robin@alldunn.com>

        Reviewed by Kevin Ollivier.

        Add Mac package building scripts for wx.
        
        https://bugs.webkit.org/show_bug.cgi?id=30405

        * wx/build/build_utils.py:
        * wx/build/settings.py:
        * wx/packaging/build-mac-installer.py: Added.

2009-10-15  Zan Dobersek  <zandobersek@gmail.com>

        Reviewed by Gustavo Noronha.

        Enable Web Sockets support when running layout tests.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2009-10-15  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Gustavo Noronha.

        Need to initialize event.button.button, since in most cases a
        button number is not passed as an argument.

        * DumpRenderTree/gtk/EventSender.cpp:
        (mouseDownCallback):
        (mouseUpCallback):

2009-10-15  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix. More SDK fixes for Mac, make sure we use the SDK corresponding to
        the OS if none was explicitly set.

        * wx/build/settings.py:

2009-10-14  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Timothy Hatcher.

        Web Inspector: enable developers extras within inspector layout tests.

        https://bugs.webkit.org/show_bug.cgi?id=30014

        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::showWebInspector):
        (LayoutTestController::closeWebInspector):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::showWebInspector):
        (LayoutTestController::closeWebInspector):

2009-10-14  José Millán Soto  <jmillan@igalia.com>

        Reviewed by Jan Alonzo.

        GtkLauncher is using a deprecated signal
        https://bugs.webkit.org/show_bug.cgi?id=30364

        Modified GtkLauncher to use notify::title signal instead of
        deprecated title-changed signal

        * GtkLauncher/main.c:
        (notify_title_cb):
        (create_browser):

2009-10-14  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig.

        Don't set the history delegate on new windows that are opened during a test, as the history delegate:
        1 - Disables WebHistory
        2 - Doesn't make sense in that context anyway.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (createWebViewAndOffscreenWindow):

2009-10-14  Kevin Ollivier  <kevino@theolliviers.com>

        wxMac build fix. Ensure 10.4 compatibility for deps, and allow the user to specify
        the SDK to use since Python overrides any user-set value of MACOSX_DEPLOYMENT_TARGET.

        * wx/build/settings.py:
        * wx/install-unix-extras:

2009-10-14  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig.

        WebKit Win API should provide a delegate interface for global history.
        https://bugs.webkit.org/show_bug.cgi?id=29905

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::dumpHistoryDelegateCallbacks):
        (LayoutTestController::setDumpHistoryDelegateCallbacks):
                
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (shouldLogHistoryDelegates):
        (runTest):
        (createWebViewAndOffscreenWindow):
        (main):
        * DumpRenderTree/win/DumpRenderTree.vcproj:
        
        Add the IWebHistoryDelegate to DRT Windows:
        * DumpRenderTree/win/HistoryDelegate.cpp: Added.
        (wstringFromBSTR):
        (HistoryDelegate::HistoryDelegate):
        (HistoryDelegate::~HistoryDelegate):
        (HistoryDelegate::QueryInterface):
        (HistoryDelegate::AddRef):
        (HistoryDelegate::Release):
        (HistoryDelegate::didNavigateWithNavigationData):
        (HistoryDelegate::didPerformClientRedirectFromURL):
        (HistoryDelegate::didPerformServerRedirectFromURL):
        (HistoryDelegate::updateHistoryTitle):
        (HistoryDelegate::populateVisitedLinksForWebView):
        * DumpRenderTree/win/HistoryDelegate.h: Added.

        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::removeAllVisitedLinks):

2009-10-14  Shu Chang  <Chang.Shu@nokia.com>

        Reviewed by Simon Hausmann.

        [Qt] Implement support for setPOSIXLocale on Qt.
        https://bugs.webkit.org/show_bug.cgi?id=30268 
 
        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp:
        (LayoutTestController::setPOSIXLocale):
        * DumpRenderTree/qt/LayoutTestControllerQt.h:

2009-10-13  Stephanie Lewis  <slewis@apple.com>

        Unreviewed, adding myself to reviewers list.

        * Scripts/modules/committers.py:

2009-10-13  Stephanie Lewis  <slewis@apple.com>

        Reviewed by Mark Rowe.

        Fix null assignment so root tests work again.

        * Scripts/webkitdirs.pm:

2009-10-13  Andras Becsi  <becsi.andras@stud.u-szeged.hu>

        Reviewed by Simon Hausmann.

        [Qt] Refactor LayoutTestController, EventSender, TextInputController and WorkQueueItem classes
        out of jsobjects into separate files to get a more structured DumpRenderTree implementation.
        This is done in preparation of implementing missing features in DRT.
        No functionality changes made yet.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/EventSenderQt.cpp: Added.
        (EventSender::EventSender):
        (EventSender::mouseDown):
        (EventSender::mouseUp):
        (EventSender::mouseMoveTo):
        (EventSender::leapForward):
        (EventSender::keyDown):
        (EventSender::contextClick):
        (EventSender::scheduleAsynchronousClick):
        (EventSender::frameUnderMouse):
        * DumpRenderTree/qt/EventSenderQt.h: Added.
        (EventSender::clearKillRing):
        * DumpRenderTree/qt/LayoutTestControllerQt.cpp: Added.
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::reset):
        (LayoutTestController::processWork):
        (LayoutTestController::maybeDump):
        (LayoutTestController::waitUntilDone):
        (LayoutTestController::notifyDone):
        (LayoutTestController::windowCount):
        (LayoutTestController::clearBackForwardList):
        (LayoutTestController::dumpEditingCallbacks):
        (LayoutTestController::dumpResourceLoadCallbacks):
        (LayoutTestController::queueBackNavigation):
        (LayoutTestController::queueForwardNavigation):
        (LayoutTestController::queueLoad):
        (LayoutTestController::queueReload):
        (LayoutTestController::queueScript):
        (LayoutTestController::provisionalLoad):
        (LayoutTestController::timerEvent):
        (LayoutTestController::encodeHostName):
        (LayoutTestController::decodeHostName):
        (LayoutTestController::setJavaScriptProfilingEnabled):
        (LayoutTestController::setFixedContentsSize):
        (LayoutTestController::setPrivateBrowsingEnabled):
        (LayoutTestController::setPopupBlockingEnabled):
        (LayoutTestController::pauseAnimationAtTimeOnElementWithId):
        (LayoutTestController::pauseTransitionAtTimeOnElementWithId):
        (LayoutTestController::numberOfActiveAnimations):
        (LayoutTestController::disableImageLoading):
        (LayoutTestController::dispatchPendingLoadRequests):
        (LayoutTestController::setDatabaseQuota):
        (LayoutTestController::clearAllDatabases):
        (LayoutTestController::whiteListAccessFromOrigin):
        (LayoutTestController::waitForPolicyDelegate):
        (LayoutTestController::overridePreference):
        * DumpRenderTree/qt/LayoutTestControllerQt.h: Added.
        (LayoutTestController::isLoading):
        (LayoutTestController::setLoading):
        (LayoutTestController::shouldDumpAsText):
        (LayoutTestController::shouldDumpBackForwardList):
        (LayoutTestController::shouldDumpChildrenAsText):
        (LayoutTestController::shouldDumpDatabaseCallbacks):
        (LayoutTestController::shouldDumpStatusCallbacks):
        (LayoutTestController::shouldWaitUntilDone):
        (LayoutTestController::canOpenWindows):
        (LayoutTestController::shouldDumpTitleChanges):
        (LayoutTestController::waitForPolicy):
        (LayoutTestController::dumpAsText):
        (LayoutTestController::dumpChildFramesAsText):
        (LayoutTestController::dumpDatabaseCallbacks):
        (LayoutTestController::dumpStatusCallbacks):
        (LayoutTestController::setCanOpenWindows):
        (LayoutTestController::dumpBackForwardList):
        (LayoutTestController::setCloseRemainingWindowsWhenComplete):
        (LayoutTestController::display):
        (LayoutTestController::dumpTitleChanges):
        (LayoutTestController::dumpSelectionRect):
        * DumpRenderTree/qt/TextInputControllerQt.cpp: Added.
        (TextInputController::TextInputController):
        (TextInputController::doCommand):
        * DumpRenderTree/qt/TextInputControllerQt.h: Added.
        * DumpRenderTree/qt/WorkQueue.cpp:
        * DumpRenderTree/qt/WorkQueue.h:
        * DumpRenderTree/qt/WorkQueueItem.h:
        * DumpRenderTree/qt/WorkQueueItemQt.cpp: Added.
        (findFrameNamed):
        (LoadItem::invoke):
        (ReloadItem::invoke):
        (ScriptItem::invoke):
        (BackForwardItem::invoke):
        * DumpRenderTree/qt/jsobjects.cpp: Move all the above classes into separate files
        * DumpRenderTree/qt/jsobjects.h:

2009-10-13  Dmitry Titov  <dimich@chromium.org>

        Not reviewed, adding myself to the list of reviewers.

        * Scripts/modules/committers.py:

2009-10-13  Anders Carlsson  <andersca@apple.com>

        Reviewed by Sam Weinig.

        <rdar://problem/6660507> Add "privacy mode" to Netscape Plug-in API

        Make the private browsing mode testable by the test plug-in.
        
        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp:
        (pluginGetProperty):
        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.h:
        * DumpRenderTree/TestNetscapePlugIn.subproj/main.cpp:
        (NPP_New):
        (NPP_SetValue):

2009-10-13  Pavel Feldman  <pfeldman@chromium.org>

        No review, just adding self to the list of reviewers.

        * Scripts/modules/committers.py:

2009-10-12  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Adam Roben.

        Web Inspector: Use proper web view in inspector layout
        tests for windows.

        https://bugs.webkit.org/show_bug.cgi?id=30298

        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::showWebInspector):
        (LayoutTestController::closeWebInspector):
        (LayoutTestController::evaluateInWebInspector):

2009-10-12  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by Sam Weinig.

        Enable experimentalWebSocket in DumpRenderTree for LayoutTest.
        https://bugs.webkit.org/show_bug.cgi?id=29841

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2009-10-12  Yaar Schnitman  <yaar@chromium.org>

        Reviewed by Dimitri Glazkov.

        Chromium Port - Windows
        https://bugs.webkit.org/show_bug.cgi?id=29969

        * Scripts/pdevenv: removed msvc's /useenv for chromium builds
        * Scripts/webkitdirs.pm:

2009-10-12  Csaba Osztrogonac  <ossy@webkit.org>

        Reviewed by Darin Adler.

        jsc scripts cleanup and Qt/GTK fix
        https://bugs.webkit.org/show_bug.cgi?id=30288

        Duplicated jscPath() moved to webkitdirs.pm.
        New jscProductDir() added to webkitdirs.pm instead of duplicated codes.
        Configuration added (release/debug) to path for Qt-port on Windows.

        * Scripts/run-javascriptcore-tests:
        * Scripts/run-jsc:
        * Scripts/run-sunspider:
        * Scripts/sunspider-compare-results:
        * Scripts/webkitdirs.pm:

2009-10-11  Adam Barth  <abarth@webkit.org>

        Unreviewed.  Add Collin to committers.py.

        * Scripts/modules/committers.py:

2009-10-11  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix, add bindings to source/include dirs now that there are sources there.

        * wx/build/settings.py:

2009-10-09  Mark Rowe  <mrowe@apple.com>

        Reviewed by Brady Eidson.

        Enable plug-in halting in DumpRenderTree.

        We drop the plug-in halting delay to 1 second and opt in the delegate method to never halt plug-ins.
        This is sufficient to ensure that the crash covered by <rdar://problem/7290671> no longer occurs.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/mac/UIDelegate.mm:
        (-[UIDelegate webView:shouldHaltPlugin:]):

2009-10-08  Brady Eidson  <beidson@apple.com>

        Reviewed by Dan Bernstein.

        Ask the History Delegate to populate the visited links hash.
        <rdar://problem/7285293> and https://webkit.org/b/29904

        Add the ability for LayoutTestController to clear all visited links.
        Also lets the History Delegate dump visited links, but only if this test specifically cleared them.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (removeAllVisitedLinksCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::removeAllVisitedLinks):

        * DumpRenderTree/mac/HistoryDelegate.mm:
        (-[HistoryDelegate populateVisitedLinksForWebView:]):

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::removeAllVisitedLinks):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::removeAllVisitedLinks):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::removeAllVisitedLinks):


2009-10-08  Daniel Bates  <dbates@webkit.org>

        Reviewed by Adam Roben.

        https://bugs.webkit.org/show_bug.cgi?id=30175
        
        The Windows DRT equivalent of DoDragDrop (i.e. UIDelegate::doDragDrop) does not return
        the OLE drag-and-drop return value like the function it emulates. Currently, 
        UIDelegate::doDragDrop returns a hard-coded S_OK. Hence, the caller cannot determine 
        whether the drag-and-drop operation was successful or was cancelled.
        
        This patch fixes this issue by having UIDelegate::doDragDrop return the OLE drag-and-drop 
        return value according to whether the drop operation was successful or not.

        * DumpRenderTree/win/EventSender.cpp:
        (doMouseUp): Added parameter oleDragAndDropReturnValue.
        (replaySavedEvents): Ditto.
        * DumpRenderTree/win/EventSender.h:
        * DumpRenderTree/win/UIDelegate.cpp:
        (UIDelegate::doDragDrop): Modified to return OLE drag-and-drop return value.

2009-10-08  Alejandro G. Castro  <alex@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Added support for a parameter setting the button that was
        pressed in the mouseDown function.
        https://bugs.webkit.org/show_bug.cgi?id=30220

        * WebKitTools/DumpRenderTree/gtk/EventSender.cpp:

2009-10-08  Alejandro G. Castro  <alex@igalia.com>

        Reviewed by Xan Lopez.

        [GTK] Added a line to the bottom of the expected result to match
        the output of the test.
        https://bugs.webkit.org/show_bug.cgi?id=30220

        * LayoutTests/platform/gtk/editing/pasteboard/middle-click-onpaste-
        expected.txt:

2009-10-08  Adam Roben  <aroben@apple.com>

        Use QueryInterface to get IWebInspectorPrivate

        Fixes <http://webkit.org/b/30215> Make IWebInspectorPrivate be
        accessed in a more standard way

        Reviewed by John Sullivan and Tim Hatcher.

        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::evaluateInWebInspector): Get the IWebInspector
        by calling IWebViewPrivate::inspector, then use QueryInterface to get
        to the IWebInspectorPrivate interface.

2009-10-07  Adam Roben  <aroben@apple.com>

        Implement DRT support for origin whitelisting

        Fixes <http://webkit.org/b/30185>.

        Reviewed by Eric Seidel.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting): Reset any origin
        whitelist, to match Mac DRT.
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::whiteListAccessFromOrigin): Call through to
        IWebViewPrivate::whiteListAccessFromOrigin.

2009-10-07  Brady Eidson  <beidson@apple.com>

        Reviewed by Darin Adler.

        Send title changes to the global history delegate.
        <rdar://problem/7285293> and https://webkit.org/b/29904

        * DumpRenderTree/mac/HistoryDelegate.mm:
        (-[HistoryDelegate webView:updateHistoryTitle:forURL:]):

2009-10-07  Adam Barth  <abarth@webkit.org>

        Unreviewed.  Remove some folks from committers.py who were listed on
        the WebKit Team wiki page but who weren't actually listed as commit+.
        At some point, we should coorelate this list with the committers
        mailing list.

        * Scripts/modules/committers.py:

2009-10-07  Adam Barth  <abarth@webkit.org>

        Unreviewed.  Import a bunch of committers from the WebKit Team page on
        the wiki into committers.py.

        * Scripts/modules/committers.py:

2009-10-07  Adam Barth  <abarth@webkit.org>

        Unreviewed.  Added Aaron Boodman to committers.py.

        * Scripts/modules/committers.py:

2009-10-07  Evan Martin  <evan@chromium.org>

        Reviewed by Darin Adler.

        Add API to LayoutTestController for re/setting the system locale.
        https://bugs.webkit.org/show_bug.cgi?id=18994

        * DumpRenderTree/LayoutTestController.cpp:
        (setLocaleCallback):
        (LayoutTestController::staticFunctions):
        (LayoutTestController::setLocale):
        * DumpRenderTree/LayoutTestController.h:

2009-10-06  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Jan Alonzo.

        [Layout tests] [Gtk] Gtk DumpRenderTree should use WebKit test fonts
        https://bugs.webkit.org/show_bug.cgi?id=29689

        Build fix by adding -lfontconfig for DumpRenderTree.

        * GNUmakefile.am:

2009-10-07  Csaba Osztrogonac  <oszi@inf.u-szeged.hu>

        Reviewed by Simon Hausmann.

        Re-enable use-remote-links-to-tests for Qt. Disabled in r46416.

        * Scripts/run-webkit-tests:

2009-10-07  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Gustavo Noronha.

        "delete" in EventSender is the backspace key, not the delete one.

        * DumpRenderTree/gtk/EventSender.cpp:
        (keyDownCallback):

2009-10-07  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Gustavo Noronha.

        getChildrenWithRange expects as last parameter the end index, not
        the length of the range. Correct this and clarify the variable
        names to reflect how the code works.

        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::getChildrenWithRange):
        (AccessibilityUIElement::getChildAtIndex):

2009-10-06  Mark Rowe  <mrowe@apple.com>

        Reviewed by Simon Fraser.

        <http://webkit.org/b/30138> update-webkit-localizable-strings assumes that WebKitTools/Scripts is in the PATH

        * Scripts/update-webkit-localizable-strings: Use an explicit path to extract-localizable-strings based on the
        the fact we have already changed the working directory to the top of the open source tree.

2009-10-06  Julie Parent  <jparent@chromium.org>

        Unreviewed. Fixing the entry for myself in committers.py to use my bugzilla email,
        rather than my committer email.

        * Scripts/modules/committers.py:

2009-10-06  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Eric Seidel.

        [Qt] LayoutTestController: Reset m_dumpStatusCallbacks to false in reset().

        r49189 added support for the 'dumpStatusCallbacks' setting but didn't reset
        it after each layout test as it should do, making the DRT dump additional output
        for all of the subsequent layout tests.

        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::reset):

2009-10-06  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] Implement layoutTestController.dumpStatusCallbacks() and unskip the
        fast/dom/assign-to-window-status.html test, which is passing as a result.

        https://bugs.webkit.org/show_bug.cgi?id=30127

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):
        (WebCore::DumpRenderTree::statusBarMessage):
        * DumpRenderTree/qt/DumpRenderTree.h:
        * DumpRenderTree/qt/jsobjects.h:
        (LayoutTestController::shouldDumpStatusCallbacks):
        (LayoutTestController::dumpStatusCallbacks):

2009-10-06  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] The implementation of EventSender::mouseUp() and EventSender::mouseDown()
        ignores the argument indicating which mouse button to trigger.
        https://bugs.webkit.org/show_bug.cgi?id=30048

        This affects the fast/events/mouse-click-events.html layout test.

        * DumpRenderTree/qt/jsobjects.cpp:
        (EventSender::mouseDown):
        (EventSender::mouseUp):
        * DumpRenderTree/qt/jsobjects.h:

2009-10-06  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] Fix the EventSender::keyDown() implementation
        https://bugs.webkit.org/show_bug.cgi?id=30043

        It should post both a key press event and a key release event,
        just like other ports do.

        * DumpRenderTree/qt/jsobjects.cpp:
        (EventSender::keyDown):

2009-10-05  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix. Add jpeg to the list of libs to link against.

        * wx/build/settings.py:

2009-10-05  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] EventSender::keyDown() cannot send function-key events.
        https://bugs.webkit.org/show_bug.cgi?id=30044

        This affects the fast/events/keydown-function-keys.html layout test.

        * DumpRenderTree/qt/jsobjects.cpp:
        (EventSender::keyDown):

2009-10-05  Vadim Zeitlin  <vadim@wxwidgets.org>

        Added --wx-compiler-prefix waf option to allow building wxWebKit with
        wxWidgets built using "nmake COMPILER_PREFIX=something-non-default".

        * wx/build/settings.py:
        * wx/build/wxpresets.py:

2009-10-05  Pavel Feldman  <pfeldman@chromium.org>

        Reviewed by Timothy Hatcher.

        Web Inspector: add testing harness for Web Inspector.

        https://bugs.webkit.org/show_bug.cgi?id=30010

        * DumpRenderTree/LayoutTestController.cpp:
        (showWebInspectorCallback):
        (closeWebInspectorCallback):
        (evaluateInWebInspectorCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::showWebInspector):
        (LayoutTestController::closeWebInspector):
        (LayoutTestController::evaluateInWebInspector):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::showWebInspector):
        (LayoutTestController::closeWebInspector):
        (LayoutTestController::evaluateInWebInspector):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::showWebInspector):
        (LayoutTestController::closeWebInspector):
        (LayoutTestController::evaluateInWebInspector):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::showWebInspector):
        (LayoutTestController::closeWebInspector):
        (LayoutTestController::evaluateInWebInspector):

2009-10-05  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Ariyha Hidayat.

        Pass arguments to system() as a string instead of array

        When passed as an array entries with a space fail to translate
        to two arguments to the child process, so instead of manually
        splitting all the entries in @buildArgs we pass the whole thing
        as a string instead.

        * Scripts/webkitdirs.pm:

2009-10-04  Carol Szabo  <carol.szabo@nokia.com>

        Reviewed by David Levin.

        check-webkit-style misses whitespace errors for operators:
        <<, >>, <<=, >>=, &=, |=, +=, -=, *=, /=, /, |, &&, ||.
        https://bugs.webkit.org/show_bug.cgi?id=30021

        * Scripts/modules/cpp_style.py:
        Added the operators mentioned above to the same list as == and !=.

2009-10-02  Julie Parent  <jparent@chromium.org>

        Unreviewed.

        Adding myself and Ojan Vafai as committers, because we are committers.

        * Scripts/modules/committers.py:

2009-10-02  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Adam Roben.

        svn-create-patch should have an --ignore-changelogs to not add ChangeLogs to the diff,
        this will help the patch merging process when TryBots are used.

        * Scripts/svn-create-patch:

2009-10-02  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] Implement layoutTestController.overridePreference().
        https://bugs.webkit.org/show_bug.cgi?id=29970

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):
        (WebCore::WebPage::resetSettings):
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):
        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setPrivateBrowsingEnabled):
        (LayoutTestController::setPopupBlockingEnabled):
        (LayoutTestController::overridePreference):
        * DumpRenderTree/qt/jsobjects.h:

2009-10-01  Chris Marrin  <cmarrin@apple.com>

        Reviewed by Oliver Hunt.

        Turn on ENABLE_3D_CANVAS in TOT
        https://bugs.webkit.org/show_bug.cgi?id=29906

        * Scripts/build-webkit:

2009-10-01  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Rubberstamped by Simon Hausmann.

        Enable HTTP tests for Qt

        * Scripts/run-webkit-tests:

2009-10-01  Yaar Schnitman  <yaar@chromium.org>

        Reviewed by Dimitri Glazkov.

        build-webkit --chromium now also works on cygwin.

        https://bugs.webkit.org/show_bug.cgi?id=29973

        * Scripts/webkitdirs.pm:

2009-10-01  Zoltan Horvath  <zoltan@webkit.org>

        Reviewed by Simon Hausmann.

        [Qt] Don't use TCmalloc in DumpRenderTree
        https://bugs.webkit.org/show_bug.cgi?id=27029

        Add USE_SYSTEM_MALLOC macro to the DRT's profile to avoid using TCmalloc in Qt's DRT.

        * DumpRenderTree/qt/DumpRenderTree.pro:

2009-10-01  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] Implement eventSender.scheduleAsynchronousClick().

        https://bugs.webkit.org/show_bug.cgi?id=29931

        * DumpRenderTree/qt/jsobjects.cpp:
        (EventSender::scheduleAsynchronousClick):
        * DumpRenderTree/qt/jsobjects.h:

2009-10-01  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] Implement setPopupBlockingEnabled() in the LayoutTestController and remove
        fast/events/open-window-from-another-frame.html from the Skipped list.

        https://bugs.webkit.org/show_bug.cgi?id=29930

        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::setPopupBlockingEnabled):
        * DumpRenderTree/qt/jsobjects.h:

2009-09-30  Cameron McCormack  <cam@mcc.id.au>

        Unreviewed.

        Added myself to the list of committers.

        * Scripts/modules/committers.py:

2009-09-30  Eric Seidel  <eric@webkit.org>

        No review, just adding Geoff to the list of reviewers.

        * Scripts/modules/committers.py:

2009-09-30  Dan Bernstein  <mitz@apple.com>

        Reviewed by Sam Weinig.

        Added the WebKit Layout Tests fonts that are referenced in
        LayoutTests/platform/win/css2.1/resources/Mac-compatible-font-fallback.css

        * DumpRenderTree/fonts/WebKit Layout Tests 2.ttf: Added.
        * DumpRenderTree/fonts/WebKit Layout Tests.ttf: Added.

2009-09-30  Csaba Osztrogonac  <oszi@inf.u-szeged.hu>

        Reviewed by David Kilzer.

        Make sunspider scripts work on Windows platform.
        https://bugs.webkit.org/show_bug.cgi?id=29656

        * Scripts/run-sunspider: Perl scripts invoked with same Perl interpreter.
        * Scripts/sunspider-compare-results: Perl scripts invoked with same Perl interpreter.
        * Scripts/webkitdirs.pm: currentPerlPath() added.

2009-09-29  Brady Eidson  <beidson@apple.com>

        Rubberstamped by Dan Bernstein.

        Fix license and some sorting in new files.

        * DumpRenderTree/mac/HistoryDelegate.h:
        * DumpRenderTree/mac/HistoryDelegate.mm:

2009-09-29  Yaar Schnitman  <yaar@chromium.org>

        Reviewed by David Kilzer.

        Fixed how error codes are handled.
        https://bugs.webkit.org/show_bug.cgi?id=29898

        * Scripts/update-webkit:
        * Scripts/update-webkit-chromium:

2009-09-29  Brady Eidson  <beidson@apple.com>

        Reviewed by John Sullivan.

        Updated way-out-of-date sorting throughout the dump methods/flags.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (dumpAsPDFCallback):
        (dumpAsTextCallback):
        (dumpFrameLoadCallbacksCallback):
        (dumpResourceLoadCallbacksCallback):
        (LayoutTestController::staticFunctions):

        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::dumpAsText):
        (LayoutTestController::setDumpAsText):
        (LayoutTestController::dumpFrameLoadCallbacks):
        (LayoutTestController::setDumpFrameLoadCallbacks):
        (LayoutTestController::dumpSelectionRect):
        (LayoutTestController::setDumpSelectionRect):
        (LayoutTestController::dumpSourceAsWebArchive):
        (LayoutTestController::setDumpSourceAsWebArchive):
        (LayoutTestController::dumpStatusCallbacks):
        (LayoutTestController::setDumpStatusCallbacks):
        (LayoutTestController::dumpTitleChanges):
        (LayoutTestController::setDumpTitleChanges):
        (LayoutTestController::dumpWillCacheResponse):
        (LayoutTestController::setDumpWillCacheResponse):

2009-09-29  Brady Eidson  <beidson@apple.com>

        Reviewed by John Sullivan.

        WebKit Mac API should provide a delegate interface for global history.
        <rdar://problem/7042773> and https://webkit.org/b/29904

        Adding the dumping of global history delegate callbacks.

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:

        Automatically dump history delegate callbacks for tests with "globalhistory/" in their URL:
        * DumpRenderTree/mac/DumpRenderTree.mm:
        (createWebViewAndOffscreenWindow):
        (allocateGlobalControllers):
        (shouldLogFrameLoadDelegates):
        (shouldLogHistoryDelegates):
        (runTest):

        Dump history delegate callbacks:
        * DumpRenderTree/mac/HistoryDelegate.h: Added.
        * DumpRenderTree/mac/HistoryDelegate.mm: Added.
        (-[HistoryDelegate webView:didNavigateWithNavigationData:inFrame:]):
        (-[HistoryDelegate webView:didPerformClientRedirectFromURL:toURL:inFrame:]):
        (-[HistoryDelegate webView:didPerformServerRedirectFromURL:toURL:inFrame:]):

2009-09-29  Daniel Bates  <dbates@webkit.org>

        Reviewed by Adam Roben.

        https://bugs.webkit.org/show_bug.cgi?id=28902
        
        Fixes an issue where the drop effect returned by Window Dump Render Tree 
        was always DROPEFFECT_NONE (since it was hard coded to do so).
        
        This patch corrects this issue by determining the actual drop effect 
        performed by the corresponding drag-and-drop operation so that we can 
        return it.

        * DumpRenderTree/win/DraggingInfo.h: Added field m_dropEffect to store performed drop effect.
        (DraggingInfo::DraggingInfo):
        (DraggingInfo::performedDropEffect): Added method.
        (DraggingInfo::setPerformedDropEffect): Added method.
        * DumpRenderTree/win/EventSender.cpp:
        (doMouseUp): Calls method DraggingInfo::setPerformedDropEffect with performed drop effect.
        Moved delete draggingInfo to UIDelegate::doDragDrop.
        * DumpRenderTree/win/UIDelegate.cpp:
        (UIDelegate::doDragDrop): Sets performedDropEffect to DraggingInfo::performedDropEffect().

2009-09-29  Dan Bernstein  <mitz@apple.com>

        Reviewed by Adam Roben.

        Remove copying of unnecessary or nonexistent files from the ImageDiff
        post-build event.

        * DumpRenderTree/win/ImageDiff.vcproj:

2009-09-29  Csaba Osztrogonac  <oszi@inf.u-szeged.hu>

        Reviewed by David Kilzer.

        [Qt] Make build-webkit script work on Windows
        https://bugs.webkit.org/show_bug.cgi?id=29802

        * Scripts/run-webkit-tests:
        * Scripts/webkitdirs.pm:
         - Removed unnecessary -p switch for mkdir on Windows.
         - Use canonical path, which uses slashes or backslashes depends on platform.
         - isWindows() only test for Windows and not for Cyqwin.

2009-09-29  Andras Becsi  <becsi.andras@stud.u-szeged.hu>

        Reviewed by Simon Hausmann.

        Fix time measurement in build-webkit after refactoring done in r48853.

        * Scripts/build-webkit:

2009-09-29  Andras Becsi  <becsi.andras@stud.u-szeged.hu>

        Reviewed by Tor Arne Vestbø.

        [Qt] Default font size reconciliation to 16px/13px to match other platform's de-facto standard.
        This fixes https://bugs.webkit.org/show_bug.cgi?id=19674.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):

2009-09-29  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] Implement eventSender.contextClick().
        https://bugs.webkit.org/show_bug.cgi?id=29821

        * DumpRenderTree/qt/jsobjects.cpp:
        (EventSender::contextClick):
        * DumpRenderTree/qt/jsobjects.h:

2009-09-28  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by Eric Seidel.

        Add experimentalWebSocketsEnabled in WebPreferences.
        https://bugs.webkit.org/show_bug.cgi?id=28941

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2009-09-28  Yaar Schnitman  <yaar@chromium.org>

        Reviewed by David Kilzer.

        Integrated chromium port building into webkit tools update-webkit and
        build-webkit.

        https://bugs.webkit.org/show_bug.cgi?id=29749

        * Scripts/build-webkit: When --chromium is specified, will build
          the chromium port (currently only Mac is supported).
        * Scripts/update-webkit: When --chromium is specified, delegates to
          update-webkit-chromium.
        * Scripts/webkitdirs.pm: Added chromium specific defs.
        * Scripts/update-webkit-chromium: Uses gclient and gyp to fetch
          chromium port's dependencies and update its project files.

2009-09-28  Fumitoshi Ukai  <ukai@chromium.org>

        Unreviewed.

        Add myself to list of committers.

        * Scripts/modules/committers.py:

2009-09-27  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Darin Adler.

        run-webkit-tests: Do not strip the metrics when there is no expected result for a test.
        https://bugs.webkit.org/show_bug.cgi?id=29771

        * Scripts/run-webkit-tests:

2009-09-27  Jakub Wieczorek  <faw217@gmail.com>

        Reviewed by Simon Hausmann.

        [Qt] Implement layoutTestController.waitForPolicyDelegate.
        https://bugs.webkit.org/show_bug.cgi?id=25037

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::acceptNavigationRequest):
        * DumpRenderTree/qt/DumpRenderTree.pro:
        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::notifyDone):
        (LayoutTestController::waitForPolicyDelegate):
        * DumpRenderTree/qt/jsobjects.h:
        (LayoutTestController::waitForPolicy):

2009-09-26  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/29764> mark-bug-fixed: add -o|--open switch

        Reviewed by Eric Seidel.

        The -o|--open switch uses the open(1) command on Mac OS X to
        open the bug URL in the default web browser.  If there are
        similar mechanisms on other platforms, they may be added later.

        * Scripts/mark-bug-fixed:
        (MarkBugFixed.__init__): Added -o|--open switch to list of parse
        options.
        (MarkBugFixed._determine_bug_id_and_svn_revision): Moved logging
        code into main() and extracted prompting code into
        _prompt_user_for_correctness().
        (MarkBugFixed._open_bug_in_web_browser): Added.
        (MarkBugFixed._prompt_user_for_correctness): Added.
        (MarkBugFixed.main): Added logging code from
        _determine_bug_id_and_svn_revision().  Added code to call
        _open_bug_in_web_browser() if the switch is set.  Added code to
        call _prompt_user_for_correctness() when needed.
        * Scripts/modules/bugzilla.py:
        (Bugzilla.short_bug_url_for_bug_id): Added.

2009-09-26  David Kilzer  <ddkilzer@apple.com>

        svn-unapply and svn-apply don't work when used outside multiple svn working directories

        <http://webkit.org/b/29744>
        <rdar://problem/7252905>

        Reviewed by Eric Seidel.

        Some users have a workflow where svn-create-patch, svn-apply and
        svn-unapply are used outside of multiple svn working
        directories.  Instead of aborting the scripts in these cases,
        print a warning and assume that Subversion is being used.

        * Scripts/VCSUtils.pm:
        (determineVCSRoot): Call warn() instead of die() if both isGit()
        and isSVN() initially return false.  Set $VCSUtils::isSVN to 1
        to enforce the assumption about Subversion, then return
        determineSVNRoot().
        * Scripts/svn-apply: Switch to using isGit() and isSVN() from
        VCSUtils.pm.  They both already cache their values and checking
        here is redundant since determineVCSRoot() is called later.

2009-09-26  Zan Dobersek  <zandobersek@gmail.com>

        Reviewed by Gustavo Noronha.

        [Layout tests] [Gtk] Gtk DumpRenderTree should use WebKit test fonts
        https://bugs.webkit.org/show_bug.cgi?id=29689

        Load test fonts through FontConfig before each test.
        This ensures a more proper rendering of the tests.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (initializeFonts):
        (runTest):
        (main):
        * DumpRenderTree/gtk/fonts.conf: Copied from WebKitTools/DumpRenderTree/qt/fonts.conf.
        * GNUmakefile.am:

2009-09-25  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/29718> mark-bug-fixed: add -u|--update-only switch

        Reviewed by Eric Seidel.

        * Scripts/mark-bug-fixed:
        (MarkBugFixed.__init__): Added -u|--update-only switch to list
        of parse options.
        (MarkBugFixed.main): When -u|--update-only is specified, add a
        comment to the bug without marking it Resolved/Fixed.

2009-09-25  Darin Adler  <darin@apple.com>

        Reviewed by Geoffrey Garen.

        * Scripts/prepare-ChangeLog: Leave files from the script-tests directory
        out, just as we do for the resources directory.

2009-09-25  Adam Barth  <abarth@webkit.org>

        Unreviewed.  Added Tony to committers.py because he's a
        committer now.

        * Scripts/modules/committers.py:

2009-09-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Simon Fraser.

        REGRESSION: media/video-pause-empty-events.html is occasionally timing out on bots
        https://bugs.webkit.org/show_bug.cgi?id=28624

        Disable hardware compositing on Leopard for versions of QuickTime 7.6.4 and older.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):

2009-09-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue should auto-retry patches which fail to commit due to out of date files
        https://bugs.webkit.org/show_bug.cgi?id=28316

        * Scripts/bugzilla-tool:
         - Handle new CheckoutNeedsUpdate exception.
        * Scripts/modules/logging_unittest.py:
         - Call the ScriptError constructor correctly (this test had regressed).
        * Scripts/modules/scm.py:
         - Added the ability to define custom error handlers for run_command
           and added a commit_error_handler which throws CheckoutNeedsUpdate
           instead of ScriptError.
         - Re-ordered ScriptError constructor arguments to make ScriptError("message text") usage possible.
        * Scripts/modules/scm_unittest.py:
         - Added tests of new error handlers.

2009-09-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue should give better feedback when failing a patch
        https://bugs.webkit.org/show_bug.cgi?id=29316

        * Scripts/bugzilla-tool:
         - Update ScriptError uses to the new constructor format.
         - Move CommitQueue._run_command to WebKitLandingScripts.run_command_with_teed_output
           so that we can print to both stdout as well as an output buffer for error reporting.
         - Update run_and_throw_if_fail to use teed output so that it can report the "output" as part of ScriptError.
         - Use e.message_with_output() when failing a patch (this is the real fix here).
           I also removed use of "This patch will require manual commit." as that's not always true.
         - Add missing word "bug" from log message.
        * Scripts/modules/scm.py:
         - Make ScriptError save a bunch more data so that error messages can be nicer.
         - Update ScriptError callers.

2009-09-24  John Gregg  <johnnyg@google.com>

        Reviewed by Eric Seidel.

        Enable switch for notifications (experimental) in Page Settings
        https://bugs.webkit.org/show_bug.cgi?id=28930

        Now that desktop notifications are controlled by run-time switch,
        set that switch to true for DumpRenderTree.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/win/UIDelegate.cpp:
        (UIDelegate::QueryInterface):

2009-09-24  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix. SnowLeopard fixes for Mac dependencies.

        * wx/build/build_utils.py:
        * wx/build/settings.py:
        * wx/install-unix-extras:

2009-09-24  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Oliver Hunt.

        Add support for DRT to send mouse wheel events.

        https://bugs.webkit.org/show_bug.cgi?id=29348
        [Gtk] Scrollwheel on horizontal scrollbars should slide horizontally

        * DumpRenderTree/gtk/EventSender.cpp:
        (mouseWheelToCallback):

2009-09-17  Eric Seidel  <eric@webkit.org>

        Reviewed by David Levin.

        commit-queue needs web-based status reporting
        https://bugs.webkit.org/show_bug.cgi?id=29307

        Add a first-pass web-based status for the commit-queue.
        The bot is currently reachable at:
        http://webkit-commit-queue.appspot.com/

        * CommitQueueStatus/app.yaml: Added.
         - Application description file required by App Engine.
        * CommitQueueStatus/filters/__init__.py: Added.
         - Required by python to treat 'filters' as a module.
        * CommitQueueStatus/filters/webkit_extras.py: Added.
         - Support for turning 'bug 123' and 'patch 123' into links.
           This lets us use plain text strings in our logs yet display nice HTML (help prevent XSS attacks on the page).
        * CommitQueueStatus/index.html: Added.
        * CommitQueueStatus/index.yaml: Added.
         - Some auto-generated file from app engine.
        * CommitQueueStatus/queue_status.py: Added.
         - The core logic of this bot.  We could eventually split this file out into pieces.
        * CommitQueueStatus/stylesheets/main.css: Added.
         - Some basic lame-o CSS to make the page look less awful.
        * CommitQueueStatus/update_status.html: Added.
         - The form that the commit-queue (or a human) can use to update the status.
        * Scripts/bugzilla-tool:
         - Add some very basic update_status calls.
        * Scripts/modules/statusbot.py: Added.
         - Knows how to post to the CommitQueueStatus web application.

2009-09-24  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/29712> mark-bug-fixed: add -m|--comment switch

        Reviewed by Adam Roben.

        * Scripts/mark-bug-fixed:
        (MarkBugFixed.__init__): Added -m|--comment switch to list of
        parse options.
        (MarkBugFixed.main): When specified, prepend comment from
        -m|--comment command-line switch to the bug comment.

2009-09-24  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Jan Alonzo.

        [GTK] DRT must display window instead of just realizing, to enable synthesizing events correctly
        https://bugs.webkit.org/show_bug.cgi?id=29693

        Show the window, to be able to synthesize events correctly.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (runTest):
        (main):

2009-09-24  Oliver Hunt  <oliver@apple.com>

        Reviewed by NOBODY(rollout)

        Roll out r48712 as it is incorrect.

        * DumpRenderTree/mac/ObjCController.m:
        (+[ObjCController isSelectorExcludedFromWebScript:]):
        (+[ObjCController webScriptNameForSelector:]):

2009-09-24  Benjamin Poulain  <benjamin.poulain@nokia.com>

        Reviewed by Eric Seidel.

        https://bugs.webkit.org/show_bug.cgi?id=29005
        The indices of RuntimeArray should be enumerated like for a regular array.

        * DumpRenderTree/mac/ObjCController.m:
        (+[ObjCController isSelectorExcludedFromWebScript:]):
        (+[ObjCController webScriptNameForSelector:]):
        (-[ObjCController arrayOfString]):

2009-09-23  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28910> Move bugzilla-tool mark-fixed to standalone mark-bug-fixed tool

        Reviewed by Darin Adler.

        Also fixed a bug where specifying a revision on the command-line
        as 'r12345' would fail.  See <http://webkit.org/b/29699>.

        * Scripts/bugzilla-tool: Updated module import statements.
        (parse_bug_id): Removed.  Moved to bugzilla.py.
        (bug_comment_from_svn_revision): Removed.  Moved to comments.py.
        (bug_comment_from_commit_text): Removed.  Moved to comments.py.
        (MarkBugFixed): Removed.  Code moved to mark-bug-fixed.
        (BugzillaTool.__init__): Removed mark-fixed subcommand.
        * Scripts/mark-bug-fixed: Added.
        * Scripts/modules/bugzilla.py:
        (parse_bug_id): Added.  Moved from bugzilla-tool.
        * Scripts/modules/comments.py: Added.
        (bug_comment_from_svn_revision): Added.  Moved from bugzilla-tool.
        (bug_comment_from_commit_text): Added.  Moved from bugzilla-tool.

2009-09-23  Marshall Culpepper  <mculpepper@appcelerator.com>

        Reviewed by Eric Seidel.
        
         jpeg.lib is now libjpeg.lib in DRT Cairo dependencies. return
         "false" in non-implemented stub for setAlwaysAcceptCookies.
         https://bugs.webkit.org/show_bug.cgi?id=29661

        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/DumpRenderTree.cpp:

2009-09-23  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Reviewed by Xan Lopez.

        [GTK] need to dump number of pending unload handlers
        https://bugs.webkit.org/show_bug.cgi?id=29685

        Implement dumping of the number of pending unload handlers.

        The following tests will pass:

          fast/loader/unload-form-about-blank.html
          fast/loader/unload-form-post-about-blank.html
          fast/loader/unload-form-post.html
          fast/loader/unload-form.html
          fast/loader/unload-hyperlink.html
          fast/loader/unload-javascript-url.html
          fast/loader/unload-reload.html
          fast/loader/unload-window-location.html

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (getFrameNameSuitableForTestResult):
        (webViewLoadFinished):

2009-09-22  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Eric Seidel.

        js tests should move into jstests subdirectory instead of resources/
        https://bugs.webkit.org/show_bug.cgi?id=25880

        Remove support of resources directory.

        * Scripts/make-script-test-wrappers:

2009-09-22  Eric Seidel  <eric@webkit.org>

        No review, only fixing typo (missing space character).

        Fix typo from https://bugs.webkit.org/show_bug.cgi?id=29220

        * Scripts/run-webkit-tests:

2009-09-22  Eric Seidel  <eric@webkit.org>

        Reviewed by Darin Adler.

        run-webkit-tests needs a --repeat-each=N option (AAABBBCCC instead of ABCABCABC)
        https://bugs.webkit.org/show_bug.cgi?id=29220

        * Scripts/run-webkit-tests:

2009-09-22  Eric Seidel  <eric@webkit.org>

        Reviewed by David Kilzer.

        svn-apply can't handle single-line binary file additions
        https://bugs.webkit.org/show_bug.cgi?id=29100

        Fixed the regexp and added a unit test.

        * Scripts/modules/scm_unittest.py:
        * Scripts/svn-apply:

2009-09-11  Eric Seidel  <eric@webkit.org>

        Reviewed by David Kilzer.

        post-diff and post-commits should be able to find bug urls in ChangeLogs.
        https://bugs.webkit.org/show_bug.cgi?id=29206

        * Scripts/bugzilla-tool:
         - Share common options by adding a PostDiffAsPatchToBug.posting_options() method.
         - Rename --no-comment to --add-log-as-comment and reverse behavior.
           Comments tend to just be noise.  I'll eventually remove this argument if no one uses it.
         - Split out code into helper functions to try and make execute() more legible.
         - Make post-diff find the bug url in the ChangeLogs if not passed as an argument.
         - Fallback to bug urls in commit diffs, instead of just in commit messages,
           meaning post-commits will now find bug urls in ChangeLogs.

2009-09-21  Csaba Osztrogonac  <oszi@inf.u-szeged.hu>

        Reviewed by Maciej Stachowiak.

        --parse-only parameter wasn't passed to SunSpider/sunspider script.
        https://bugs.webkit.org/show_bug.cgi?id=29611

        * Scripts/run-sunspider: Missing parameter passing added.

2009-09-20  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/29521> run-webkit-tests: use require instead eval to load DumpRenderTreeSupport module

        Reviewed by Mark Rowe.

        The require statement is like the use statement, except that it
        is run during script execution instead of during the 'BEGIN'
        phase.  This makes it possible to change @INC before the require
        statement is run.  See 'require' and 'use' in the perlfunc(1)
        manpage and 'BEGIN' in perlmod(1) manpage.

        * Scripts/run-webkit-tests: Replace eval statement with require
        statement.

2009-09-18  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fixes. Fix the config name under git and allow users to specify
        their own waf install for experimenting with new versions.

        * Scripts/webkitdirs.pm:
        * wx/build/settings.py:

2009-09-18  Alex Milowski  <alex@milowski.com>

        Reviewed by Maciej Stachowiak.

        Added checkWebCoreMathMLSupport and hasMathMLSupport to support 
        checking for whether MathML tests should be run

        * Scripts/run-webkit-tests:
        * Scripts/webkitdirs.pm:

2009-08-28  Darin Adler  <darin@apple.com>

        Reviewed by Mark Rowe.

        Break more of run-webkit-tests into separate functions
        https://bugs.webkit.org/show_bug.cgi?id=29497

        Some small steps toward improving run-webkit-tests. My goal is to
        refactor much more of the script into functions. Later we can add
        parallel test running to the tool. But better structure may help
        even if someone decides to translate this into another scripting
        language instead.

        * Scripts/run-webkit-tests: Break more pieces of the script into
        seprate functions. Added readSkippedFiles, findTestsToRun, and
        printResults functions. Removed custom code to skip results.html
        and instead just put it into the ignoredFiles hash. Fixed some
        indentation. Sorted function declarations, global variables,
        and options at the top of the file alphabetically so they're not
        in a semi-random order.

2009-09-17  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix, add missing dependency.

        * wx/browser/wscript:

2009-09-16  Mark Rowe  <mrowe@apple.com>

        Split the SnowLeopard build across a few machines.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2009-09-16  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix to support monolithic builds on Windows.

        * wx/build/wxpresets.py:

2009-09-16  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix, improve debug support and 2.9 support on MSW.

        * wx/build/settings.py:
        * wx/build/wxpresets.py:

2009-09-16  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Blind try at fixing new test failure on Windows.

        * DumpRenderTree/win/FrameLoadDelegate.cpp:
        (FrameLoadDelegate::didReceiveTitle):

2009-09-15  Alex Milowski  <alex@milowski.com>

        Reviewed by Tor Arne Vestbø.

        Added mathml toggle

        * Scripts/build-webkit:

2009-09-15  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix. Allow waf build to support Python < 2.6.

        * wx/build/waf_extensions.py:

2009-09-14  Chris Marrin  <cmarrin@apple.com>

        Reviewed by Oliver Hunt.

        Add LayoutTests infrastructure to enable and disable webgl tests.
        https://bugs.webkit.org/show_bug.cgi?id=29254

        * Scripts/run-webkit-tests:
        * Scripts/webkitdirs.pm:

2009-09-14  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Darin Adler.
        
        Add --iterations option to run-webkit-tests to repeat the tests N times
        https://bugs.webkit.org/show_bug.cgi?id=29263

        When run with --iterations N, run-webkit-tests will repeat the tests N times.

        * Scripts/run-webkit-tests:

2009-09-14  Brady Eidson  <beidson@apple.com>

        Not reviewed, maybe should've been:

        Cleaning up more Windows-specific fallout from the fix for:
        <rdar://problem/7174050> and https://bugs.webkit.org/show_bug.cgi?id=29160

        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::didReceiveAuthenticationChallenge):  Correct printf() formatter, 
          and call the correct method to get the Sender.

2009-09-14  Jon Honeycutt  <jhoneycutt@apple.com>

        GTK build fix.

        Unreviewed.

        * DumpRenderTree/gtk/AccessibilityControllerGtk.cpp:
        (AccessibilityController::setLogScrollingStartEvents):

2009-09-11  Jon Honeycutt  <jhoneycutt@apple.com>

        DRT/test part of
        <rdar://problem/7197644> WebKit should broadcast an MSAA event when
        jumping to a named anchor

        https://bugs.webkit.org/show_bug.cgi?id=28899

        Reviewed by Adam Roben.

        * DumpRenderTree/AccessibilityController.cpp:
        (logScrollingStartEventsCallback):
        Turn on logging of scrolling start events.
        (AccessibilityController::getJSClass):
        Add a "logScrollingStartEvents" to the AccessibilityController's JS
        class definition.
        (AccessibilityController::resetToConsistentState):
        Turn off logging of scrolling start events.

        * DumpRenderTree/AccessibilityController.h:
        Declare setLogScrollingStartEvents(). Add a member for the scrolling
        start event hook.

        * DumpRenderTree/mac/AccessibilityControllerMac.cpp:
        (AccessibilityController::setLogScrollingStartEvents):
        Stubbed.

        * DumpRenderTree/win/AccessibilityControllerWin.cpp:
        (AccessibilityController::AccessibilityController):
        Initialize the handle to 0.
        (logEventProc):
        Renamed from logFocusEventProc; now logs scrolling start events, too.
        Removed the assertion that the event is a focus event. Added a switch
        to print a message for focus, scrolling start, and other, unknown
        events.
        (AccessibilityController::setLogFocusEvents):
        Changed to use logEventProc.
        (AccessibilityController::setLogScrollingStartEvents):
        If turning logging off, unhook the scrolling start event hook, and clear
        the member holding the handle. If turning on, query for the root
        accessible, so that accessibility is enabled for the WebView, and call
        SetWinEventHook to setup an event hook using logEventProc as the
        callback function.

2009-09-14  Brady Eidson  <beidson@apple.com>

        Windows build fix.

        * DumpRenderTree/LayoutTestController.cpp:
        (setAuthenticationPasswordCallback):
        (setAuthenticationUsernameCallback):
        
        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::didReceiveAuthenticationChallenge):

2009-09-14  Brady Eidson  <beidson@apple.com>

        Reviewed by Alexey Proskuryakov.

        Safari 4 cannot be used to update firmware on Linksys routers.
        <rdar://problem/7174050> and https://bugs.webkit.org/show_bug.cgi?id=29160

        Add the ability for DRT to handle authentication challenges.

        * DumpRenderTree/LayoutTestController.cpp:
        (setAuthenticationPasswordCallback):
        (setAuthenticationUsernameCallback):
        (setHandlesAuthenticationChallengesCallback):
        (LayoutTestController::staticFunctions):

        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::handlesAuthenticationChallenges):
        (LayoutTestController::setHandlesAuthenticationChallenges):
        (LayoutTestController::authenticationUsername):
        (LayoutTestController::setAuthenticationUsername):
        (LayoutTestController::authenticationPassword):
        (LayoutTestController::setAuthenticationPassword):

        * DumpRenderTree/mac/ResourceLoadDelegate.mm:
        (-[ResourceLoadDelegate webView:resource:didReceiveAuthenticationChallenge:fromDataSource:]):

        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::didReceiveAuthenticationChallenge):
        * DumpRenderTree/win/ResourceLoadDelegate.h:

2009-09-12  Mark Rowe  <mrowe@apple.com>

        Reviewed by Dan Bernstein.

        Test for <rdar://problem/6954546> and <rdar://problem/7090444>.

        Add a flag on the test plug-in that asks it to clear the document during the call to NPP_New.
        This is the trigger for both <rdar://problem/6954546> and <rdar://problem/7090444>.

        * DumpRenderTree/TestNetscapePlugIn.subproj/main.cpp:
        (NPP_New):

2009-09-14  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix for non-wxPython builds and a fix for errors when updating swig.py.

        * wx/build/build_utils.py:
        * wx/build/settings.py:

2009-09-14  Csaba Osztrogonac  <oszi@inf.u-szeged.hu>

        Reviewed by Tor Arne Vestbø.

        [Qt] Build fix for windows build.

        * Scripts/bisect-builds: Add missing paranthesis for tmpdir function.

2009-09-13  Kevin Ollivier  <kevino@theolliviers.com>

        Fix typo accidently landed in last commit.

        * wx/build/settings.py:

2009-09-13  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix, error out if using the wrong Python.

        * wx/build/settings.py:

2009-09-13  Xan Lopez  <xlopez@igalia.com>

        Build fix for GTK+ < 2.14.

        Do not use gtk_widget_get_window, access the window directly
        through the struct.

        * DumpRenderTree/gtk/EventSender.cpp:
        (contextClickCallback):
        (mouseDownCallback):
        (mouseUpCallback):
        (mouseMoveToCallback):
        (keyDownCallback):

2009-09-13  Martin Robinson  <martin.james.robinson@gmail.com>

        Reviewed by Xan Lopez and Jan Alonzo.

        [GTK] EventSender does not set 'window' property on synthesized GDK events
        https://bugs.webkit.org/show_bug.cgi?id=29169

        Set the window property on synthesized GDK events in the GTK+ EventSender.

        * DumpRenderTree/gtk/EventSender.cpp:
        (contextClickCallback):
        (mouseDownCallback):
        (mouseUpCallback):
        (mouseMoveToCallback):
        (keyDownCallback):

2009-09-12  Drew Wilson  <atwilson@google.com>

        Reviewed by Mark Rowe.

        run-webkit-tests has a timeout value that is too low
        https://bugs.webkit.org/show_bug.cgi?id=29223

        * Scripts/run-webkit-tests:
        Changed timeout value to 20 seconds to avoid timing out too early.

2009-09-11  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix. Mark dependencies as mandatory and declare which MSVC versions and
        architectures are supported for building wxWebKit.

        * wx/build/settings.py:

2009-09-11  Eric Seidel  <eric@webkit.org>

        Reviewed by David Levin.

        bugzilla-tool rollout threw exception under svn
        https://bugs.webkit.org/show_bug.cgi?id=29211

        * Scripts/modules/scm.py: add missing return, and convert number arguments to strings.
        * Scripts/modules/scm_unittest.py: add testing for this fix.

2009-09-11  Brian Weinstein  <bweinstein@apple.com>

        Add myself to the committers list.

        * Scripts/modules/committers.py:

2009-09-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool land-patches should only fail-fast in --commit-queue mode
        https://bugs.webkit.org/show_bug.cgi?id=29201

        * Scripts/bugzilla-tool:

2009-09-11  Adam Roben  <aroben@apple.com>

        Make commit-log-editor move common prefixes to the top of the log

        Fies <http://webkit.org/b/29190> commit-log-editor should move common
        prefixes to the top of the commit log

        Reviewed by Darin Adler.

        * Scripts/commit-log-editor: Find and remove the longest common prefix
        ending in a double newline from each ChangeLog entry, then put that
        common prefix at the top of the commit log.
        (removeLongestCommonPrefixEndingInDoubleNewline): Added. Finds,
        removes, and returns the longest common prefix ending in a double
        newline from a hash of strings

2009-09-11  Eric Seidel  <eric@webkit.org>

        Fix obvious typo in previous commit, no review.

        bugzilla-tool should automate rollouts
        https://bugs.webkit.org/show_bug.cgi?id=26715

        * Scripts/bugzilla-tool: add back missing "scm" argument.

2009-09-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool should automate rollouts
        https://bugs.webkit.org/show_bug.cgi?id=26715

        bugzilla-tool rollout will do the rollout locally and leave the diff for you to verify and commit.
        The --complete-rollout option will automatically land and update the bug.
        Eventually --complete-rollout will be default, but that will require more testing.

        This first pass is good enough for others to try and file bugs about.

        * Scripts/bugzilla-tool:
         - Move modified_changelogs into scm.py.
         - Move svn_revision_from_commit_text logic into scm.py.
         - Add RolloutCommit command.
        * Scripts/modules/bugzilla.py:
         - Add reopen_bug command used by RolloutCommit.
        * Scripts/modules/scm.py:
         - Add functions to support RolloutCommit.
         - Abstract find_uuid into value_from_svn_info so it can be re-used for _repository_url (needed by svn merge).
         - Add a str() call so that svn_commit_log can take a numeric argument.
         - Remove a bunch of very slow code from last_svn_commit_log and used the built-in 'BASE' alias instead.
         - Made dry_run commits return something that svn_revision_from_commit_text can parse.
        * Scripts/modules/scm_unittest.py:
         - Add read_from_path for easy file reading.
         - Put test4 on a new line to make reverts work w/o conflict.
         - Add an "svn update" call so that the checkout revision matches the server revision.
         - Add tests for svn_revision_from_commit_text.
         - Add a simple test for apply_reverse_diff.
         - Add a new self.scm member and use it in the new tests (eventually other tests can use it too).
         - Add test for svn_commit_log to make sure my 'BASE' change above worked as expected.

2009-09-11  Adam Roben  <aroben@apple.com>

        Get user script/stylesheet tests running on Windows

        Fixes <http://webkit.org/b/29181> User script/stylesheet tests are
        skipped on Windows

        Reviewed by John Sullivan.

        * DumpRenderTree/win/DumpRenderTree.vcproj: Link all configurations
        against comsuppw.lib so we can use _bstr_t.

        * DumpRenderTree/win/LayoutTestControllerWin.cpp: Fixed #include
        order, added #include of comutil.h for _bstr_t.

        (bstrT): Helper function to convert a JSStringRef to a _bstr_t.
        (LayoutTestController::addUserScript):
        (LayoutTestController::addUserStyleSheet):
        Implemented. Implementations were based on those in
        LayoutTestControllerMac.mm.

2009-09-10  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/29147> run-webkit-tests:  make -h show help 

        Reviewed by Mark Rowe.

        * Scripts/run-webkit-tests: Updated to make -h switch show help.

2009-09-10  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by Alexey Proskuryakov.

        Add WebCore/websockets directory in wx build system.
        https://bugs.webkit.org/show_bug.cgi?id=28038

        * wx/build/settings.py:

2009-09-10  Martin Robinson  <martin.james.robinson@gmail.com>

        [GTK] EventSender does not properly convert some keyDown strings
        https://bugs.webkit.org/show_bug.cgi?id=29119

        Add more keyDown string to character code conversions for GTK+ EventSender.

        * DumpRenderTree/gtk/EventSender.cpp:
        (keyDownCallback):

2009-09-09  Steve Block  <steveblock@google.com>

        Reviewed by Maciej Stachowiak.

        Geolocation Coordinates::toString() prints bogus values for unspecified properties.
        https://bugs.webkit.org/show_bug.cgi?id=29080

        * Scripts/make-script-test-wrappers: Modified. Adds asynchronous Geolocation tests to exclusion list.

2009-09-09  Eric Seidel  <eric@webkit.org>

        Reviewed by Eric Carlson.

        reviewer/committer lookups are backwards
        https://bugs.webkit.org/show_bug.cgi?id=29113

        I also moved Eric Carlson from the committer list to the reviewer list now that he is one.

        * Scripts/modules/bugzilla.py:
        * Scripts/modules/committers.py:

2009-09-09  Cameron McCormack  <cam@mcc.id.au>

        Reviewed by Eric Seidel.

        svn-unapply doesn't revert directories correctly
        https://bugs.webkit.org/show_bug.cgi?id=29065

        * Scripts/svn-unapply: Make svnStatus consistently return status
        lines including a newline.
        * Scripts/svn-apply: Keep svnStatus in sync with the one in
        svn-unapply, in lieu of moving it to a common file.

2009-09-09  Cameron McCormack  <cam@mcc.id.au>

        Reviewed by Eric Seidel.

        svn-apply doesn't handle changes to files copied to new directories properly
        https://bugs.webkit.org/show_bug.cgi?id=29059

        * Scripts/svn-apply: Don't treat "--- revision 0" patches as being
        additions if we know that we've just copied a file to this name.

2009-09-09  Eric Seidel  <eric@webkit.org>

        Reviewed by David Levin.

        commit-queue hangs if a builder has never built
        https://bugs.webkit.org/show_bug.cgi?id=29091

        * Scripts/modules/buildbot.py:
        * Scripts/modules/buildbot_unittest.py:

2009-09-09  Zan Dobersek  <zandobersek@gmail.com>

        Reviewed by Gustavo Noronha.

        [GTK] DumpRenderTree needs eventSender object and implementation
        https://bugs.webkit.org/show_bug.cgi?id=25990

        Implements most of the EventSender object's functionality for
        the DumpRenderTree tool. Implementation still lacks support
        for drag and drop tests and forward leaps.

        Based on work by Holger Hans Peter Freyther.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (runTest): Focus on the view before loading a new test.
        (webViewWindowObjectCleared):
        * DumpRenderTree/gtk/EventSender.cpp: Added.
        (getDragModeCallback):
        (setDragModeCallback):
        (leapForwardCallback):
        (contextClickCallback):
        (updateClickCount):
        (mouseDownCallback):
        (mouseUpCallback):
        (mouseMoveToCallback):
        (beginDragWithFilesCallback):
        (replaySavedEvents):
        (keyDownCallback):
        (textZoomInCallback):
        (textZoomOutCallback):
        (zoomPageInCallback):
        (zoomPageOutCallback):
        (getClass):
        (makeEventSender):
        * DumpRenderTree/gtk/EventSender.h: Added.
        * GNUmakefile.am: Add build rules for EventSender.

2009-09-09  Daniel Bates  <dbates@webkit.org>

        Reviewed by Adam Roben.
        
        https://bugs.webkit.org/show_bug.cgi?id=28953

        Added pre- and post- build events so that on build failure, the file 
        buildfailed is written to the directory $(WebKitOutputDir).

        * WinLauncher/WinLauncher.vcproj:

2009-09-09  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Unreviewed.

        Add myself to list of committers.

        * Scripts/modules/committers.py:

2009-09-08  Eric Seidel  <eric@webkit.org>

        Reviewed by David Levin.

        commit-queue gets stuck if a non-committer sets commit-queue+ or review+
        https://bugs.webkit.org/show_bug.cgi?id=28605
        https://bugs.webkit.org/show_bug.cgi?id=28916

        * Scripts/bugzilla-tool:
         - Fix comment and adjust reject_patch_from_commit_queue call to pass "manual commit"
           comment now that it's used for rejecting patches for invalid committers too.
         - Pass reject_invalid_patches=True for commit-queue calls, normally we just ignore patches with invalid reviewers, the commit-queue rejects them.
         - Make the commit queue print patches count instead of bugs count, this also fixes https://bugs.webkit.org/show_bug.cgi?id=28916.
        * Scripts/modules/bugzilla.py:
         - Make _parse_attachment_element not validate reviewer/committer.
         - Share flag parsing code in _parse_attachment_flag.
         - Add _validate* methods for validating reviewers and committers and updating bugs when validation fails.
         - Add reject_invalid_patches argument so the commit-queue can update bugs on failed validation and other "read only" commands will not.
         - Add reject_patch_from_review_queue using a new _set_flag_on_attachment abstraction.
        * Scripts/modules/bugzilla_unittest.py:
         - Update this test to no longer expect committer/reviewer validation.
        * Scripts/modules/committers.py:
         - Return None on failed lookups instead of raising Exceptions.
        * Scripts/modules/committers_unittest.py:
         - Update tests to expect None returns instead of exceptions.

2009-09-09  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/29061> Fix obvious copy-paste error in AccessibilityUIElement::clickPointY()

        Reviewed by Mark Rowe.

        No change to layout test results.

        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::clickPointY): Changed to return y value
        instead of x value.

2009-09-08  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Mark Rowe.

        Reduce dglazkov's boboiness by properly concatenating revision value.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg: Used substitution
            rather than "+".

2009-09-08  Kevin Ollivier  <kevino@theolliviers.com>

        wxWebKit Python extension build fix - get swig.py if it doesn't exist.

        * wx/build/build_utils.py:

2009-09-08  Mark Rowe  <mrowe@apple.com>

        Fix an incorrect variable name in UpdateChromiumSource.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:

2009-09-08  Mark Rowe  <mrowe@apple.com>

        Don't check for leaks on the release SnowLeopard builder.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2009-09-08  Mark Rowe  <mrowe@apple.com>

        Add a SnowLeopard release builder.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2009-09-08  David Levin  <levin@chromium.org>

        Reviewed by Darin Adler.

        Remove end of line whitespace check from check-webkit-style.
        https://bugs.webkit.org/show_bug.cgi?id=29053

        * Scripts/modules/cpp_style.py:

2009-09-08  Cameron McCormack  <cam@mcc.id.au>

        Reviewed by Darin Adler.

        Fix DumpRenderTree build from clean tree on Tiger
        https://bugs.webkit.org/show_bug.cgi?id=28927

        * DumpRenderTree/mac/PerlSupport/Makefile: Ensure the
        DerivedSources/DumpRenderTree directory exists when
        building on Tiger.

2009-09-08  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix after introduction of platform/mock directory.

        * wx/build/settings.py:

2009-09-08  Yael Aharon  <yael.aharon@nokia.com>

        Unreviewed.

        Add myself to list of committers.

        * Scripts/modules/committers.py:

2009-09-08  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Unreviewed.

        Add myself to list of committers.

        * Scripts/modules/committers.py:

2009-09-08  Cameron McCormack  <cam@mcc.id.au>

        Reviewed by Darin Adler.

        prepare-ChangeLog too chatty on file additions
        https://bugs.webkit.org/show_bug.cgi?id=29019

        * Scripts/prepare-ChangeLog: Omit description of added properties
        on newly added files.

2009-09-08  Steve Block  <steveblock@google.com>

        Reviewed by Adam Barth.

        Adds a LayoutTestController method to set the permission state for Geolocation.
        This is required to use the mock Geolocation service for testing.
        https://bugs.webkit.org/show_bug.cgi?id=29027

        * DumpRenderTree/LayoutTestController.cpp: Modified.
        (setDatabaseQuotaCallback): Modified. Style fix.
        (setGeolocationPermissionCallback): Added. Sets the Geolocation permission state.
        (LayoutTestController::staticFunctions): Modified. Registers the above function on the LayoutTestController.
        * DumpRenderTree/LayoutTestController.h: Modified.
        (LayoutTestController::setGeolocationPermission): Added. Sets the Geolocation permission state.
        (LayoutTestController::isGeolocationPermissionSet): Added. Returns whether the Geolocation permission has been set.
        (LayoutTestController::geolocationPermission): Added. Returns the Geolocation permission state.
        * DumpRenderTree/mac/UIDelegate.mm: Modified.
        (-[UIDelegate webView:frame:requestGeolocationPermission:securityOrigin:]): Added. Implement chrome method to respond to request for Geolocation permission state. Response is made using above methods to access permission state.

2009-09-08  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Simon Hausmann.

        [Qt] QtWebKit single API to enable persistency
        https://bugs.webkit.org/show_bug.cgi?id=28682

        Use the new enablePersistentStorage API instead 
        of enabling all persistent features one-by-one.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):
        (WebCore::DumpRenderTree::DumpRenderTree):

2009-09-07  Andras Becsi  <becsi.andras@stud.u-szeged.hu>

        Reviewed by Tor Arne Vestbø.

        Refactor --strict switch to --ignore-metrics and correct the
        implementation to make the feature usable on all platforms.
        https://bugs.webkit.org/show_bug.cgi?id=28907

        run-webkit-tests --ignore-metrics strips the font related metrics from
        the actual and expected data before comparing them.
        In this way the render trees can be checked for obvious differences but
        a successful test implies by no means that the layout is actually correct.

        * Scripts/run-webkit-tests:

2009-09-07  Steve Block  <steveblock@google.com>

        Reviewed by Adam Barth.

        Adds a mock Geolocation service. This will be used to provide predictable behavior of the
        Geolocation API for use in LayoutTests. Later changes will integrate the the mock
        Geolocation service with DumpRenderTree.
        https://bugs.webkit.org/show_bug.cgi?id=28264

        * DumpRenderTree/LayoutTestController.cpp: Modified.
        (setMockGeolocationPositionCallback): Added. Configures the mock Geolocation service.
        (setMockGeolocationErrorCallback): Added. Configures the mock Geolocation service.
        (LayoutTestController::staticFunctions): Added. Registers the above functions on the LayoutTestController.
        * DumpRenderTree/LayoutTestController.h: Modified.
        * DumpRenderTree/mac/LayoutTestControllerMac.mm: Modified.
        (LayoutTestController::setMockGeolocationPosition): Added. Configures the mock Geolocation service.
        (LayoutTestController::setMockGeolocationError): Added. Configures the mock Geolocation service.

2009-09-07  Drew Wilson  <atwilson@google.com>

        Reviewed by David Levin.

        Enable SHARED_WORKERS by default
        https://bugs.webkit.org/show_bug.cgi?id=28959

        * Scripts/build-webkit:

2009-09-07  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fixes for wx SVN trunk.

        * wx/build/settings.py:

2009-09-04  Kevin Ollivier  <kevino@theolliviers.com>

        wx build fix. Switch USE_ defines over to the compiler so that they can be
        checked by files not including config.h (like WebCorePrefix.h).

        * wx/build/settings.py:

2009-09-04  Adam Barth  <abarth@webkit.org>

        Unreviewed build fix.

        Update declaration of FrameLoadDelegate to reflect that
        IWebFrameLoadDelegatePrivate2 inherits from
        IWebFrameLoadDelegatePrivate.

        * DumpRenderTree/win/FrameLoadDelegate.h:

2009-09-04  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        https://bugs.webkit.org/show_bug.cgi?id=24696

        Add testing instrumentation for mixed content.

        * DumpRenderTree/mac/FrameLoadDelegate.mm:
        (-[FrameLoadDelegate webView:]):
        (-[FrameLoadDelegate webView:didRunInsecureContent:]):
        * DumpRenderTree/win/FrameLoadDelegate.cpp:
        (descriptionSuitableForTestResult):
        (FrameLoadDelegate::QueryInterface):
        (FrameLoadDelegate::didDisplayInsecureContent):
        (FrameLoadDelegate::didRunInsecureContent):
        * DumpRenderTree/win/FrameLoadDelegate.h:

2009-09-03  Kevin Watters  <kevinwatters@gmail.com>

        Reviewed by Kevin Ollivier.

        [wx] Frames support
        https://bugs.webkit.org/show_bug.cgi?id=19041

        * wx/build-wxwebkit:

2009-09-02  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28880> svn-apply --force doesn't actually work

        Reviewed by Eric Seidel.

        This fixes "svn-apply --force" and adds unit tests for the
        scm.apply_patch() method which uses this script.

        * Scripts/svn-apply: Created $globalExitCode variable that
        defaults to 0.  Exit with a value of $globalExitCode when the
        script is finished.
        (applyPatch): Ignore a non-zero $exitCode if $force is true, but
        set $globalExitCode to $exitCode so that svn-apply exits with a
        non-zero status if any patches did not apply cleanly.  Also
        print out the actual patch command if $force was not true.

        * Scripts/modules/scm.py:
        (scripts_directory): Added.  Extracted from script_path().
        (script_path): Extracted scripts_directory().
        * Scripts/modules/scm_unittest.py: Import urllib.
        (SVNTestRepository.setup): Save the original working directory
        in test_object since this represents the WebKit repository from
        where the unit tests are run.
        (SCMTest): Created new super class to hold utility methods.
        (SCMTest._create_patch): Creates a patch file on disk and a
        dictionary for use with scm.svn_apply().
        (SCMTest._setup_webkittools_scripts_symlink): Sets up a symlink
        back to WebKitTools/Scripts in the test repository so that
        scm.apply_patch() is able to find the svn-apply script.
        (SVNTest): Inherit from SCMTest instead of unittest.TestCase.
        (SVNTest.tearDown): Make sure to change directories back to the
        original_path before the next test.
        (SVNTest.test_apply_svn_patch): New test case for applying an
        svn patch with scm.apply_patch().
        (SVNTest.test_apply_svn_patch_force): New test case for applying
        an svn patch with scm.apply_patch() that conflicts.
        (GitTest): Inherit from SCMTest instead of unittest.TestCase.
        (GitTest.tearDown): Make sure to change directories back to the
        original_path before the next test.
        (GitTest.test_apply_git_patch): New test case for applying a git
        patch with scm.apply_patch().
        (GitTest.test_apply_git_patch_force): New test case for applying
        a git patch with scm.apply_patch() that conflicts.

2009-09-02  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Mark Rowe.

        [Qt] Add support for platform-spesific layout-test results

        For the Qt port we use the qt-[mac|linux|win] directories and then fall
        back to the generic qt directory for both test results and skipped list.

        * Scripts/run-webkit-tests:
        * Scripts/webkitdirs.pm:

2009-09-02  Laurent Cerveau  <lcerveau@me.com>

        Reviewed by David Kilzer.

        <http://webkit.org/b/25517> build-webkit script should print build time at end

        * Scripts/build-webkit:
        Added startTime and endTime variable so that the build time is computed and printed as
        part of the build message; display formatting has been separated in a dedicated subroutine.

2009-09-02  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28881> svn-create-patch should check if the repo path is the same when trying to find the root

        Reviewed by Eric Seidel.

        * Scripts/VCSUtils.pm:
        (determineSvnRoot): Added back check for repository root that
        was removed in r46134 when this code lived in svn-create-patch.
        It's necessary to check both the repository root and the
        repository UUID in case two different working directories are
        checked out from the same repository.

2009-09-02  Timothy Hatcher  <timothy@apple.com>

        Use new 512x512 icons for nightly builds.

        Rubber-stamped by Mark Rowe.

        * WebKitLauncher/webkit.icns:

2009-09-02  Kevin Ollivier  <kevino@theolliviers.com>

        waf build fix. Remove local variable shadowing global.

        * wx/build/settings.py:

2009-09-02  Zan Dobersek  <zandobersek@gmail.com>

        Reviewed by David Kilzer.

        Calls exitStatus function from the main package where it is also defined.

        * Scripts/VCSUtils.pm:

2009-09-02  Kevin Ollivier  <kevino@theolliviers.com>

        waf build fixes for Windows/MSVC and Mac/Snow Leopard.

        * wx/browser/wscript:
        * wx/build/build_utils.py:
        * wx/build/settings.py:

2009-08-10  Kevin Ollivier  <kevino@theolliviers.com>

        Reviewed by Eric Seidel.

        Changes needed for build-webkit to support the waf build system for the wx port.
        
        https://bugs.webkit.org/show_bug.cgi?id=27619

        * Scripts/build-webkit:
        * Scripts/run-launcher:
        * Scripts/webkitdirs.pm:

2009-09-02  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27168> With Subversion 1.6, update-webkit prompts on conflicts

        Reviewed by Eric Seidel.

        * Scripts/update-webkit: Added "--accept postpone" to
        @svnOptions when running with svn-1.6 or newer.

2009-09-02  David Kilzer  <ddkilzer@apple.com>

        Moved svn 1.6 version check into VCSUtils::isSVNVersion16OrNewer()

        Reviewed by Eric Seidel.

        * Scripts/VCSUtils.pm:
        (@EXPORT): Added &isSVNVersion16OrNewer.
        (svnVersion): Added.  Internal method that gets the SVN version
        and caches it.
        (isSVNVersion16OrNewer): Added.  Method that does the SVN 1.6
        version check.
        * Scripts/prepare-ChangeLog: Switched to use new
        isSVNVersion16OrNewer() method.
        * Scripts/resolve-ChangeLogs: Ditto.
        * Scripts/svn-create-patch: Ditto.

2009-09-02  David Kilzer  <ddkilzer@apple.com>

        Clean up VCSUtils.pm

        Reviewed by Eric Seidel.

        * Scripts/VCSUtils.pm: Added proper package statement.  Fixed
        indentation of BEGIN block.  Listed each exported method on a
        line by itself.  Added methods to the export list after adding
        the package statement.  Sorted module variables.  Moved
        definiton of $gitRoot next to other module variables.

2009-09-01  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Rubber-stamped by Simon Hausmann.

        [Qt] Fix layout-test plugins/plugin-javascript-access.html

        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:

2009-09-02  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Eric Seidel.

        js tests should move into jstests subdirectory instead of resources/
        https://bugs.webkit.org/show_bug.cgi?id=25880

        make-script-wrappers supports both resources and script-tests directories.
        run-webkit-tests ignores files in script-tests.
        Move script tests of animations to check the new script is working.

        * Scripts/make-script-test-wrappers:
        * Scripts/run-webkit-tests:

2009-09-02  Szabo Carol  <carol.szabo@nokia.com>

        Reviewed by David Levin.

        check-webkit-style uses python from /usr/bin instead of the PATH
        https://bugs.webkit.org/show_bug.cgi?id=28225

        * Scripts/bugzilla-tool:
        * Scripts/check-webkit-style:
        * Scripts/run-webkit-unittests:
        * Scripts/update-sources-list.py:
          Changed the first line from
          #!/usr/bin/python
          to
          #!/usr/bin/env python
          which causes python to be invoked from the path location returned
          by "which python" when any of these scripts are launched.
          these are currently all the python scripts in WebKitTools/Scripts.

2009-09-01  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28601> bugzilla-tool post-commits posts commits backwards

        Reviewed by Adam Barth.

        * Scripts/modules/scm.py:
        (Git.commit_ids_from_commitish_arguments): Reverse the list of
        commits returned from git-rev-list since we always want to post
        the oldest patches first to bugs.webkit.org.
        * Scripts/modules/scm_unittest.py:
        (run): Added return statement to return the output now that we
        want it sometimes.
        (SVNTestRepository._setup_test_commits): Added a fourth commit
        so the GitTest.test_commitish_order() test has more commits to
        work with.
        (GitTest.test_commitish_order): Added unit test for change to
        Git.commit_ids_from_commitish_arguments() in scm.py.

2009-09-01  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28877> Implement bugzilla-tool mark-fixed

        Reviewed by David Levin.

        The mark-fixed subcommand is for those times when you don't use
        bugzilla-tool to commit a patch, but you want to use it to close
        the bug with a committed-revision message.

        * Scripts/bugzilla-tool:
        (bug_comment_from_svn_revision): Added.  Extracted from
        bug_comment_from_commit_text().
        (bug_comment_from_commit_text): Extracted
        bug_comment_from_svn_revision() from this method.
        (MarkBugFixed.__init__): Added.
        (MarkBugFixed._fetch_commit_log): Added.  Retrieves the commit
        log from the last commit if no svn revision is specified, else
        the commit log for the specified svn revision.
        (MarkBugFixed._determine_bug_id_and_svn_revision): Added.
        Attempts to determine the bug id and svn revision if one or both
        were not defined on the command line.
        (MarkBugFixed.execute): Added.  Adds a comment about the
        revision that fixed the bug and closes the bug.
        (BugzillaTool.__init__): Added mark-fixed subcommand.
        * Scripts/modules/bugzilla.py:
        (Bugzilla.fetch_title_from_bug): Added.  Returns the title of a
        bug given a bug id.
        * Scripts/modules/scm.py:
        (SCM.strip_r_from_svn_revision): Added.  Utility method to strip
        the leading 'r' from an svn revision.
        (SCM.svn_commit_log): Added.  Subclasses must override.
        (SCM.last_svn_commit_log): Added.  Subclasses must override.
        (SVN.svn_commit_log): Added.  Returns svn log for a given
        revision.
        (SVN.last_svn_commit_log): Added.  Uses svnversion to find the
        last commit in an svn working directory and then runs svn log.
        (Git.svn_commit_log): Added.  Returns svn log for a given
        revision.
        (Git.last_svn_commit_log): Added.  Runs git-svn-log with a limit
        of one log message.

2009-09-01  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28880> svn-apply --force doesn't actually work

        Reviewed by Brady Eidson.

        * Scripts/svn-apply:
        (applyPatch): Add "--force" to $options arrayref if $force is
        set.

2009-09-01  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28725> resolve-ChangeLogs: determineVCSRoot() returns incorrect repository root during git filter-branch

        Reviewed by Adam Roben.

        When git-filter-branch has been invoked to rewrite ChangeLog
        files on series of git commits, it changes directories into
        .git-rewrite/t before re-running resolve-ChangeLogs.  This
        causes determineVCSRoot() in VCSUtils.pm to return
        ".git-rewrite/t", which causes that path to be prepended to all
        ChangeLog paths, which results in an error like this:

            error: pathspec '.git-rewrite/t/ChangeLog' did not match any file(s) known to git.
            Died at WebKitTools/Scripts/resolve-ChangeLogs line 376.

        The correct way to fix this is not to try to find the repository
        root when invoked by git-filter-branch.

        * Scripts/resolve-ChangeLogs: If isInGitFilterBranch() is true,
        set $relativePath to '.' instead of calling
        chdirReturningRelativePath(determineVCSRoot()).
        (isInGitFilterBranch): Added.  Checks for the existence of the
        MAPPED_PREVIOUS_COMMIT environment variable.

2009-09-01  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Gustavo Noronha.

        Add support for Fedora distros in the http tests
        https://bugs.webkit.org/show_bug.cgi?id=28263

        Add detection code for Fedora distribution, and use the proper
        httpd conf file when needed.

        * Scripts/run-webkit-httpd:
        * Scripts/run-webkit-tests:
        * Scripts/webkitdirs.pm:

2009-09-01  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Reviewed by Eric Seidel.

        [Gtk] DRT needs implementation of overridePreference
        https://bugs.webkit.org/show_bug.cgi?id=28830

        Implement overridePreference.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):
        (setDefaultsToConsistentStateValuesForTesting):
        (runTest):
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (toWebSettingKey):
        (LayoutTestController::overridePreference):

2009-09-01  Joseph Pecoraro  <joepeck@webkit.org>

        <http://webkit.org/b/28623> svn-[un]apply should change directories to the repository root before [un]applying

        Reviewed by Eric Seidel.

        Jump back and forth between the repository root directory (to apply) and the
        directory the script was run from (to find the patch).

        * Scripts/svn-apply:
        * Scripts/svn-unapply:

2009-08-31  Adam Roben  <aroben@apple.com>

        Fall back to a Release version of Safari if a Debug one doesn't exist

        <http://webkit.org/b/28849>

        Reviewed by Sam Weinig.

        * Scripts/webkitdirs.pm:
        (safariPath): If the user is working with a Debug build, but there's
        no Debug version of Safari present, fall back to using a Release
        version of Safari.

2009-08-31  Adam Roben  <aroben@apple.com>

        Make safariPath() work for Debug builds of Safari on Windows

        <http://webkit.org/b/28849>

        Reviewed by Sam Weinig.

        * Scripts/webkitdirs.pm:
        (safariPath): If the user is working with a Debug build, add the
        _debug suffix to Safari.exe.

2009-08-28  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue needs a master process
        https://bugs.webkit.org/show_bug.cgi?id=28040

        Add a bugzilla-tool commit-queue command
        Keeps per-bug logs, but doesn't yet upload them anywhere.

        * Scripts/bugzilla-tool: Add LandPatchesFromCommitQueue to handle 'commit-queue'
        * Scripts/modules/buildbot.py: remove noisy log message
        * Scripts/modules/logging.py: add a 'tee()' call for splitting outputs in python

2009-08-28  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Reviewed by Gustavo Noronha.

        [GTK] Geolocation needs permission API before being enabled by default

        Build the Gtk port with geolocation enabled. This option is only
        enabled for the buildbot. The autotools option will be enabled by
        default once the permissions API is implemented.

        * Scripts/build-webkit:

2009-08-26  Cameron McCormack  <cam@mcc.id.au>

        Reviewed by David Kilzer.

        Make prepare-ChangeLog notice property changes
        https://bugs.webkit.org/show_bug.cgi?id=28675

        Make the generated ChangeLog entry include a short description of
        property changes if there were such changes.  Also make
        prepare-ChangeLog not bail if the only changes are property changes.

        * Scripts/prepare-ChangeLog:

2009-08-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Oliver Hunt.

        Don't let local files access web URLs
        https://bugs.webkit.org/show_bug.cgi?id=28480

        A bunch of our LayoutTests rely on our old behavior, so we explicitly
        grant local files universal access during testing.  Mainly, these tests
        involve making XMLHttpRequests for data URLs.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2009-08-26  John Gregg  <johnnyg@google.com>

        Reviewed by David Levin.

        Minor style correction and include fix for notifications
        https://bugs.webkit.org/show_bug.cgi?id=28745

        * DumpRenderTree/win/DRTDesktopNotificationPresenter.cpp:
          change to correct EnumStyle
        (DRTDesktopNotificationPresenter::checkNotificationPermission):

2009-08-26  David Levin  <levin@chromium.org>

        Reviewed by Alexey Proskuryakov.

        XMLHttpRequest.withCredentials=false shouldn't save cookies.
        https://bugs.webkit.org/show_bug.cgi?id=28743

        Added the support to the layout test controller on OSX and
        Windows (for CFNETWORK) to allow for changing the accept cookie
        policy.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController): Added a bool
        to track the state of accepting cookies.
        (setAlwaysAcceptCookiesCallback): Standard wrapper method
        to go from js to a C++ method.
        (LayoutTestController::staticFunctions): Added the
        setAlwaysAcceptCookies method to the js layoutTestController.
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::alwaysAcceptCookies): Returns the value.
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setAlwaysAcceptCookies): Stub out method.
        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues): Reset the accept cookie to
        its default.
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setAlwaysAcceptCookies): Does the work for
        OSX to change the cookie accept policy.
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (setAlwaysAcceptCookies): Method to handle all the calls necessary
        to change the accept cookie policy on Windows.
        (resetDefaultsToConsistentValues): Reset the accept cookie to
        its default.
        * DumpRenderTree/win/DumpRenderTreeWin.h:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setAlwaysAcceptCookies): Stub out method.
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setAlwaysAcceptCookies): Stub out method.

2009-08-26  Dimitri Glazkov  <dglazkov@chromium.org>

        Unreviewed.

        Remove accidentally left in clobber option.
        https://bugs.webkit.org/show_bug.cgi?id=28400

        * BuildSlaveSupport/build.webkit.org-config/master.cfg: Removed clobber option.

2009-08-26  Dimitri Glazkov  <dglazkov@chromium.org>

        Reviewed by Mark Rowe.

        Add canary-style Chromium WebKit build slave to the waterfall.
        https://bugs.webkit.org/show_bug.cgi?id=28400

        * BuildSlaveSupport/build.webkit.org-config/config.json: Added one Chromium/Windows slave
        * BuildSlaveSupport/build.webkit.org-config/master.cfg: Added support for Chromium slave commands.

2009-08-25  Cameron McCormack  <cam@mcc.id.au>

        Reviewed by Darin Adler.

        make-script-test-wrappers should be executable
        https://bugs.webkit.org/show_bug.cgi?id=28669

        Make make-script-test-wrappers and update-sources-list.py both be
        executable.

        * Scripts/update-sources-list.py:
        * Scripts/make-script-test-wrappers:

2009-08-25  Brent Fulgham  <bfulgham@webkit.org>

        Build fix

        Revise Debug_Cairo targets to point inherit from the 
        debug_wincairo.vsprops property sheet so that they link
        against the proper libraries in Debug build.

        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.vcproj:
        * WinLauncher/WinLauncher.vcproj:

2009-08-25  David Levin  <levin@chromium.org>

        Reviewed by Adam Roben.

        PLATFORM(CFNETWORK) should be USE(CFNETWORK).
        https://bugs.webkit.org/show_bug.cgi?id=28713

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (main):

2009-08-25  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Ariya Hidayat.

        [Qt/Mac] Use CONFIG+=build_all only when building libraries

        If no configuration is specified when building WebKit we pass the
        debug_and_release option to QMake which results in Makefiles for
        both configurations being generated.

        Previously we built both of these configurations by default, for
        all targets (both the QtWebKit framework/dyldlib and the various
        executables such as QtLauncher and tests). This makes sense for
        the libraries, which get the _debug suffix and can be loaded on
        demand by setting the DYLD_IMAGE_SUFFIX, but for executables we
        ended up building the same executable twice.

        We now only build one instance of each executable, and since this
        is a developer build we build the debug-version. Passing either
        --debug or --release to build-webkit will override this, and
        even in the default case the release version can still be built
        by running 'make release' in the the build directory of each
        target.

        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:
        * Scripts/webkitdirs.pm:

2009-08-24  Hironori Bono  <hbono@chromium.org>

        Reviewed by Adam Barth.

        Fix Bug 27827 "[Chromium] Functions Keys don't work in google spreadsheet".
        <https://bugs.webkit.org/show_bug.cgi?id=27827>.

        Because of the lack of mappings from GDK key-codes to WebKit key-codes,
        Chromium cannot send valid key-codes to JavaScript when a user types
        function keys. This change just copies the mappings from 'KeyEventGtk.cpp'.

        To write layout tests for this issue, added mappings from function-key
        names to platform-specific key-codes to EventSendingController objects
        so that eventSender.keyDown() can send function-key events without using
        platform-specific key codes. (Unfortunately, this eventSender.keyDown() change
        is only for Mac. So this change adds this new test to Skipped tests for other
        platforms to prevent this change from crashing the build trees.)

        * DumpRenderTree/mac/EventSendingController.mm:
        (-[EventSendingController keyDown:withModifiers:]):

2009-08-23  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Reviewed by Xan Lopez.

        [Gtk] API for disabling local file access to web URLs
        https://bugs.webkit.org/show_bug.cgi?id=28663

        Enable this setting for DRT.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):

2009-08-22  Adam Barth  <abarth@webkit.org>

        Revert 47684.  We're going to do this later once clients have had a
        chance to opt into the setting they like.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2009-08-22  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Don't let local files access web URLs
        https://bugs.webkit.org/show_bug.cgi?id=28480

        A bunch of our LayoutTests rely on our old behavior, so we explicitly
        grant local files universal access during testing.  Mainly, these tests
        involve making XMLHttpRequests for data URLs.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetDefaultsToConsistentValues):
        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues):

2009-08-22  Mark Rowe  <mrowe@apple.com>

        Rubber-stamped by Anders Carlsson.

        Bring signed updates to the Mac nightly builds.

        * WebKitLauncher/Info.plist:
        * WebKitLauncher/WebKitLauncher.xcodeproj/project.pbxproj:
        * WebKitLauncher/WebKitNightlyEnablerSparkle.m:
        (initializeSparkle):
        * WebKitLauncher/nightly.webkit.org.public.pem: Added.

2009-08-21  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Rubberstamped by Simon Fraser.

        Remove GNOME keyring support in build-webkit. This dependency's
        already been removed in the Gtk port.

        * Scripts/build-webkit:

2009-08-20  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Adam Roben.
        Based on original patch by Stephanie Lewis.

        Added support of the Windows malloc history format to parse-malloc history, so we can
        read and parse it.

        * Scripts/parse-malloc-history:

2009-08-20  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        Enable various "grouping" ARIA roles
        https://bugs.webkit.org/show_bug.cgi?id=28486

        Expose the ability to retrieve the subrole through accessibility for DRT.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:

2009-08-20  Joseph Pecoraro  <joepeck@webkit.org>

        Unreviewed.

        Added myself as a committer.

        * Scripts/modules/committers.py:

2009-08-20  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Gustavo Noronha.

        Fix memory leaks.

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::whiteListAccessFromOrigin):
        (LayoutTestController::pauseAnimationAtTimeOnElementWithId):
        (LayoutTestController::pauseTransitionAtTimeOnElementWithId):

2009-08-20  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool post-diff can post partial diffs from SVN checkouts.
        https://bugs.webkit.org/show_bug.cgi?id=28445

        Pass the checkout root as the cwd.  Also wrote a test to ensure this.

        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py:

2009-08-20  Mark Rowe  <mrowe@apple.com>

        Reviewed by Adele Peterson.

        Don't leak the JSStringRef returned by AccessibilityUIElement::attributeValue.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (attributeValueCallback):

2009-08-20  Ariya Hidayat  <ariya.hidayat@nokia.com>

        Unreviewed, build fix.

        [Qt] The template-based qMax() compares two qreals.

        * DumpRenderTree/qt/ImageDiff.cpp:
        (main):

2009-08-20  David Levin  <levin@chromium.org>

        Reviewed by David Kilzer.

        bugzilla-tool patch retrieval should handle 302 redirects.
        https://bugs.webkit.org/show_bug.cgi?id=28485

        * Scripts/modules/scm.py: Pass the --location parameter to curl
        so that 302's are followed.

2009-08-20  Aaron Boodman  <aa@chromium.org>

        One more speculative build for gtk.

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:

2009-08-20  Aaron Boodman  <aa@chromium.org>

        Speculative build for gtk.

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::whiteListAccessFromOrigin):

2009-08-20  Mark Rowe  <mrowe@apple.com>

        Ignore some leaks that are known to originate from ImageIO.

        * Scripts/run-webkit-tests:

2009-08-20  Aaron Boodman  <aa@chromium.org>

        With David Levin.

        Speculative build fix for qt.

        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::whiteListAccessFromOrigin):
        * DumpRenderTree/qt/jsobjects.h:

2009-08-19  Mark Rowe  <mrowe@apple.com>

        Reviewed by Dan Bernstein.

        Fix <http://webkit.org/b/28484> Plug-in-related leaks seen on the build bot

        Update check-for-global-initializers to accommodate the new uses of RefCountedLeakCounter in WebKit.

        * Scripts/check-for-global-initializers:

2009-08-19  Aaron Boodman  <aa@chromium.org>

        Reviewed by David Levin.

        https://bugs.webkit.org/show_bug.cgi?id=24853: Provide a way for WebKit clients to
        specify a more granular policy for cross-origin XHR access.

        * DumpRenderTree/LayoutTestController.cpp: Expose whiteListAccessFromOrigin() to layout tests.
        (whiteListAccessFromOriginCallback): Ditto.
        (LayoutTestController::staticFunctions): Ditto.
        * DumpRenderTree/LayoutTestController.h: Ditto.
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp: Ditto.
        (LayoutTestController::whiteListAccessToOrigin): Ditto.
        * DumpRenderTree/mac/LayoutTestControllerMac.mm: Ditto.
        (LayoutTestController::whiteListAccessFromOrigin): Ditto.
        * DumpRenderTree/qt/jsobjects.cpp: Ditto.
        (LayoutTestController::whiteListAccessFromOrigin): Ditto.
        * DumpRenderTree/win/LayoutTestControllerWin.cpp: Stub out whiteListAccessFromOrigin().
        (LayoutTestController::whiteListAccessFromOrigin): Ditto.
        * DumpRenderTree/gtk/DumpRenderTree.cpp: Reset origin access lists before each test.
        (resetWebViewToConsistentStateBeforeTesting): Ditto.
        * DumpRenderTree/mac/DumpRenderTree.mm: Ditto.
        (resetWebViewToConsistentStateBeforeTesting): Ditto.
        * DumpRenderTree/qt/DumpRenderTree.cpp: Ditto.
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting): Ditto.

2009-08-19  Mark Rowe  <mrowe@apple.com>

        Rubber-stamped by Dan Bernstein.

        Ignore some leaks that are known to originate from QTKit.

        * Scripts/run-webkit-tests:

2009-08-19  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        commit-queue/bugzilla-tool can get wedged if git is mid-rebase
        https://bugs.webkit.org/show_bug.cgi?id=28436

        Make clean_working_directory cancel rebases too (even though that's a bit of a hack).
        This code will only ever be run when --force-clean is passed.

        I also added a new unit test to make sure this code actually works. :)

        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py:

2009-08-19  Eric Seidel  <eric@webkit.org>

        Reviewed by David Levin.

        WebKit needs a changelogs.py to hold changelog-related code
        https://bugs.webkit.org/show_bug.cgi?id=28477

        This is moving code and adding tests.  There was only one functional
        change (which was removing a trailing newline from the last_entry() result).

        * Scripts/bugzilla-tool:
        * Scripts/modules/changelogs.py: Added.
        * Scripts/modules/changelogs_unittest.py: Added.
        * Scripts/run-webkit-unittests:

2009-08-20  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool needs a way to ask build.webkit.org if the bots are passing
        https://bugs.webkit.org/show_bug.cgi?id=28222

        Basic support for now.  This has been in testing for 24 hours now and worked great!

        * Scripts/bugzilla-tool:
        * Scripts/modules/buildbot.py: Added.
        * Scripts/modules/buildbot_unittest.py: Added.
        * Scripts/run-webkit-unittests:

2009-08-19  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Reviewed by Gustavo Noronha.

        [Gtk] Bump waitToDumpWatchdog interval to 15 seconds to match the
        default timeout used by run-webkit-tests. Mac and Win ports were
        recently bumped in http://trac.webkit.org/changeset/r47465.

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setWaitToDump):

2009-08-19  David D. Kilzer  <ddkilzer@webkit.org>

        DumpRenderTreeSupport.pm: provide pre-generated swig source for Tiger

        Reviewed by Mark Rowe.

        Provide pre-generated swig source files for Tiger so it may
        benefit from the faster run-webkit-tests.

        * DumpRenderTree/mac/PerlSupport/DumpRenderTreeSupportTiger.pm:
        Generated by swig.
        * DumpRenderTree/mac/PerlSupport/DumpRenderTreeSupport_wrapTiger.c: Added.
        Generated by swig.
        (swig_type_info::SWIG_TypeNameComp):
        (swig_type_info::SWIG_TypeEquiv):
        (swig_type_info::SWIG_TypeRegisterTL):
        (swig_type_info::SWIG_TypeCheck):
        (swig_type_info::SWIG_TypeCast):
        (swig_type_info::SWIG_TypeDynamicCast):
        (swig_type_info::SWIG_TypeName):
        (swig_type_info::SWIG_TypePrettyName):
        (swig_type_info::SWIG_TypeQueryTL):
        (swig_type_info::SWIG_TypeClientDataTL):
        (swig_type_info::SWIG_PackData):
        (swig_type_info::SWIG_UnpackData):
        (swig_type_info::SWIG_PropagateClientDataTL):
        (swig_type_info::SWIG_PackVoidPtr):
        (swig_type_info::SWIG_UnpackVoidPtr):
        (swig_type_info::SWIG_PackDataName):
        (swig_type_info::SWIG_UnpackDataName):
        * DumpRenderTree/mac/PerlSupport/Makefile: Updated to build on
        Tiger using pre-generated files.

2009-08-18  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Kilzer.

        run-webkit-tests hangs when WebCore tries to log too much
        https://bugs.webkit.org/show_bug.cgi?id=15743

        Read stdout and stderr in parallel.

        * Scripts/run-webkit-tests:

2009-08-18  Mark Rowe  <mrowe@apple.com>

        Rubber-stamped by Oliver Hunt.

        Add a new build configuration that checks for leaks during the layout tests,
        and hook a new machine up to it.

        * BuildSlaveSupport/build.webkit.org-config/config.json:
        * BuildSlaveSupport/build.webkit.org-config/master.cfg:

2009-08-18  Aaron Boodman  <aa@chromium.org>

        Reviewed by Maciej Stachowiak.

        https://bugs.webkit.org/show_bug.cgi?id=28412: Leak of WebCore::XMLHttpRequest object during layout tests.

        No new tests: Already covered by existing tests.

        * Scripts/check-for-global-initializers: Allow global initialization of WTF::RefCountedLeakCounter for XMLHttpRequest.

2009-08-18  Mark Rowe  <mrowe@apple.com>

        Rubber-stamped by Geoff Garen.

        Bump waitToDumpWatchdogInterval to 15 seconds to match the time-out used by run-webkit-tests.

        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:

2009-08-18  Brian Weinstein  <bweinstein@apple.com>

        Rubber-stamped by Adam Roben.

        Changed use of CComBSTR in exceededDatabaseQuota to BSTRs, and free them,
        and removed include to fix building on VC++ Express.

        * DumpRenderTree/win/UIDelegate.cpp:
        (UIDelegate::exceededDatabaseQuota):

2009-08-18  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Oliver Hunt.

        Fix of <https://bugs.webkit.org/show_bug.cgi?id=28326> DRT on Windows doesn't support 
        LayoutTestController::setQuota or print a callback on UIDelegate::exceededDatabaseQuota.
        
        Implemenent setDatabaseQuota and added a new function to the IWebDatabaseManager interface.
        Also added a console output on UIDelegate::exceededDatabaseQuota to match the mac.

        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setDatabaseQuota):
        * DumpRenderTree/win/UIDelegate.cpp:
        (UIDelegate::exceededDatabaseQuota):

2009-08-18  Peter Kasting  <pkasting@google.com>

        Reviewed by Eric Seidel.

        https://bugs.webkit.org/show_bug.cgi?id=28415
        Set svn:eol-style CRLF on all .sln and .vcproj files that don't already
        have it.

        * record-memory-win/record-memory-win.vcproj:
        * WinLauncher/WinLauncher.vcproj:
        * WebKitLauncherWin/WebKitLauncherWin.vcproj:
        * DumpRenderTree/win/ImageDiff.vcproj:
        * FindSafari/FindSafari.vcproj:

2009-08-18  Drew Wilson  <atwilson@google.com>

        Reviewed by Eric Seidel.

        Need to extend DumpRenderTree to expose number of worker threads
        https://bugs.webkit.org/show_bug.cgi?id=28292

        Added layoutTestController.workerThreadCount, and implementations on various platforms that call into WebKit.

        * DumpRenderTree/LayoutTestController.cpp:
        (getWorkerThreadCountCallback):
        (LayoutTestController::staticValues):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::workerThreadCount):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::workerThreadCount):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::workerThreadCount):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::workerThreadCount):

2009-08-18  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Jan Alonzo.

        Initialize x and y in the GtkAllocation structure to shut up
        valgrind.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (runTest):

2009-08-17  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Darin Adler.

        Some HTMLs are modified by make-script-test-wrappers
        https://bugs.webkit.org/show_bug.cgi?id=28213

        Add fast/js/const.js and fast/canvas/canvas-2d-imageData-create-nonfinite.js into
        the exclude list, modified fast/dom/Geolocation/resources/TEMPLATE.html, and
        re-generated wml/* and Geolocation/* .

        * Scripts/make-script-test-wrappers:

2009-08-17  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Eric Seidel.

        -webkit-box-orient:horizontal doesn't work on <button> tag
        https://bugs.webkit.org/show_bug.cgi?id=34445

        Make a flexible button's anonymous child flexible and pass the
        parent's box-orient to the anonymous child.

        Also, added a renderName for anonymous flexible boxes.

        * Scripts/make-script-test-wrappers:

2009-08-17  Eric Seidel  <eric@webkit.org>

        Reviewed by Darin Adler.

        Can no longer --reset-results of a layout test directory
        https://bugs.webkit.org/show_bug.cgi?id=28336

        --reset-results and --exit-after-n-failures are incompatible.

        * Scripts/run-webkit-tests:

2009-08-17  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/26920> bugzilla-tool dumps too much junk the the commit comment from git

        Reviewed by Adam Roben.

        New commit message:
            Committed r12345: <http://trac.webkit.org/changeset/12345>

        * Scripts/bugzilla-tool:
        (bug_comment_from_commit_text): Print out a compact,
        standardized commit message for both git and svn.

2009-08-17  Peter Kasting  <pkasting@google.com>

        Reviewed by Steve Falkenburg.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Only add Cygwin to the path when it isn't already there.  This avoids
        causing problems for people who purposefully have non-Cygwin versions of
        executables like svn in front of the Cygwin ones in their paths.

        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/ImageDiff.vcproj:
        * DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.vcproj:

2009-08-17  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28393> check-webkit-style: add check for use of std::max()/std::min() instead of MAX()/MIN()

        Reviewed by David Levin.

        * Scripts/modules/cpp_style.py:
        (_ERROR_CATEGORIES): Added 'runtime/max_min_macros'.
        (check_max_min_macros): Added.  Returns level 4 error when MAX()
        and MIN() macros are used in header files and C++ source files.
        (check_style): Added call to check_max_min_macros().
        * Scripts/modules/cpp_style_unittest.py: Added unit tests.
        (test_max_macro): Added.
        (test_min_macro): Added.

2009-08-13  Mike Fenton  <mike.fenton@torchmobile.com>

        Reviewed by Eric Seidel.

        Move adjustLineToPixelBoundaries overlapping function to GraphicsContext.cpp
        and remove from GraphicsContextCairo.cpp and GraphicsContextQt.cpp.

        https://bugs.webkit.org/show_bug.cgi?id=28268

        * platform/graphics/GraphicsContext.cpp:
        (WebCore::GraphicsContext::adjustLineToPixelBoundaries):
        * platform/graphics/GraphicsContext.h:
        * platform/graphics/cairo/GraphicsContextCairo.cpp:
        * platform/graphics/qt/GraphicsContextQt.cpp:

2009-08-10  Mike Fenton  <mike.fenton@torchmobile.com>

        Reviewed by Adam Treat.

        Style fixes for DumpRenderTree/qt/jsobjects.cpp based on cpp_style.py and
        WebKit style guide.

        https://bugs.webkit.org/show_bug.cgi?id=28161

        * DumpRenderTree/qt/jsobjects.cpp:
        (findFrameNamed):
        (LoadItem::invoke):
        (LayoutTestController::provisionalLoad):
        (LayoutTestController::timerEvent):
        (LayoutTestController::pauseAnimationAtTimeOnElementWithId):
        (LayoutTestController::pauseTransitionAtTimeOnElementWithId):
        (LayoutTestController::numberOfActiveAnimations):
        (EventSender::keyDown):
        (EventSender::frameUnderMouse):
        (TextInputController::doCommand):

2009-08-16  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28370> check-webkit-style: add check for 'using std::foo;' statements

        Reviewed by David Levin.

        In <http://webkit.org/b/28355#c1>, it was noted that new source
        files use 'using namespace std;' instead of individual
        'using std::foo;' statements.  This adds a level 4 check for
        such statements.

        * Scripts/modules/cpp_style.py:
        (_ERROR_CATEGORIES): Added 'build/using_std'.
        (check_using_std): Added.
        (check_style): Added call to check_using_std().
        * Scripts/modules/cpp_style_unittest.py:
        (WebKitStyleTest.test_using_std): Added unit test.

2009-08-16  David Kilzer  <ddkilzer@apple.com>

        Backed out r47343 which was mistakenly committed

        * Scripts/bugzilla-tool:
        * Scripts/modules/scm.py:

2009-08-16  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28367> bugzilla.py: replace ScriptError class with BugzillaError class

        Reviewed by David Levin.

        The ScriptError class doesn't exist in bugzilla.py, so any
        errors print error messages about ScriptError instead of the
        actual error:

            NameError: global name 'ScriptError' is not defined

        * Scripts/modules/bugzilla.py:
        (BugzillaError): Added class.  Modeled after ScriptError class
        in scm.py.
        (Bugzilla.authenticate): Changed to use BugzillaError instead of
        ScriptError.
        (Bugzilla._check_create_bug_response): Ditto.

2009-08-14  Adam Bergkvist  <adam.bergkvist@ericsson.com>

        Reviewed by Sam Weinig.

        Added EventSource to the build script (default on).
        https://bugs.webkit.org/show_bug.cgi?id=14997 

        * Scripts/build-webkit:

2009-08-15  Ryosuke Niwa  <rniwa@webkit.org>

        Unreviewed.

        Add myself to list of committers.

        * Scripts/modules/committers.py:

2009-08-15  Jon Honeycutt  <jhoneycutt@apple.com>

        Fix layout test failures after r47312.

        Reviewed by Cameron Zwarich.

        * DumpRenderTree/AccessibilityController.h:
        Replaced logFocusEvents() with setLogFocusEvents(), which takes a
        boolean argument to turn logging of focus events on or off.
        Added a function to reset the AccessibilityController to a consistent
        state.

        * DumpRenderTree/AccessibilityController.cpp:
        (logFocusEventsCallback):
        Call setLogFocusEvents() to enable logging.
        (AccessibilityController::resetToConsistentState):
        Call setLogFocusEvents() to disable logging.

        * DumpRenderTree/gtk/AccessibilityControllerGtk.cpp:
        (AccessibilityController::setLogFocusEvents):
        Update stub.

        * DumpRenderTree/mac/AccessibilityControllerMac.mm:
        (AccessibilityController::setLogFocusEvents):
        Update stub.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetWebViewToConsistentStateBeforeTesting):
        Call the FrameLoadDelegate's resetToConsistentState method.

        * DumpRenderTree/mac/FrameLoadDelegate.h:
        Declare the resetToConsistentState method.

        * DumpRenderTree/mac/FrameLoadDelegate.mm:
        (-[FrameLoadDelegate resetToConsistentState]):
        Call the AccessibilityController's resetToConsistentState() function.

        * DumpRenderTree/win/AccessibilityControllerWin.cpp:
        (AccessibilityController::~AccessibilityController):
        Turn off focus event logging when the controller is destroyed.
        (AccessibilityController::setLogFocusEvents):
        If the caller passes false, unhook the focus event, and clear
        m_focusEventHook.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):
        Call the FrameLoadDelegate's resetToConsistentState function.

        * DumpRenderTree/win/FrameLoadDelegate.h:
        Declare the resetToConsistentState() function.

        * DumpRenderTree/win/FrameLoadDelegate.cpp:
        (FrameLoadDelegate::resetToConsistentState):
        Call the AccessibilityController's resetToConsistentState() function.


2009-08-14  Jon Honeycutt  <jhoneycutt@apple.com>

        Add a mechanism for logging MSAA focus events.

        Part of <rdar://problem/6218721> No MSAA focus events fired for Webkit
        nightly (20866)

        https://bugs.webkit.org/show_bug.cgi?id=20866

        Reviewed by Oliver Hunt.

        * DumpRenderTree/AccessibilityController.cpp:
        (logFocusEventsCallback):
        Call the AccessibilityController's logFocusEvents() function.
        (AccessibilityController::getJSClass):
        Add a "logFocusEvents" function to the AccessibilityController's JS
        class definition.

        * DumpRenderTree/AccessibilityController.h:
        On Windows, include windows.h, and add a member variable to hold the
        handle to the event hook for focus events. Add a declaration for a
        function that enables logging of focus events.

        * DumpRenderTree/gtk/AccessibilityControllerGtk.cpp:
        (AccessibilityController::logFocusEvents):
        Stubbed.

        * DumpRenderTree/mac/AccessibilityControllerMac.mm:
        (AccessibilityController::logFocusEvents):
        Stubbed.

        * DumpRenderTree/win/AccessibilityControllerWin.cpp:
        (AccessibilityController::AccessibilityController):
        (AccessibilityController::~AccessibilityController):
        If we hooked the focus event, unhook it.
        (logFocusEventProc):
        When we receive a focus event, get the accessible object for the event,
        and log its name to stdout.
        (AccessibilityController::logFocusEvents):
        Setup the focus event hook to listen for events in the current process.

2009-08-14  Eric Seidel  <eric@webkit.org>

        No review.  Fix 5-space indent to be 4-spaces.

        * Scripts/bugzilla-tool:

2009-08-14  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Simon Hausmann.

        [Qt] Public API to configure the storage path for HTML5 localStorage
        https://bugs.webkit.org/show_bug.cgi?id=28036

        Turn on LocalStorage support for Qt DumpRenderTree since
        LocalStorage is now disabled by defult for QtWebkit.

        * DumpRenderTree/qt/DumpRenderTree.cpp: 
        (WebCore::WebPage::WebPage):

2009-08-14  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Jan Alonzo.

        Do not unref the main webview, it's owned by its parent
        container. Instead destroy the container, which should take care
        of everything (not terribly important since we exit right after
        that, but still).

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (main):

2009-08-13  Eric Seidel  <eric@webkit.org>

        No review, correcting obvious python error seen in the commit queue.

        args can be a string or an array.  Assuming args is always an array results in
        double-spaced text in error logs.

        * Scripts/bugzilla-tool:

2009-08-13  Gustavo Noronha Silva  <gustavo.noronha@collabora.co.uk>

        Unreviewed build fix. Include stdio.h for using stdout, stderr,
        and fprintf.

        * DumpRenderTree/LayoutTestController.cpp:

2009-08-13  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Eric Seidel.

        rename make-js-test-wrappers to make-script-test-wrappers
        https://bugs.webkit.org/show_bug.cgi?id=28212

        * Scripts/make-script-test-wrappers: Renamed from WebKitTools/Scripts/make-js-test-wrappers.

2009-08-13  Drew Wilson <atwilson@chromium.org>

        Unreviewed.

        Add myself to list of committers.

        * Scripts/modules/committers.py:

2009-08-13  John Sullivan  <sullivan@apple.com>

        Unreviewed.

        Add myself to list of committers.

        * Scripts/modules/committers.py:

2009-08-13  Eric Seidel  <eric@webkit.org>

        Correct spelling error in file name.  No review.

        * Scripts/modules/committers_unittest.py: Renamed from WebKitTools/Scripts/modules/commiters_unittest.py.
        * Scripts/run-webkit-unittests:

2009-08-13  Eric Seidel  <eric@webkit.org>

        Reviewed by Simon Fraser.

        REGRESSION(r47175): error running run-webkit-tests
        https://bugs.webkit.org/show_bug.cgi?id=28261

        Fix "Use of uninitialized value in concatenation (.) or string at
        WebKitTools/Scripts/run-webkit-tests line 191." by setting
        $testsPerDumpTool to 1000 by default.

        * Scripts/run-webkit-tests:

2009-08-13  Nate Chapin  <japhet@chromium.org>

        Unreviewed.

        Add myself to list of committers.

        * Scripts/modules/committers.py:

2009-08-13  Brent Fulgham  <bfulgham@webkit.org>

        Unreviewed.

        Add 'Brent Fulgham' to the committers list.

        * Scripts/modules/committers.py:

2009-08-13  Adam Langley  <agl@chromium.org>

        Review not required.

        * Scripts/modules/committers.py:
          Adding myself to this list because Eric told me to.

2009-08-13  Greg Bolsinga  <bolsinga@apple.com>

        Unreviewed.

        Add 'Greg Bolsinga' to the committers list.

        * Scripts/modules/committers.py:

2009-08-13  Adam Roben  <aroben@apple.com>

        Fix off-by-one result comparisons in media tests on Windows Debug
        builds

        media/video-played.html seems always to time out in Windows Debug
        builds. A race condition between media/video-test.js's "hang" timer and
        DumpRenderTree's built-in "watchdog" timer was causing results for
        media/video-played.html to be printed twice, causing all future media
        tests to be compared to the previous test's results.

        The fix is to make the watchdog timer got through the same code path
        as calling notifyDone manually, so that the results will only get
        printed once. A subsequent patch will remove video-test.js's hang
        timer entirely, since it is redundant.

        Fixes <http://webkit.org/b/28265>.

        Reviewed by Mark Rowe.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::waitToDumpWatchdogTimerFired): Added. Code came
        from Gtk/Mac/Win's watchdog timer handlers, but we now call
        notifyDone() instead of dump() so that a subsequent call to
        notifyDone() won't print the results out again.

        * DumpRenderTree/LayoutTestController.h: Added
        waitToDumpWatchdogTimerFired.

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (waitToDumpWatchdogFired):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (waitUntilDoneWatchdogFired):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (waitUntilDoneWatchdogFired):
        Changed to call waitToDumpWatchdogTimerFired.

2009-08-13  Eric Carlson  <eric.carlson@apple.com>

        Unreviewed.

        Added 'Eric Carlson' to the committers list.

        * Scripts/modules/committers.py:

2009-08-13  Dirk Schulze  <krit@webkit.org>

        Unreviewed.
        Added 'Dirk Schulze' to the committers list.

        * Scripts/modules/committers.py:

2009-08-13  Adam Roben  <aroben@apple.com>

        Enable running testapi in run-javascriptcore-tests on Windows

        Fixes <http://webkit.org/b/24856> run-javascriptcore-tests should run
        testapi on Windows

        Reviewed by Mark Rowe.

        * Scripts/run-javascriptcore-tests: Allow testapi to run if we're in
        the AppleWinWebKit configuration.

2009-08-13  Adam Roben  <aroben@apple.com>

        Re-enable testapi in run-javascriptcore-tests on Mac

        This seems to have been mistakenly disabled in r47089.

        Rubber-stamped by Mark Rowe.

        * Scripts/run-javascriptcore-tests: Removed comment markers that were
        preventing running testapi.

2009-08-12  George Staikos  <george.staikos@torchmobile.com>

        Reviewed by Adam Treat.

        Enable WCSS and XHTML-MP flags for build-webkit.

        * Scripts/build-webkit:

2009-08-12  David Kilzer  <ddkilzer@apple.com>

        run-webkit-tests: document --nthly flag in help message

        Reviewed by Simon Fraser.

        * Scripts/run-webkit-tests: Added --nthly flag to $usage string.
        Also noted that -1|--singly implies --nthly 1.

2009-08-12  Eric Seidel  <eric@webkit.org>

        No review, just fixing mismerged ChangeLogs.

2009-08-12  Eric Seidel  <eric@webkit.org>

        Reviewed by Mark Rowe.

        run-webkit-tests needs a --exit-after-failures=N option
        https://bugs.webkit.org/show_bug.cgi?id=28192

        Added the option and deployed it to bugzilla-tool.

        * Scripts/bugzilla-tool:
        * Scripts/run-webkit-tests:

2009-08-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Mark Rowe.

        bugzilla-tool : various improvements for running the commit-queue
        https://bugs.webkit.org/show_bug.cgi?id=28199

        Make run_and_throw_if_fail silence STDERR as well as STDIN.
        I also changed run_and_throw_if_fail to use the /dev/null trick instead of .communicate() to avoid ever buffering the output (per abarth's suggestion).
        Change a few "print" statements to "log" so they appear in the output.
        Changed all string + uses to use string formatting instead (this is less error prone as it will automatically convert non-string objects).
        Added a little more logging so that --quiet mode is easier to understand.
        Changed clear_attachment_review_flag to clear_attachment_flags and made it clear the commit-queue flag as well.
        Added the ability for bugzilla-tool to reject patches from the commit-queue when they fail to compile/apply/etc.
        Added _find_select_element_for_flag to make the code for finding flag <select> elements clearer.
        Made curl call (downloading patch files) quieter.

        * Scripts/bugzilla-tool:
        * Scripts/modules/bugzilla.py:
        * Scripts/modules/scm.py:

2009-08-12  Peter Kasting  <pkasting@google.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Change pattern that strips all trailing whitespace to just remove EOL
        chars (\r, \n), to make it clear that varying EOL chars is the primary
        problem being solved.

        * Scripts/prepare-ChangeLog:
        * Scripts/resolve-ChangeLogs:
        * Scripts/svn-create-patch:
        * Scripts/update-webkit:

2009-08-12  Kevin Ollivier  <kevino@theolliviers.com>

        wx waf build fix, add new directories to the build.

        * wx/build/settings.py:

2009-08-11  Adam Roben  <aroben@apple.com>

        Update DumpRenderTree for IWebUIDelegatePrivate changes

        Reviewed by Dave Hyatt.

        * DumpRenderTree/win/UIDelegate.h: Updated to match
        IWebUIDelegatePrivate.

2009-08-12  Adam Roben  <aroben@apple.com>

        Don't try to seek to the end of stdin on Cygwin

        Doing so seems to always cause an exception (for unknown reasons).

        Fixes <http://webkit.org/b/28159> create-bug throws an exception in
        Cygwin

        Reviewed by Dave Kilzer.

        * Scripts/bugzilla-tool:
        (CreateBug.prompt_for_bug_title_and_comments): Ignore IOErrors
        generated by calling sys.stdin.seek, since these seem to be generated
        for no good reason on Cygwin.

2009-08-12  Adam Roben  <aroben@apple.com>

        Don't raise an exception when --cc is not passed to create-bug

        Fixes <http://webkit.org/b/28158> create-bug throws an exception if
        --cc is not specified

        Reviewed by Dave Kilzer.

        * Scripts/modules/bugzilla.py:
        (Bugzilla.create_bug_with_patch): Only set the "cc" field if a CC
        string was specified. Otherwise we'll generate an exception about the
        "cc" variable not being a string.

2009-08-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool : various improvements for running the commit-queue
        https://bugs.webkit.org/show_bug.cgi?id=28199

        Make run_and_throw_if_fail silence STDERR as well as STDIN.
        I also changed run_and_throw_if_fail to use the /dev/null trick instead of .communicate() to avoid ever buffering the out
        Change a few "print" statements to "log" so they appear in the output.
        Changed all string + uses to use string formatting instead (this is less error prone as it will automatically convert non
        Added a little more logging so that --quiet mode is easier to understand.
        Changed clear_attachment_review_flag to clear_attachment_flags and made it clear the commit-queue flag as well.
        Added the ability for bugzilla-tool to reject patches from the commit-queue when they fail to compile/apply/etc.
        Added _find_select_element_for_flag to make the code for finding flag <select> elements clearer.
        Made curl call (downloading patch files) quieter.

        * Scripts/bugzilla-tool:
        * Scripts/modules/bugzilla.py:
        * Scripts/modules/scm.py:

2009-08-11  Eric Seidel  <eric@webkit.org>

        No review, script regression fix only.

        run-webkit-tests --quiet hangs
        https://bugs.webkit.org/show_bug.cgi?id=28202

        Do a huge dance to get open3 to pipe to /dev/null w/o blocking.
        This was what I came up with after discussions in #perl.

        * Scripts/run-webkit-tests:

2009-08-11  John Gregg  <johnnyg@google.com>

        Reviewed by Maciej Stachowiak.

        Switch DumpRenderTree to contain a WebUIDelegate2, which extends
        WebUIDelegate, so that the notifications tests will still work.
        https://bugs.webkit.org/show_bug.cgi?id=28198

        * DumpRenderTree/win/UIDelegate.h:

2009-08-11  Darin Adler  <darin@apple.com>

        Try to fix GTK build.

        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp:
        (AccessibilityUIElement::stringForRange): Added.

2009-08-10  Mike Fenton  <mike.fenton@torchmobile.com>

        Reviewed by Adam Treat.

        Add processing for string constants used by the tests to trigger
        common actions like up, down, left, right, etc. for the Qt
        implementation of DumpRenderTree.

        Note this allows fast/forms/textarea-arrow-navigation.html to pass
        correctly.

        https://bugs.webkit.org/show_bug.cgi?id=28161

        * DumpRenderTree/qt/jsobjects.cpp:
        (EventSender::keyDown):

2009-08-11  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        Bug 28200 - ListMarker should be included as part of the text value to parse
        https://bugs.webkit.org/show_bug.cgi?id=28200

        Add the ability to retrieve a string given a plain NSRange.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (stringForRangeCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::valueDescription):
        (AccessibilityUIElement::stringForRange):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::stringForRange):

2009-08-11  Dmitry Titov  <dimich@chromium.org>

        Reviewed by NOBODY (Speculative fix for the layout test failure).

        Fix fast/dom/prototype-inheritance.html
        and fast/dom/prototype-inheritance-2.html
        broken on Windows by http://trac.webkit.org/changeset/47018

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues): enable app cache in Windows DRT.

2009-08-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool: Re-factor shared landing logic into helper class to share more code
        https://bugs.webkit.org/show_bug.cgi?id=28193

        Added new WebKitLandingScripts class to hold this shared logic.
        Also added a view_source_url function to move more webkit-specific urls out of bugzilla-tool core.

        * Scripts/bugzilla-tool:

2009-08-11  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Adam Treat.

        Fix the current failures on the buildbot.

        As Qt hooks up the maybeDump to loadFinished, we need to make
        sure that calling dump() will not call maybeDump on loadFinished.

        As dump is called my emitting done() which calls dump() and then
        setting m_isLoading to false. So in the case m_isLoading is false,
        do not dump again.

        The current code is confusing, and should be made more clear
        in another commit.

        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::maybeDump):
        (LayoutTestController::notifyDone):

2009-08-11  John Gregg  <johnnyg@google.com>

        Reviewed by Maciej Stachowiak.

        Add support for desktop notifications API to DumpRenderTree,
        and support for ENABLE_NOTIFICATIONS flag to build-webkit.

        * DumpRenderTree/LayoutTestController.cpp:
        (grantDesktopNotificationPermissionCallback):
        (LayoutTestController::staticFunctions):
        (LayoutTestController::grantDesktopNotificationPermission):
        (LayoutTestController::checkDesktopNotificationPermission):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/win/DRTDesktopNotificationPresenter.cpp: Added.
        (DRTDesktopNotificationPresenter::DRTDesktopNotificationPresenter):
        (DRTDesktopNotificationPresenter::QueryInterface):
        (DRTDesktopNotificationPresenter::AddRef):
        (DRTDesktopNotificationPresenter::Release):
        (DRTDesktopNotificationPresenter::showDesktopNotification):
        (DRTDesktopNotificationPresenter::cancelDesktopNotification):
        (DRTDesktopNotificationPresenter::notificationDestroyed):
        (DRTDesktopNotificationPresenter::checkNotificationPermission):
        (DRTDesktopNotificationPresenter::requestNotificationPermission):
        * DumpRenderTree/win/DRTDesktopNotificationPresenter.h: Added.
        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/UIDelegate.cpp:
        (UIDelegate::UIDelegate):
        (UIDelegate::desktopNotificationsDelegate):
        * DumpRenderTree/win/UIDelegate.h:
        * Scripts/build-webkit:

2009-08-11  Peter Kasting  <pkasting@google.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Handle arbitrary line endings when manufacturing patches for additions
        with history.

        * Scripts/svn-create-patch:

2009-08-11  Peter Kasting  <pkasting@google.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=28183
        Support VS2008 as well as VS2005 in a few scripts.

        * Scripts/pdevenv: Check both $VS80COMNTOOLS and $VS90COMNTOOLS.
        * Scripts/webkitdirs.pm: Use $VSINSTALLDIR if available instead of hardcoding the VS2005 dir.

2009-08-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        run-webkit-tests --quiet should not output build-dumprendertree output
        https://bugs.webkit.org/show_bug.cgi?id=28189

        * Scripts/run-webkit-tests:

2009-08-11  Eric Seidel  <eric@webkit.org>

        Reviewed by Darin Adler.

        Exception in land-patches
        https://bugs.webkit.org/show_bug.cgi?id=27962

        Use ("%s" % object) instead of ("" + object).
        Added unit tests for logging.py.

        * Scripts/modules/logging.py:
        * Scripts/modules/logging_unittest.py: Added.
        * Scripts/run-webkit-unittests:

2009-08-11  Dmitry Titov  <dimich@chromium.org>

        Reviewed by NOBODY (Windows layout tests fix).

        Fix for layout tests failures. Need to initialize some preferences early
        because WebView on Windows uses them during create time.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (main):

2009-08-11  Dmitry Titov  <dimich@chromium.org>

        Reviewed by Adam Roben.

        Originally implemented by Glenn Wilson  <gwilson@chromium.org>.

        Added support for overriding default preferences per-test.
        See https://bugs.webkit.org/show_bug.cgi?id=20534

        * DumpRenderTree/LayoutTestController.cpp:
        (overridePreferenceCallback): add wiring for layoutTestController.overridePreference.
        (LayoutTestController::staticFunctions): same.
        * DumpRenderTree/LayoutTestController.h: same.
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::overridePreference): added empty overridePreference method.
        * DumpRenderTree/mac/DumpRenderTree.mm: implemented preference override.
        (resetDefaultsToConsistentValues): new method, resets preferences to same set of value before every test.
        (setDefaultsToConsistentValuesForTesting): new method, sets other details of testing environment, every time  DRT starts.
        (resetWebViewToConsistentStateBeforeTesting): move some preference setting from here to new resetDefaultsToConsistentValues().
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::overridePreference):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetDefaultsToConsistentValues): new method, resets preferences to same set of value before every test.
        (resetWebViewToConsistentStateBeforeTesting): move some preference setting from here to new resetDefaultsToConsistentValues().
        (createWebViewAndOffscreenWindow): same.
        (main): same.
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::overridePreference):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::overridePreference):

2009-08-11  Brian Weinstein  <bweinstein@apple.com>

        Reviewed by Sam Weinig.

        Added support for DRT to support arguments for eventSender.mouseDown and eventSender.mouseUp for Windows.
        https://bugs.webkit.org/show_bug.cgi?id=28166.
        
        This is a step towards fixing fast/events/mouse-click-events.html on Windows.

        * DumpRenderTree/win/EventSender.cpp:
        (mouseDownCallback):
        (mouseUpCallback):
        (replaySavedEvents):

2009-08-11  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Simon Hausmann.

        Build the TestNetscapePlugin on Qt/Mac

        * DumpRenderTree/qt/TestNetscapePlugin/TestNetscapePlugin.pro:

2009-08-11  Dmitry Titov  <dimich@chromium.org>

        Reviewed by NOBODY (build fix).

        Attempt to fix the Windows test bot. Reverted r47015 caused one of the Windows
        bots that runs Layout Tests to save "JS disabled" and "default font 24pt"
        preferences permanently. Since these preferences are not initialized explicitly in DRT,
        almost all Layout tests are failing. Attempt to fix by explicit
        initialization of these into defaults (enabled, 16pt) at the beginning of the DRT.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (main):  see above.

2009-08-10  Steve Falkenburg  <sfalken@apple.com>

        Windows nightly fix.

        Reviewed by Ada Chan.

        * FindSafari/FindSafari.cpp:
        (_tmain): Copy Safari.dll if it exists.

2009-08-10  David Levin  <levin@chromium.org>

        Reviewed by David Kilzer.

        check-webkit-style doesn't catch braces around single line statements when followed by else.
        https://bugs.webkit.org/show_bug.cgi?id=28164

        * Scripts/modules/cpp_style.py: Added else to the regex that finds ending }'s when
          checking the no braces for "single lines" rule.
        * Scripts/modules/cpp_style_unittest.py: Added test case.

2009-08-10  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/28163> bugzilla-tool: scm module should not import bugzilla module

        Reviewed by David Levin.

        * Scripts/bugzilla-tool:
        (parse_bug_id): Added.  Moved from CommitMessage.parse_bug_id()
        in scm module.
        * Scripts/modules/scm.py: Removed import of bugzilla module.
        (CommitMessage.parse_bug_id): Deleted.

2009-08-10  Peter Kasting  <pkasting@google.com>

        Reviewed by David Kilzer.

        https://bugs.webkit.org/show_bug.cgi?id=18599
        Work around apparent bug in abs2rel() with symlinked directories.

        * Scripts/resolve-ChangeLogs:

2009-08-10  Dan Bernstein  <mitz@apple.com>

        Build fix

        * DumpRenderTree/TestNetscapePlugIn.subproj/main.cpp:
        (NPP_New):

2009-08-10  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Simon Hausmann.

        Fix a bunch of build warnings in TestNetscapePlugin
        
        * DumpRenderTree/TestNetscapePlugIn.subproj/TestObject.cpp:
        * DumpRenderTree/gtk/TestNetscapePlugin/TestNetscapePlugin.cpp:

2009-08-10  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Adam Roben.
        
        Allow TestNetscapePlugIn to fall back to the Carbon event model
        
        Previously the plugin would fail, even though the Carbon event
        model was available. The only way to get the Carbon event model
        was to pass the "forcecarbon" argument in the test markup, but no
        tests were using this.
        
        Now the plugin uses carbon either if it's forced, or if the Cocoa
        event model is not supported.
        
        This helps us run most of the plugin tests on Qt/Mac, which still
        does not support the Cocoa event model.
        
        * DumpRenderTree/TestNetscapePlugIn.subproj/main.cpp:
        (NPP_New):

2009-08-08  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        bugzilla-tool needs a --quiet option
        https://bugs.webkit.org/show_bug.cgi?id=28060

        A first pass at a --quiet option.  This doesn't do all the excting
        things we might want, but it addresses 80% of the use case.

        * Scripts/bugzilla-tool:

2009-08-08  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Reviewed by Xan Lopez.

        [Gtk] Enable accessibility in Gtk DRT
        https://bugs.webkit.org/show_bug.cgi?id=25989

        Add Accessibility support to the GTK DRT.

        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/gtk/AccessibilityControllerGtk.cpp: Added.
        (AccessibilityController::AccessibilityController):
        (AccessibilityController::~AccessibilityController):
        (AccessibilityController::focusedElement):
        (AccessibilityController::rootElement):
        * DumpRenderTree/gtk/AccessibilityUIElementGtk.cpp: Added.
        (AccessibilityUIElement::AccessibilityUIElement):
        (AccessibilityUIElement::~AccessibilityUIElement):
        (AccessibilityUIElement::getLinkedUIElements):
        (AccessibilityUIElement::getDocumentLinks):
        (AccessibilityUIElement::getChildren):
        (AccessibilityUIElement::getChildrenWithRange):
        (AccessibilityUIElement::childrenCount):
        (AccessibilityUIElement::elementAtPoint):
        (AccessibilityUIElement::getChildAtIndex):
        (AccessibilityUIElement::allAttributes):
        (AccessibilityUIElement::attributesOfLinkedUIElements):
        (AccessibilityUIElement::attributesOfDocumentLinks):
        (AccessibilityUIElement::titleUIElement):
        (AccessibilityUIElement::parentElement):
        (AccessibilityUIElement::attributesOfChildren):
        (AccessibilityUIElement::parameterizedAttributeNames):
        (AccessibilityUIElement::role):
        (AccessibilityUIElement::title):
        (AccessibilityUIElement::description):
        (AccessibilityUIElement::language):
        (AccessibilityUIElement::x):
        (AccessibilityUIElement::y):
        (AccessibilityUIElement::width):
        (AccessibilityUIElement::height):
        (AccessibilityUIElement::clickPointX):
        (AccessibilityUIElement::clickPointY):
        (AccessibilityUIElement::intValue):
        (AccessibilityUIElement::minValue):
        (AccessibilityUIElement::maxValue):
        (AccessibilityUIElement::valueDescription):
        (AccessibilityUIElement::isEnabled):
        (AccessibilityUIElement::insertionPointLineNumber):
        (AccessibilityUIElement::isActionSupported):
        (AccessibilityUIElement::isRequired):
        (AccessibilityUIElement::attributesOfColumnHeaders):
        (AccessibilityUIElement::attributesOfRowHeaders):
        (AccessibilityUIElement::attributesOfColumns):
        (AccessibilityUIElement::attributesOfRows):
        (AccessibilityUIElement::attributesOfVisibleCells):
        (AccessibilityUIElement::attributesOfHeader):
        (AccessibilityUIElement::indexInTable):
        (AccessibilityUIElement::rowIndexRange):
        (AccessibilityUIElement::columnIndexRange):
        (AccessibilityUIElement::lineForIndex):
        (AccessibilityUIElement::boundsForRange):
        (AccessibilityUIElement::cellForColumnAndRow):
        (AccessibilityUIElement::selectedTextRange):
        (AccessibilityUIElement::setSelectedTextRange):
        (AccessibilityUIElement::attributeValue):
        (AccessibilityUIElement::isAttributeSettable):
        (AccessibilityUIElement::increment):
        (AccessibilityUIElement::decrement):
        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (webViewWindowObjectCleared):
        (main):
        * GNUmakefile.am:

2009-08-07  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Unreviewed Gtk build fix.

        DRT needs internal WTF symbols so we link to libJavaScriptCore.la
        too. Also don't force Gtk to use USE_SYSTEM_MALLOC.

        * GNUmakefile.am:

2009-08-07  Darin Adler  <darin@apple.com>

        * Scripts/commit-log-editor: Fix unchecked access to environment
        variable that may not be there.

2009-08-07  Mark Rowe  <mrowe@apple.com>

        Handle the case where only a single test is missing results.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:

2009-08-07  George Wright  <george.wright@torchmobile.com>

        Reviewed by Adam Treat

        Fix DumpRenderTree for the Qt port to always dump the PNG data unless
        the expected and actual hashes match.

        https://bugs.webkit.org/show_bug.cgi?id=28077

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::dump):

2009-08-07  Pierre d'Herbemont  <pdherbemont@apple.com>

        Reviewed by Eric Seidel.

        commit-log-editor does not produce a git commit log that is git friendly.
        https://bugs.webkit.org/show_bug.cgi?id=27754

        We make sure we end up with:
        - A first paragraph describing the bug. It is eventually prefixed by
        "WebKit: <line>" or "WebCore: <line>". This used to be
        "WebCore:\n\n<line>".
        - The Reviewed By line.
        - An eventual Patch By line if author and committer doesn't match.
        - The rest of the commit.

        * Scripts/commit-log-editor:

2009-08-07  Adam Barth  <abarth@webkit.org>

        Unreviewed.  (Darin Adler indicated he'd prefer if we landed these
        kinds of changes unreviewed, like editing the WebKit Team wiki page.)

        Added Pierre d'Herbemont to list of committers.

        * Scripts/modules/committers.py:

2009-08-07  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Adele Peterson.

        Cannot scroll for box-reflect:right
        https://bugs.webkit.org/show_bug.cgi?id=27979

        Update m_overflowLeft an m_overflowWidth for reflection just like
        m_overflowTop and m_overflowHeight.

        * Scripts/make-js-test-wrappers:  Added regexp to skip box-shadow-overflo
w-scroll.js

2009-08-06  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Adam Barth.

        box-shadow's spread is ignored with <table>
        https://bugs.webkit.org/show_bug.cgi?id=28017

        Use RenderStyle::getBoxShadowExtent just like RenderBlock.

        * Scripts/make-js-test-wrappers: Added regexp to skip box-shadow-overflow-scroll.js

2009-08-06  Eric Seidel  <eric@webkit.org>

        No review, only changing make-js-test-wrappers.

        Fix make-js-test-wrappers to ignore a few more js tests
        with custom templates.

        * Scripts/make-js-test-wrappers:

2009-08-06  Chris Marrin  <cmarrin@apple.com>

        Reviewed by David Hyatt.

        Added ENABLE_3D_CANVAS flag to build, default to off

        * Scripts/build-webkit:

2009-08-05  Brady Eidson  <beidson@apple.com>

        Reviewed by Darin Adler.

        Win DRT's resource load delegate is missing didReceiveResponse
        https://bugs.webkit.org/show_bug.cgi?id=28033

        * DumpRenderTree/win/FrameLoadDelegate.cpp:
        Added:
        (FrameLoadDelegate::didReceiveServerRedirectForProvisionalLoadForFrame):
        (FrameLoadDelegate::willPerformClientRedirectToURL):
        (FrameLoadDelegate::didCancelClientRedirectForFrame):

        Minor style cleanup:
        (FrameLoadDelegate::didStartProvisionalLoadForFrame): 
        (FrameLoadDelegate::didReceiveTitle):
        (FrameLoadDelegate::didFinishLoadForFrame):
        (FrameLoadDelegate::willCloseFrame):
        (FrameLoadDelegate::didClearWindowObject):
        * DumpRenderTree/win/FrameLoadDelegate.h:

2009-08-05  Brady Eidson  <beidson@apple.com>

        Reviewed by Darin Adler.

        Win DRT's resource load delegate is missing didReceiveResponse
        https://bugs.webkit.org/show_bug.cgi?id=28033

        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::didReceiveResponse):
        * DumpRenderTree/win/ResourceLoadDelegate.h:

2009-08-05  Darin Fisher  <darin@chromium.org>

        Reviewed by Darin Adler.

        Add layoutTestController.dumpWillCacheResponse
        https://bugs.webkit.org/show_bug.cgi?id=28010

        willCacheResponse is only interesting for embedders of mainline WebKit on Mac.
        Splitting off a new dumpWillCacheResponse allows a number of existings tests
        to run across platforms.

        The test that was specifically verifying willCacheResponse now calls
        dumpWillCacheResponse.

        * DumpRenderTree/LayoutTestController.cpp: Add dumpWillCacheResponse
        (LayoutTestController::LayoutTestController):
        (dumpWillCacheResponseCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::dumpWillCacheResponse):
        (LayoutTestController::setDumpWillCacheResponse):
        * DumpRenderTree/mac/ResourceLoadDelegate.mm: Inspect dumpWillCacheResponse
        instead of dumpResourceLoadCallbacks.
        (-[ResourceLoadDelegate webView:resource:willCacheResponse:fromDataSource:]):

2009-08-05  Jeremy Orlow  <jorlow@chromium.org>

        Reviewed by Adam Barth.

        Add my name to committers.py
        https://bugs.webkit.org/show_bug.cgi?id=28013

        Add my name to committers.py.

        * Scripts/modules/committers.py:

2009-08-05  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        A minor refactoring of the Qt DRT to be a bit more similar to
        the other DRTs, as well as more understandable.

        Splitting up resetJSObjects into a LayoutTestController->reset()
        plus a new closeRemainingWindows() method.

        Added a resetToConsistentStateBeforeTesting() method to keep
        the code in one place, making it easier to verify that we are
        doing things properly.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::resetToConsistentStateBeforeTesting):
        (WebCore::DumpRenderTree::open):
        (WebCore::DumpRenderTree::closeRemainingWindows):
        * DumpRenderTree/qt/DumpRenderTree.h:

2009-08-05  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        Make the Qt DRT WorkQueue work similarily to the cross platform
        one. This means that all items return true if they started
        loading.

        This change paves the way for unforking the WorkQueue, if we [Qt]
        would like that.

        * DumpRenderTree/qt/WorkQueue.cpp:
        (WorkQueue::processWork):
        * DumpRenderTree/qt/WorkQueue.h:
        * DumpRenderTree/qt/WorkQueueItem.h:
        * DumpRenderTree/qt/jsobjects.cpp:
        (LoadItem::invoke):
        (ReloadItem::invoke):
        (ScriptItem::invoke):
        (BackForwardItem::invoke):
        (LayoutTestController::processWork):
        (LayoutTestController::maybeDump):

2009-08-04  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        If load of a test fails, don't dump as it will be dumped
        in the preceding test, resulting in a invalid incorrect layout.

        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::maybeDump):

2009-08-04  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Simon Hausmann.

        Make the Qt DumpRenderTree more similar to the mac one.

        Changes include:
        1) Reset zoom factor before each test
        2) Only dump the backforward list when we got other dump result
        3) When we dump the render tree, and got zero result print out:
           [mainFrame renderTreeAsExternalRepresentation]
           and not:
           [frame renderTreeAsExternalRepresentation]

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::open):
        (WebCore::methodNameStringForFailedTest):
        (WebCore::DumpRenderTree::dump):

2009-08-05  chris fleizach  <cfleizach@apple.com>

        Fix Tiger build breakage.

        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:

2009-08-04  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        Bug 27994 - WAI-ARIA: aria-valuetext needs to be implemented
        https://bugs.webkit.org/show_bug.cgi?id=27994

        Expose valueDescription for accessibility. 

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (getValueDescriptionCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::valueDescription):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::valueDescription):

2009-08-04  Eric Seidel  <eric@webkit.org>

        Reviewed by Mark Rowe.

        REGRESSION: run-webkit-tests crashes if you have non-system perl in PATH
        https://bugs.webkit.org/show_bug.cgi?id=28006

        Hard-code perl to /usr/bin/perl and swig to /usr/bin/swig

        * DumpRenderTree/mac/PerlSupport/Makefile:

2009-08-04  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Adler.

        Add pkasting to bugzilla-tool as a committer
        https://bugs.webkit.org/show_bug.cgi?id=28002

        * Scripts/modules/committers.py:

2009-08-04  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Darin Adler.

        Bug 27993 - AXSliders are missing required attributes and actions
        https://bugs.webkit.org/show_bug.cgi?id=27993

        Add ability to check if any arbitrary action is supported.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (isActionSupportedCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::isActionSupported):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::isActionSupported):

2009-08-04  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        bugzilla-tool unit tests need a test harness
        https://bugs.webkit.org/show_bug.cgi?id=27977

        * Scripts/run-webkit-unittests: Added.

2009-08-04  Mark Rowe  <mrowe@apple.com>

        Rubber-stamped by Gavin "Gavvy" Barraclough.

        Ensure that DumpRenderTreeSupport is regenerated when switching between OS versions
        by listing the DumpRenderTree binary as a dependency.  Xcode has the smarts to rebuild
        DumpRenderTree itself when switching OS versions so this dependency removes the need
        for any smarts in the Makefile.

        * DumpRenderTree/mac/PerlSupport/Makefile:

2009-08-04  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool needs unit tests
        https://bugs.webkit.org/show_bug.cgi?id=26916

        Add some basic unit testing for scm.py.

        * Scripts/modules/scm.py:
        * Scripts/modules/scm_unittest.py: Added.

2009-08-04  Mike Fenton  <mike.fenton@torchmobile.com>

        Reviewed by Adam Treat.

        Fix --skipped=only mode to honor flags such as --no-http and platform ignored directories by checking
        to make sure the Skipped entries are not in the $ignoredDirectories array.  Directories commonly included
        are (http, media, compositing, wml, wcss).

        https://bugs.webkit.org/show_bug.cgi?id=27893

        * Scripts/run-webkit-tests:

2009-08-03  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Jon Honeycutt.

        Bug 27958 - WAI-ARIA: Implement 'aria-required' attribute.
        https://bugs.webkit.org/show_bug.cgi?id=27958

        Exposed isRequired to DumpRenderTree for accessibility.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (getIsRequiredCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::isRequired):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::isRequired):

2009-08-04  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        bugzilla-tool --commit-queue should validate commit-queue setter is a committer
        https://bugs.webkit.org/show_bug.cgi?id=27974

        With a test!

        * Scripts/modules/bugzilla.py:
        * Scripts/modules/bugzilla_unittest.py:

2009-08-04  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        REGRESSION(r46700): bugzilla-tool land-diff double-spaces ChangeLogs
        https://bugs.webkit.org/show_bug.cgi?id=27973

        The trailing comma (suppresses newlines) was lost in r46700.

        * Scripts/bugzilla-tool:

2009-08-04  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        bugzilla-tool has too many fatal errors
        https://bugs.webkit.org/show_bug.cgi?id=27969

        Replace several fatal errors with ScriptError exceptions.

        * Scripts/bugzilla-tool:
        * Scripts/modules/bugzilla.py:
        * Scripts/modules/scm.py:

2009-08-04  Eric Seidel  <eric@webkit.org>

        No review, ChangeLog fix only.

        Fix a ChangeLog line-spacing disaster caused by:
        https://bugs.webkit.org/show_bug.cgi?id=27973

        Still unsure what the fix for bugzilla-tool will be.

2009-08-04  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        bugzilla-tool --commit-queue should only land commit-queue+ patches
        https://bugs.webkit.org/show_bug.cgi?id=27970

        commit-queue mode for bugzilla-tool
        https://bugs.webkit.org/show_bug.cgi?id=27918

        Make bugzilla tool smart enough to find the commit-queue+ flags and
        land those patches.
        When we call land-patches with --commit-queue, we should filter the
        patches we land to only those that have the commit-queue+ flag set.
        That way, when we call bugzilla-tool from a main commit queue process,
        we won't land the wrong patches.

        * Scripts/bugzilla-tool:

2009-08-04  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        committer logic should be split out of bugzilla.py into its own module

        https://bugs.webkit.org/show_bug.cgi?id=27972

        I also added unit tests for the functionality I added.

        * Scripts/modules/bugzilla.py:
        * Scripts/modules/bugzilla_unittest.py: Added.
        * Scripts/modules/commiters_unittest.py: Added.
        * Scripts/modules/committers.py: Added.

2009-08-03  Peter Kasting  <pkasting@google.com>

        Reviewed by David Kilzer.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Handle any kind of line endings in svn-apply and svn-unapply, instead
        of assuming LF.

        * Scripts/svn-apply:
        * Scripts/svn-unapply:

2009-08-03  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        bugzilla-tool land-patches needs --queue mode
        https://bugs.webkit.org/show_bug.cgi?id=27961

        Add a --commit-queue command line option to suppress user interaction.

        * Scripts/bugzilla-tool:
        * Scripts/modules/scm.py:

2009-08-03  Mark Rowe  <mrowe@apple.com>

        Build fix.  Add installsrc, installhdrs and install targets.

        * DumpRenderTree/mac/PerlSupport/Makefile:

2009-08-03  Eric Carlson  <eric.carlson@apple.com>

        Reviewed by Eric Seidel.

        HTMLInputElement is not controllable by assistive technologies
        https://bugs.webkit.org/show_bug.cgi?id=27941

        Accessibility control of a slider required adding increment() and decrement()
        methods to AccessibilityObject, so expose thos methods on AccessibilityUIElement.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (incrementCallback): New, call UI element increment method.
        (decrementCallback): New, call UI element decrement method.
        (AccessibilityUIElement::getJSClass): Expose increment and decrement methods.

        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::increment): New, send NSAccessibilityIncrementAction to Mac wrapper.
        (AccessibilityUIElement::decrement): New, send NSAccessibilityDecrementAction to Mac wrapper.

        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::increment): New, do nothing.
        (AccessibilityUIElement::decrement): New, do nothing.

2009-08-02  David D. Kilzer  <ddkilzer@webkit.org>

        <http://webkit.org/b/27930> bugzilla-tool hates Tor Arne Vestbø

        Reviewed by Tor Arne Vestbø.

        * Scripts/bugzilla-tool:
        (set_reviewer_in_changelog): Made sure reviewer is properly
        encoded when calling replace().

2009-08-02  Kevin Ollivier  <kevino@theolliviers.com>

        Reviewed by David Levin.

        Script for building the wxBrowser sample app for wx.
        https://bugs.webkit.org/show_bug.cgi?id=27619

        * wx/browser/wscript: Added.

2009-08-02  Kevin Ollivier  <kevino@theolliviers.com>

        Reviewed by Jan Alonzo.

        Scripts needed for the waf build.
        https://bugs.webkit.org/show_bug.cgi?id=27619

        * wx/build: Added.
        * wx/build/build_utils.py: Added.
        * wx/build/settings.py: Added.
        * wx/build/waf_extensions.py: Added.
        * wx/build/wxpresets.py: Added.

2009-08-01  Dan Bernstein  <mitz@apple.com>

        Reviewed by Darin Adler.

        Make pixel test results more consistent across Mac OS X versions

        * DumpRenderTree/cg/ImageDiffCG.cpp:
        (createDifferenceImage): Avoid color correction when rendering the
            images into graphics contexts, so that the actual color values are
            compared, regardless of how the images are tagged.
        * DumpRenderTree/mac/DumpRenderTree.mm:
        (createWebViewAndOffscreenWindow): Set the window’s color space to the
            main screen’s color space, even though the window is off-screen.

2009-08-01  Mark Rowe  <mrowe@apple.com>

        Try again to make the Qt build bot happy.

        * BuildSlaveSupport/test-result-archive: Create a placeholder file inside the newly-created
        directory to prevent 'zip' from failing due to the directory containing no files.

2009-08-01  Mark Rowe  <mrowe@apple.com>

        Try and make the Qt build bot happy.

        * BuildSlaveSupport/test-result-archive: Handle the case where run-webkit-tests generates
        no output files at all and thus does not create the layout-test-results directory.

2009-08-01  Mark Rowe  <mrowe@apple.com>

        Move the include of DumpRenderTreeSupport to after DumpRenderTree has been built.

        * Scripts/run-webkit-tests:

2009-08-01  Mark Rowe  <mrowe@apple.com>

        Reviewed by Sam Weinig and David D. Kilzer.

        Fix <https://bugs.webkit.org/show_bug.cgi?id=27923>.
        Bug 27923: run-webkit-tests should not invoke "ps" repeatedly on Mac OS X

        run-webkit-tests invokes "ps" after each test on Mac OS X to determine whether DumpRenderTree is
        in the process of crashing.  We can do the same test more efficiently with a simple call to sysctl.
        I couldn't find any built-in way of doing this directly from perl, so we do it from a simple C module
        instead.  This speeds up run-webkit-tests by around 8%.

        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        * DumpRenderTree/mac/PerlSupport/DumpRenderTreeSupport.c: Added.
        (processIsCrashing):
        * DumpRenderTree/mac/PerlSupport/DumpRenderTreeSupportTiger.pm: Added.  Tiger does not have the SWIG tool
        that is used to generate the Perl binding to the C code, so we fall back to the old implementation on Tiger.
        * DumpRenderTree/mac/PerlSupport/Makefile: Added.
        * Scripts/run-webkit-tests:

2009-08-01  Mark Rowe  <mrowe@apple.com>

        Reviewed by David D. Kilzer.

        Display the reminder once rather than once per ChangeLog.

        * Scripts/prepare-ChangeLog:

2009-08-01  David Kilzer  <ddkilzer@apple.com>

        resolve-ChangeLogs: add error checking to git ls-files command on close()

        Reviewed by Eric Seidel.

        Item 2 of <https://bugs.webkit.org/show_bug.cgi?id=18599#c0>.

        * Scripts/resolve-ChangeLogs: Added error checking to close()
        after running git ls-files.  Added error checking to all
        system() calls by checking for a non-zero WEXITSTATUS($?).
        Changed "|| die;" expressions to "or die $!;".

2009-08-01  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/18599> resolve-ChangeLogs doesn't work with relative paths

        Reviewed by Eric Seidel.

        * Scripts/resolve-ChangeLogs: Used chdirReturningRelativePath()
        and determineVCSRoot() to change directories to the root of the
        project before running the command and to provide a path for
        removeChangeLogArguments() to make sure any ChangeLog arguments
        on the command line are still found.
        (canonicalRelativePath): Added.  Returns a canonical path (e.g.,
        stripping 'dir/../' from the path) relative to the current
        directory.
        (removeChangeLogArguments): Added argument which contains a
        relative path that must be prepended to any ChangeLog arguments.
        Used canonicalRelativePath() and File::Spec->catfile() to
        construct a normalized, relative path to each file.

2009-08-01  David Kilzer  <ddkilzer@apple.com>

        Implement VCSUtils::chdirReturningRelativePath()

        Reviewed by Eric Seidel.

        Step 2 to fix:
        <http://webkit.org/b/18599> resolve-ChangeLogs doesn't work with relative paths

        * Scripts/VCSUtils.pm:
        (VCSUtils::chdirReturningRelativePath): Moved here from
        chdirAndGetDifference() in svn-create-patch.
        * Scripts/svn-create-patch: Switched to use
        chdirReturningRelativePath() instead of chdirAndGetDifference().
        (chdirAndGetDifference): Removed.

2009-08-01  David Kilzer  <ddkilzer@apple.com>

        Implement VCSUtils::determineVCSRoot()

        Reviewed by Eric Seidel.

        Step 1 to fix:
        <http://webkit.org/b/18599> resolve-ChangeLogs doesn't work with relative paths

        * Scripts/VCSUtils.pm: Removed reference to webkitdirs module.
        (VCSUtils::EXPORT): Added &determineVCSRoot.  Realphabetized.
        (VCSUtils::determineGitRoot): Added.  Based on code in
        commit-log-editor.
        (VCSUtils::determineVCSRoot): Implemented using
        determineGitRoot() and determineSVNRoot().
        * Scripts/commit-log-editor: Replaced use of
        topLevelSourceDirectory() with determineVCSRoot().  Resorted
        use statements.
        (topLevelSourceDirectory): Removed.

2009-07-31  Daniel Bates  <dbates@intudata.com>

        Reviewed by Eric Seidel.
        
        https://bugs.webkit.org/show_bug.cgi?id=27757

        Resolves Perl redefinition warnings about functions tmpfile and tmpnam which are 
        defined in both File::Temp and POSIX.
        
        This stops the warnings by preventing the "import" method of File::Temp from being called,
        which would otherwise add these functions into the primary namespace. Note, "use POSIX" 
        will import these functions into the primary namespace anyway. We only need one instance
        of these functions in our namespace (or we get redefinition warnings), so lets use the 
        one's in the POSIX package.
        
        * Scripts/update-webkit-auxiliary-libs: Changed "use File::Temp" to "use File::Temp ()".
        * Scripts/update-webkit-support-libs: ditto

2009-07-31  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Eric Seidel.

        Add a top level build option to control datagrid support
        https://bugs.webkit.org/show_bug.cgi?id=27915

        * Scripts/build-webkit:

2009-07-31  David Levin  <levin@chromium.org>

        Reviewed by Adam Treat.

        check-webkit-style --git-commit has bugs if you select a commit in the past
        https://bugs.webkit.org/show_bug.cgi?id=27908

        * Scripts/check-webkit-style:
        (main): Made the git-commit command only select the first commit
        if a range is given (and print a warning).
        * Scripts/modules/scm.py:
        (SCM::create_patch_from_local_commit):
        (SCM::create_patch_since_local_commit):
        (SCM::commit_locally_with_message):
        (SCM::discard_local_commits):
        Added an error messages in case these aren't overriden.

        (Git::create_patch_since_local_commit):
        Added this command to allow doing a diff of everything after a given commit.

2009-07-31  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Speculative Qt build fix. Not reviewed.

        Add LayoutTestController::disableImageLoading() in jsobjects.h.

        * DumpRenderTree/qt/jsobjects.h:

2009-07-31  Brady Eidson  <beidson@apple.com>

        Reviewed by John Sullivan.

        <rdar://problem/6973106> and https://bugs.webkit.org/show_bug.cgi?id=27896
        Favicons are still loaded when automatic image loading is disabled.

        * DumpRenderTree/LayoutTestController.cpp:
        (disableImageLoadingCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::disableImageLoading):

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::disableImageLoading):

        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::disableImageLoading): Stubbed for now.
        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::disableImageLoading): Ditto.

2009-07-30  Eric Seidel  <eric@webkit.org>

        Reviewed by David Kilzer.

        bugzilla-tool post-commits trunk..head errors out
        https://bugs.webkit.org/show_bug.cgi?id=27847

        Rename commit_ids_from_range_arguments to commit_ids_from_commitish_arguments
        and make it handle the new arguments format proposed in the bug.

        * Scripts/bugzilla-tool:
        * Scripts/modules/scm.py:

2009-07-30  Eric Seidel  <eric@webkit.org>

        Reviewed by David Levin.

        clean up build-webkit to use less copy/paste code and remove unneeded SVG warning
        https://bugs.webkit.org/show_bug.cgi?id=27857

        * Scripts/build-webkit:

2009-07-31  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27894> bugzilla-tool: Bugzilla.clear_attachment_review_flag() fails with ClientForm-0.2.10 and python-2.5

        Reviewed by Eric Seidel.

        * Scripts/modules/bugzilla.py:
        (Bugzilla.clear_attachment_review_flag): Specify which 'comment'
        form field to use when setting its value.

2009-07-31  Eric Seidel  <eric@webkit.org>

        Reviewed by David Kilzer.

        bugzilla-tool post-commits obsoletes its own work :(
        https://bugs.webkit.org/show_bug.cgi?id=27849

        Simple fix.  Use .add() instead of .update()

        * Scripts/bugzilla-tool:

2009-07-31  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Anders Carlsson.

        Improve platform-detection in run-webkit-tests

        This prevents miss-detection of mac-* over Qt/Mac.

        * Scripts/run-webkit-tests:

2009-07-30  Mark Rowe  <mrowe@apple.com>

        Reviewed by Cameron Zwarich.

        Teach buildbot to detect test cases that are missing results.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:

2009-07-30  Mark Rowe  <mrowe@apple.com>

        Things work better when you create the correct directories.

        * Scripts/run-webkit-tests:

2009-07-30  Mark Rowe  <mrowe@apple.com>

        Include some information about the error when we die.

        * Scripts/run-webkit-tests:

2009-07-30  Mark Rowe  <mrowe@apple.com>

        Ensure that the path exists before writing results to it.
        Hopefully this will make the Windows build bot happy.

        * Scripts/run-webkit-tests:

2009-07-30  Mark Rowe  <mrowe@apple.com>

        Reviewed by Adam Treat and Jon Honeycutt.

        Teach run-webkit-tests to always store the actual results in the results directory for new tests.
        This allows us to give a working link to the results from the result summary page, even if we're
        not generating new results in to the tree.

        * Scripts/run-webkit-tests:

2009-07-30  Mark Rowe  <mrowe@apple.com>

        Add a Qt Linux build bot.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2009-07-30  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

         Reviewed by Adam Roben.

         Add --minimal option to webkit-build.
         https://bugs.webkit.org/show_bug.cgi?id=27852

         This option disables all optional build features unless
         they are explicitly enabled.

         * Scripts/build-webkit:

2009-07-30  Jakub Wieczorek  <faw217@gmail.com>

        [Qt] Fix build with GCC 4.4.

        * DumpRenderTree/qt/ImageDiff.cpp:

2009-07-29  Ariya Hidayat  <ariya.hidayat@nokia.com>

        Reviewed by Simon Hausmann.

        https://bugs.webkit.org/show_bug.cgi?id=27813

        [Qt] Support pixel tests in DumpRenderTree for the Qt port.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):
        (WebCore::DumpRenderTree::open):
        (WebCore::DumpRenderTree::setDumpPixels):
        (WebCore::DumpRenderTree::dump):
        * DumpRenderTree/qt/DumpRenderTree.h:
        * DumpRenderTree/qt/main.cpp:
        (main):

2009-07-29  Ariya Hidayat  <ariya.hidayat@nokia.com>

        Reviewed by Simon Hausmann.

        https://bugs.webkit.org/show_bug.cgi?id=27813

        [Qt] Implement ImageDiff.

        * DumpRenderTree/qt/ImageDiff.cpp: Added.
        * DumpRenderTree/qt/ImageDiff.pro: Added.

2009-07-30  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Eric Seidel.

        build-webkit: Reorder logic for determining the baseProductDir
        
        https://bugs.webkit.org/show_bug.cgi?id=27699

        We now do port-spesific probing for the product dir first, and then
        fall back to either the generic WEBKITOUTPUTDIR (which now also works
        on Mac), or WebKitBuild.
        
        Then we add the git branch if the git branch build option is enabled.
        
        Finally we massage the product dir based on the port. For example the
        Mac port will now always set the SYMROOT and OBJROOT configuration for
        XCode.
        
        Note that isAppleWinWebkit() and isCygwin() is not mutually exclusive,
        hence the normal if and not elsif in the last two blocks.

        * Scripts/webkitdirs.pm:

2009-07-29  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27082> bugzilla-tool: Add --no-close switch to land-patches

        Reviewed by David Levin.

        * Scripts/bugzilla-tool:
        (LandPatchesFromBugs.__init__): Added --no-close switch.
        (LandPatchesFromBugs.land_patches): Don't close the bug if the
        --no-close switch was used.  Always clear the review+ flag on
        every landed patch using the commit_text message when cleared.
        This prevents patches from showing up in the commit queue if
        reopened and provides consistency with all landed patches.
        * Scripts/modules/bugzilla.py:
        (Bugzilla.clear_attachment_review_flag): Added.

2009-07-29  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27815> bugzilla-tool: add -m/--description to post-commits command

        Reviewed by Eric Seidel.

        * Scripts/bugzilla-tool:
        (PostDiffAsPatchToBug.execute): Changed default patch name from
        "patch" to "Patch v1".
        (PostCommitsAsPatchesToBug.__init__): Added -m/--description
        switch.
        (PostCommitsAsPatchesToBug.execute): Use description provided by
        -m/--description switch first, else fall back to the commit
        message.

2009-07-29  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Dave Levin.

        Make check-webkit-style support files as arguments.
        https://bugs.webkit.org/show_bug.cgi?id=27549

        * Scripts/check-webkit-style:
        Support files as argument. Change documentation and use basename
        on the binary name when used in the documentation. Also do not
        die when printing something containing non-ASCII characters.

2009-08-06  Mike Fenton  <mike.fenton@torchmobile.com>

        Reviewed by David Levin.

        Add validation for pointer and reference declaration as defined by webkit style guidelines to cpp_style.py.
        Add unit tests for validation and update existing c style cast test to be run explicitly as c validation.

        https://bugs.webkit.org/show_bug.cgi?id=27984

        * Scripts/modules/cpp_style.py:
        * Scripts/modules/cpp_style_unittest.py:

2009-07-29  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27119> bugzilla-tool: Add create-bug command

        Reviewed by David Levin.

        Implement "create-bug" command for bugzilla-tool.

        * Scripts/bugzilla-tool: Added CreateBug class.
        (CreateBug.__init__): Added.
        (CreateBug.create_bug_from_commit): Added.
        (CreateBug.create_bug_from_patch): Added.
        (CreateBug.prompt_for_bug_title_and_comment): Added.
        (CreateBug.execute): Added.
        (BugzillaTool.__init__): Added create-bug command.
        * Scripts/modules/bugzilla.py:
        (Bugzilla.prompt_for_component): Added.
        (Bugzilla.check_create_bug_response_returning_bug_id_on_success): Added.
        (Bugzilla.create_bug_with_patch): Added.

2009-07-29  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Reviewed by Eric Seidel and Xan Lopez.

        [Gtk] Enable http/tests/appcache tests
        https://bugs.webkit.org/show_bug.cgi?id=27674

        Add support for testing http/tests/appcache tests.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setAppCacheMaximumSize):

2009-07-28  Mark Rowe  <mrowe@apple.com>

        Reviewed by Oliver Hunt.

        Prevent nightly builds of WebKit from launching against old Safari versions that we no longer work with.

        * WebKitLauncher/main.m:
        (checkSafariVersion): Add a minimum required Safari version of 4.0.  This matches the requirement on Windows.
        (main): If the minimum version requirement is not met, display an alert and bail out.

2009-07-28  David Levin  <levin@chromium.org>

        Reviewed by Adam Treat.

        cpplint* should be named cpp_style*
        https://bugs.webkit.org/show_bug.cgi?id=27752

        The files were renamed. A few renames were done:
          CppLint -> CppStyle
          cpplint -> cpp_style

        * Scripts/check-webkit-style:
        * Scripts/modules/cpp_style.py: Copied from cpplint.py and
          did name fix ups.
        * Scripts/modules/cpp_style_unittest.py: Copied from cpplint_unittest.py and
          did name fix ups.
        * Scripts/modules/cpplint.py: Removed.
        * Scripts/modules/cpplint_unittest.py: Removed.

2009-07-28  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Rubber-stamped by Holger Freyther.
        
        Add Steve Falkenburg to bugzilla-tools' reviewers list

        * Scripts/modules/bugzilla.py:

2009-07-28  Zoltan Horvath  <hzoltan@inf.u-szeged.hu>

        Reviewed by Simon Hausmann.

        Implement test result archive support for the Qt port.

        * BuildSlaveSupport/test-result-archive:

2009-07-27  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=27755
        Layout tests that dump resource load delegate calls should dump the request method and the response status code.

        * DumpRenderTree/mac/ResourceLoadDelegate.mm:
        (-[NSURLResponse _drt_descriptionSuitableForTestResult]):
        (-[NSURLRequest _drt_descriptionSuitableForTestResult]):

        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (descriptionSuitableForTestResult):

2009-07-27  Pierre d'Herbemont  <pdherbemont@apple.com>

        Reviewed by David Levin.

        "bugzilla-tool post-commit head" doesn't work because it can't find the bug id from the commit load.
        https://bugs.webkit.org/show_bug.cgi?id=27747

        modules.bugzilla is not found because not included.

        * Scripts/modules/scm.py: Properly import modules.bugzilla.

2009-07-24  Pierre d'Herbemont  <pdherbemont@apple.com>

        Reviewed by David Kilzer.

        commit-log-editor should allow git commit --amend to regenerate the commit log based on the modifed ChangeLog
        https://bugs.webkit.org/show_bug.cgi?id=27664

        * Scripts/commit-log-editor: Add --regenerate-log option.
        The user is asked if he wants to suppress previous ChangeLog and regenerate it,
        if this option is enabled.

2009-07-27  Gabor Rapcsanyi  <rapcsanyi.gabor@stud.u-szeged.hu>

        Reviewed by Simon Hausmann.

        Generating remote links causes a lot of unnecessary spew on Qt build bot too

        * Scripts/run-webkit-tests:

2009-07-25  Kwang Yul Seo  <skyul@company100.net>

        Reviewed by Darin Adler.

        Windows build break due to warning C4819
        https://bugs.webkit.org/show_bug.cgi?id=27416

        Disable C4819 warning to fix build.

        * DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.vcproj:

2009-07-24  Nikolas Zimmermann  <nikolas.zimmermann@torchmobile.com>

        Not reviewed. Add Kevin McCullough as reviewer in bugzilla.py

        * Scripts/modules/bugzilla.py:

2009-07-24  Eli Fidler  <eli.fidler@torchmobile.com>

        Reviewed by Adam Treat.

        Improve git workflow by populating commit messages with ChangeLog entries.
        https://bugs.webkit.org/show_bug.cgi?id=27605

        If the user doesn't manually modify the ChangeLog files, use
        prepare-ChangeLog to populate the git commit message. This behaviour
        can be disabled by the 'webkitGenerateCommitMessage' git configuration option.

        * Scripts/commit-log-editor:

2009-07-24  David Levin  <levin@chromium.org>

        Reviewed by Adam Treat.

        cpplint crash when there is a duplicate header followed by another header.
        https://bugs.webkit.org/show_bug.cgi?id=27625

        * Scripts/modules/cpplint.py: Ensure that include_state.header_types is updated even
          there is a duplicate header, which resulted in some code rearrangement.  Also,
          changed some if's in this function to return early.  This avoids having nearly the
          whole function content being indented.
        * Scripts/modules/cpplint_unittest.py: Added a test which would have exposed the crash.

2009-07-24  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

         Reviewed by Adam Treat.

         Filetype support changes for cpplint and check_webkit_style
         https://bugs.webkit.org/show_bug.cgi?id=27653

         Introduce .c support for check_webkit_style, and remove support for
         .cc files in favor of .cpp.

         * Scripts/check-webkit-style:
         * Scripts/modules/cpplint.py:
         * Scripts/modules/cpplint_unittest.py:

2009-07-24  Eli Fidler  <eli.fidler@torchmobile.com>

        Reviewed by David Levin.

        Improve git workflow by populating commit messages with ChangeLog entries.
        https://bugs.webkit.org/show_bug.cgi?id=27605

        add --[no-]write prepare-ChangeLog options to bash completion

        * Scripts/webkit-tools-completion.sh:

2009-07-24  Andrei Popescu  <andreip@google.com>

        Reviewed by Anders Carlsson.

        ApplicationCache should have size limit
        https://bugs.webkit.org/show_bug.cgi?id=22700

        Adds a new method on the LayoutTestController that
        allows a JS unit test to configure the maximum size
        of the Application Cache.

        * DumpRenderTree/LayoutTestController.cpp:
        (setAppCacheMaximumSizeCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setAppCacheMaximumSize):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setAppCacheMaximumSize):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setAppCacheMaximumSize):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setAppCacheMaximumSize):

2009-07-24  Adam Barth  <abarth@webkit.org>

        Rubber stamped by Eric Seidel.

        Added andersca to list of reviewers.

        * Scripts/modules/bugzilla.py:

2009-07-24  Mark Rowe  <mrowe@apple.com>

        Reviewed by Xan Lopez.

        Fix dozens of "Deallocation of a pointer not malloced" messages seen while running
        layout tests on the build bot.

        Memory allocated via FastMalloc was being deleted via the system memory allocator
        due to an inconsistent including of FastMalloc.h.  We address this by including it
        from config.h and including config.h from every implementation file, as in our other
        projects.

        * DumpRenderTree/ForwardingHeaders/wtf/FastMalloc.h: Copied from JavaScriptGlue/ForwardingHeaders/wtf/FastMalloc.h.
        * DumpRenderTree/config.h:
        * DumpRenderTree/mac/AccessibilityControllerMac.mm:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        * DumpRenderTree/mac/AppleScriptController.m:
        * DumpRenderTree/mac/CheckedMalloc.cpp:
        * DumpRenderTree/mac/DumpRenderTree.mm:
        * DumpRenderTree/mac/DumpRenderTreeDraggingInfo.mm:
        * DumpRenderTree/mac/DumpRenderTreePasteboard.m:
        * DumpRenderTree/mac/DumpRenderTreeWindow.mm:
        * DumpRenderTree/mac/EditingDelegate.mm:
        * DumpRenderTree/mac/EventSendingController.mm:
        * DumpRenderTree/mac/FrameLoadDelegate.mm:
        * DumpRenderTree/mac/GCControllerMac.mm:
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        * DumpRenderTree/mac/NavigationController.m:
        * DumpRenderTree/mac/ObjCController.m:
        * DumpRenderTree/mac/ObjCPlugin.m:
        * DumpRenderTree/mac/ObjCPluginFunction.m:
        * DumpRenderTree/mac/PixelDumpSupportMac.mm:
        * DumpRenderTree/mac/PlainTextController.mm:
        * DumpRenderTree/mac/PolicyDelegate.mm:
        * DumpRenderTree/mac/ResourceLoadDelegate.mm:
        * DumpRenderTree/mac/TextInputController.m:
        * DumpRenderTree/mac/UIDelegate.mm:
        * DumpRenderTree/mac/WorkQueueItemMac.mm:

2009-07-24  Mark Rowe  <mrowe@apple.com>

        Reviewed by Simon Hausmann.

        Add a command line option to run-javascriptcore-tests to explicitly opt out of attempting to rebuild JavaScriptCore.
        This is primarily useful to speed up the build bots where one machine builds JavaScriptCore and a second runs the tests,
        leading to situations where the build system unnecessarily feels that the need to recompile.

        * BuildSlaveSupport/build.webkit.org-config/master.cfg:
        * Scripts/run-javascriptcore-tests:

2009-07-23  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Reviewed by Eric Seidel.

        [Gtk] Add implementation of GCController for DRT
        https://bugs.webkit.org/show_bug.cgi?id=27636

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (webViewWindowObjectCleared):
        (main):
        * DumpRenderTree/gtk/GCControllerGtk.cpp:
        (GCController::collect):
        (GCController::collectOnAlternateThread):
        (GCController::getJSObjectCount):

2009-07-23  Mark Rowe  <mrowe@apple.com>

        Update build.webkit.org config for new machine.

        * BuildSlaveSupport/build.webkit.org-config/config.json:

2009-07-23  Brady Eidson  <beidson@apple.com>

        Remove accidentally checked in code.

        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (waitUntilDoneWatchdogFired):
        (LayoutTestController::setWaitToDump):

2009-07-23  Brady Eidson  <beidson@apple.com>

        Reviewed by Geoff Garen.

        WebCore has a few places that don't gracefully handle a null request returned from willSendRequest.
        https://bugs.webkit.org/show_bug.cgi?id=27595

        Add the ability to tell the LayoutTestController to return a null request for willSendRequest
        redirect callbacks.
        
        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (setWillSendRequestReturnsNullOnRedirectCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::willSendRequestReturnsNullOnRedirect):
        (LayoutTestController::setWillSendRequestReturnsNullOnRedirect):

        * DumpRenderTree/mac/ResourceLoadDelegate.mm:
        (-[ResourceLoadDelegate webView:resource:willSendRequest:redirectResponse:fromDataSource:]):
        * DumpRenderTree/win/ResourceLoadDelegate.cpp:
        (ResourceLoadDelegate::willSendRequest):

2009-07-23  Mark Rowe  <mrowe@apple.com>

        Reviewed Oliver Hunt.

        Fix DumpRenderTree to not fail an assertion on launch on a new machine.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (setDefaultsToConsistentValuesForTesting): Disable the XSS auditor.  It being enabled
        breaks all of the JavaScript tests within testStringByEvaluatingJavaScriptFromString,
        which causes us to exit due to an assertion failure.  It's not clear why the XSS auditor
        decides to interfere with these tests.

2009-07-23  Mark Rowe  <mrowe@apple.com>

        Reviewed by Oliver Hunt.

        Update default state of the XSS auditor in GTK DumpRenderTree to match Mac and Windows
        in hopes of fixing some layout test failures seen on the build bot.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):

2009-07-23  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

         Reviewed by Adam Treat.

         Fix false positives for switch statement indentation check in cpplint.
         https://bugs.webkit.org/show_bug.cgi?id=27615

         Makes one-line case statements (e.g. "case foo: bar();") work.
         Also a few general improvements to the robustness and readability of
         the check, and more test cases.

         * Scripts/modules/cpplint.py:
         * Scripts/modules/cpplint_unittest.py:

2009-07-23  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

         Reviewed by Adam Treat.

         Add check for line-breaking rule #3 to cpplint.
         https://bugs.webkit.org/show_bug.cgi?id=27610

         "An else if statement should be written as an if statement when
         the prior if concludes with a return statement."

         Implemented by a multi-line (kind of back-tracking) algorithm.
         Comes with loads of unit tests. Fixes the check for label indentation
         to be not so overzealous, as it didn't allow for completely unindented
         goto labels (at the very start of a line).

         * Scripts/modules/cpplint.py:
         * Scripts/modules/cpplint_unittest.py:

2009-07-23  Eli Fidler  <eli.fidler@torchmobile.com>

         Reviewed by Adam Treat.

         Improve git workflow by populating commit messages with ChangeLog entries.
         https://bugs.webkit.org/show_bug.cgi?id=27605

         add --[no-]write option to optionally output new ChangeLog entries to
         stdout instead of modifying ChangeLog files

         fix Torch Mobile copyright

         * Scripts/prepare-ChangeLog:

2009-07-23  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

        Reviewed by Adam Treat.

        Enable cpplint for .c files.
        https://bugs.webkit.org/show_bug.cgi?id=27604

        Also make sure that the check for NULL does not apply to .c files.

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-22  Steve Falkenburg  <sfalken@apple.com>

        Checkpoint new Windows nightly launcher.
        
        Reviewed by Mark Rowe.

        * WebKitLauncherWin: Added.
        * WebKitLauncherWin/Resource.h: Added.
        * WebKitLauncherWin/WebKitLauncherWin.cpp: Added.
        (getStringValue): Retrieve a string registry value.
        (applePathFromRegistry): Get an Apple-related path out of the registry.
        (copyEnvironmentVariable): Copy an environment variable.
        (safariInstallDir): Helper function to get the install directory for Safari.
        (safariBrowserExe): Helper function to get the full path of the Safari executable.
        (_tWinMain): Locate Safari and launch it after setting up an environment variable.
        * WebKitLauncherWin/WebKitLauncherWin.h: Added.
        * WebKitLauncherWin/WebKitLauncherWin.rc: Added.
        * WebKitLauncherWin/WebKitLauncherWin.vcproj: Added.
        * WebKitLauncherWin/webkit.ico: Added.

2009-07-22  David Levin  <levin@chromium.org>

        Reviewed by Adam Treat.

        run-webkit-lint should be named check-webkit-style
        https://bugs.webkit.org/show_bug.cgi?id=27568

        This name better reflects the fact that it is about checking the style of files.

        * Scripts/check-webkit-style: Renamed from WebKitTools/Scripts/run-webkit-lint.

2009-07-22  Takeshi Yoshino  <tyoshino@google.com>

        Reviewed by Darin Adler.

        VC++ 2005 Express failed to build WebKit due to raw UTF-8 string in WebKit/win/WebCoreLocalizedStrings.cpp
        https://bugs.webkit.org/show_bug.cgi?id=26375

        Make it able to use hexadecimal escape sequences in .*UI_STRING(_KEY)? macros. Now,
        the extract-localizable-strings script unescapes hexadecimal escape sequences in string literals
        in the macros before writing out them into the file to update.

        By this fix, we can eliminate raw UTF-8 strings in source code while using raw UTF-16 big endian
        strings in the Localizable.strings file.

        Bonus: There's no longer extract-webkit-localizable-strings script. Fix usage message to guide
        users to update-webkit-localizable-strings.

        * Scripts/extract-localizable-strings:

2009-07-22  Shinichiro Hamaji  <hamaji@google.com>

        Reviewed by David Levin.

        Tiny typo fixes for cpplint.py
        https://bugs.webkit.org/show_bug.cgi?id=27530

        * Scripts/modules/cpplint.py:

2009-07-22  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        run-webkit-lint checks code which are not changed
        https://bugs.webkit.org/show_bug.cgi?id=27529

        Add check if the line is newly added.

        * Scripts/run-webkit-lint:

2009-07-22  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        run-webkit-lint should have --git-commit option
        https://bugs.webkit.org/show_bug.cgi?id=27528

        * Scripts/modules/cpplint.py:
        * Scripts/run-webkit-lint:

2009-07-22  Peter Kasting  <pkasting@google.com>

        Reviewed by David Kilzer.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Factor svn-create-patch's "determineSvnRoot()" into a function in
        VCSUtils.pm so commit-log-editor can use it too.

        * Scripts/VCSUtils.pm: Add determineSVNRoot().
        * Scripts/commit-log-editor: Use determineSVNRoot() instead of old
          code (which didn't work as well).
        * Scripts/svn-create-patch: Remove determineSvnRoot() (moved).

2009-07-22  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

        Reviewed by Adam Treat.

        Fix false positives in namespace indentation checks.
        https://bugs.webkit.org/show_bug.cgi?id=27567

        The regular expression detecting goto labels (in order
        to skip those) was too permissive, which caused other
        code like "Foo::Bar()" to be treated as a label too,
        thereby not stopping the processing loop as expected.

        Now comes with a stricter regexp, and more demanding
        test cases to check for these issues.

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-22  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

        Reviewed by Adam Treat.

        Fix cpplint generating false positives for
        "primary" includes in headers.
        https://bugs.webkit.org/show_bug.cgi?id=27553

        Doing so by only flagging includes in header files
        as primary when the include filename exactly matches
        the header filename.

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-22  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

        Reviewed by Adam Treat.

        cpplint generates false positives for primary includes
        https://bugs.webkit.org/show_bug.cgi?id=27544

        Fix false positives for instances when cpplint would
        normally classify multiple includes as primary: After
        the first primary include, classify subsequent ones as
        "other" includes even if they look like primary ones.

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-22  Gabor Rapcsanyi  <rapcsanyi.gabor@stud.u-szeged.hu>

        Reviewed by Simon Hausmann.

        Pass XAUTHORITY environment variable to $dumpTool as well.

        * Scripts/run-webkit-tests:

2009-07-21  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

         Reviewed by Adam Treat.

         Add check for correct wtf includes to cpplint.
         https://bugs.webkit.org/show_bug.cgi?id=27524

         * Scripts/modules/cpplint.py:
         * Scripts/modules/cpplint_unittest.py:

2009-07-21  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

        Reviewed by David Levin.

        Add checks for multi-line boolean operator placement.
        https://bugs.webkit.org/show_bug.cgi?id=27496

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-21  Adam Treat  <adam.treat@torchmobile.com>

        Reviewed by David Levin.

        We can't match implementation file and primary header exactly
        since we have so many files in WebKit where the port suffix
        is appended to the filename.

        Example: FooQt.cpp and the primary header is Foo.h.

        * Scripts/modules/cpplint.py:

2009-07-21  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

        Reviewed by David Levin.

        Add checks for switch statement indentation to cpplint.
        https://bugs.webkit.org/show_bug.cgi?id=27508

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-21  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by Adam Treat.

        Feature request: cpplint should check for braces - rule 2
        https://bugs.webkit.org/show_bug.cgi?id=27497

        Add the requested feature: Make sure { is on the same line
        as the foreach "keyword".

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-20  Jakob Petsovits  <jakob.petsovits@torchmobile.com>

        Reviewed by David Levin.

        Add checks for namespace indentation to cpplint.
        https://bugs.webkit.org/show_bug.cgi?id=27461

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-20  Adam Treat  <adam.treat@torchmobile.com>

        Reviewed by David Levin.

        Add cpplint check for proper include order
        https://bugs.webkit.org/show_bug.cgi?id=27462

        Add a new check to cpplint to flag cases where the include section of a file
        does not match the mandated include order and style of the Webkit coding style
        guidelines.

        Add associated tests.

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-21  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        Support lint for patches
        https://bugs.webkit.org/show_bug.cgi?id=27291

        Add run-webkit-lint script, which lints recent changes in local
        repository.  Also, modified cpplint.py so that we don't need to
        specify verbose level for process_file().

        * Scripts/modules/cpplint.py:
        * Scripts/run-webkit-lint: Added.

2009-07-21  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        diff_parser should accept lines without trailing \n
        https://bugs.webkit.org/show_bug.cgi?id=27483

        Normalize the input lines by removing a trailing newline.
        Also, add a case for unittest for newly added files.

        * Scripts/modules/diff_parser.py:
        * Scripts/modules/diff_parser_unittest.py:

2009-07-21  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        cpplint.py's process_file() should accept customized error function
        https://bugs.webkit.org/show_bug.cgi?id=27487

        * Scripts/modules/cpplint.py:

2009-07-21  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        cpplint.py should have an interface to get global error count
        https://bugs.webkit.org/show_bug.cgi?id=27486

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-21  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        cpplint's parse_argument should not exit even if no files are specified
        https://bugs.webkit.org/show_bug.cgi?id=27489

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-21  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        diff_parser: s/add_deleted_line/add_old_line/g
        https://bugs.webkit.org/show_bug.cgi?id=27484

        * Scripts/modules/diff_parser.py:

2009-07-21  Roland Steiner  <rolandsteiner@google.com>

        Reviewed by David Levin.

        Add ENABLE_RUBY to list of build options
        https://bugs.webkit.org/show_bug.cgi?id=27324

        * Scripts/build-webkit: Added flag ENABLE_RUBY.

2009-07-20  Mark Rowe  <mrowe@apple.com>

        Reviewed by David D. Kilzer.

        Fix <https://bugs.webkit.org/show_bug.cgi?id=27482>.
        Bug 27482: svn-apply cannot apply patch generated by Windows SVN

        A regexp in svn-apply was treating everything prior to a \n as part of the
        file name.  The native Windows SVN client uses \r\n for line endings which
        meant that the \r was being included in the file name.  This defeated the
        special-case logic for ChangeLogs to apply them with an increased fuzz factor,
        meaning that the ChangeLog portions of such patches would fail to apply.

        Also updated two other regexps that look like they would hit similar problems
        with line-endings so that they will correctly handle patches from Windows SVN.

        * Scripts/svn-apply:

2009-07-20  Peter Kasting  <pkasting@google.com>

        Reviewed by Mark Rowe.

        https://bugs.webkit.org/show_bug.cgi?id=27468
        Back out r46060, which caused problems for some Apple developers.

        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/ImageDiff.vcproj:
        * DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.vcproj:

2009-07-20  Peter Kasting  <pkasting@google.com>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Use shorter, more correct code for determining the current directory,
        which works better with symbolic links on some systems.  Also switch
        from checking repository root to checking UUID, to match scm.py.

        * Scripts/svn-create-patch:

2009-07-20  Mark Rowe  <mrowe@apple.com>

        Rubber-stamped by Dan Bernstein.

        Work around <rdar://problem/7075373> by ensuring that the URL is absolute before handing it off to CoreText.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (activateFonts):

2009-07-20  David Levin  <levin@chromium.org>

        Reviewed by Adam Treat.

        Enable filename completion for run-webkit-test (added "-o default").

        * Scripts/webkit-tools-completion.sh:

2009-07-20  Simon Hausmann  <simon.hausmann@nokia.com>

        No review, just adding Gavin Barraclough as reviewer.

        * Scripts/modules/bugzilla.py:

2009-07-20  Kenneth Rohde Christiansen  <kenneth@webkit.org>

        Reviewed by David Levin.

        Add support for Qt's foreach to cpplint 
        https://bugs.webkit.org/show_bug.cgi?id=27386

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-18  Jan Michael Alonzo  <jmalonzo@webkit.org>

        https://bugs.webkit.org/show_bug.cgi?id=27145
        [Gtk][REGRESSION] subframe-navigate-during-main-frame-load.html fails after r45615

        Reviewed by Gustavo Noronha.

        Normalize file URLs.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (dumpHistoryItem):

2009-07-17  Peter Kasting  <pkasting@google.com>

        Reviewed by David Kilzer.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Further improve non-Cygwin SVN support.

        * Scripts/prepare-ChangeLog: Harmless change to be consistent with other
          places that consume whitespace at the end of svn output.
        * Scripts/resolve-ChangeLogs: Add support for SVN 1.6.  Slightly
          optimize svn info parsing based on technique in svn-create-patch.
          Normalize paths and consume whitespace in the same way as
          prepare-ChangeLog, for Windows systems with a non-Cygwin SVN.  Force
          diff and patch to run in binary mode so that they won't
          "intelligently" screw up line endings.

2009-07-18  Simon Fraser  <simon.fraser@apple.com>

        Fix Tiger DRT build.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (createWebViewAndOffscreenWindow):
        * DumpRenderTree/mac/PixelDumpSupportMac.mm:

2009-07-17  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Dan Bernstein.

        DRT doesn't reliably snapshot composited layers
        https://bugs.webkit.org/show_bug.cgi?id=27399
        
        If we're doing an "onscreen" pixel capture, it means that we're snapshotting a view
        with composited content. In that case we need to force the view to display so that
        the composited layers are rendered to the screen.

        * DumpRenderTree/mac/PixelDumpSupportMac.mm:
        (createBitmapContextFromWebView):

2009-07-17  Adam Barth  <abarth@webkit.org>

        Reviewed by David Levin.

        bugzilla-tool does not understand nested SVN repos
        https://bugs.webkit.org/show_bug.cgi?id=27404

        Determine the root of the working copy by looking at SVN's UUIDs.

        * Scripts/modules/scm.py:

2009-07-17  David Levin  <levin@chromium.org>

        Reviewed by Mark Rowe.

        webkit-tools-completion.sh has two typos and sorting issues.
        https://bugs.webkit.org/show_bug.cgi?id=27401

        * Scripts/webkit-tools-completion.sh: Fix two typos "--dif" and "-clean".
          Also, sort all lists including items in the case statement and flags for
          the commands.

2009-07-17  Peter Kasting  <pkasting@google.com>

        Reviewed by David Kilzer.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Tweak some regexes for correctness.

        * Scripts/prepare-ChangeLog: Allow 1-character filenames (my previous
          change here didn't quite get things right).
        * Scripts/update-webkit: Detect conflicting ChangeLogs correctly by not
          including any trailing whitespace in the name "ChangeLog", and by
          normalizing paths before calling basename() to avoid confusing it.
          (normalizePath() copied from prepare-ChangeLog.)

2009-07-17  Peter Kasting  <pkasting@google.com>

        Reviewed by Steve Falkenburg.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Only add Cygwin to the path when it isn't already there.  This avoids
        causing problems for people who purposefully have non-Cygwin versions of
        executables like svn in front of the Cygwin ones in their paths.

        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/ImageDiff.vcproj:
        * DumpRenderTree/win/TestNetscapePlugin/TestNetscapePlugin.vcproj:

2009-07-17  David Levin  <levin@chromium.org>

        Reviewed by Adam Treat.

        WebKit should have a bash completion script to aid with common commands.
        https://bugs.webkit.org/show_bug.cgi?id=27374

        * Scripts/webkit-tools-completion.sh: The script which enables option completion
          for several WebKit command line scripts.

2009-07-17  Peter Kasting  <pkasting@google.com>

        Reviewed by David Kilzer.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Avoid error spew on Macs, and fix a few other tiny details.

        * Scripts/svn-create-patch:

2009-07-17  Adam Treat  <adam.treat@torchmobile.com>

        Reviewed by Dave Levin.

        https://bugs.webkit.org/show_bug.cgi?id=27377
        This makes cpplint complain about this for instance:

            if (true)
            {
                int foo;
            }

        Add the appropriate unit tests.

        * Scripts/modules/cpplint.py:
        * Scripts/modules/cpplint_unittest.py:

2009-07-17  Adam Treat  <adam.treat@torchmobile.com>

        Reviewed by Dave Levin.

        https://bugs.webkit.org/show_bug.cgi?id=27377
        Don't filter whitespace at the end of the line.  This is not
        explicitly a rule of webkit coding style, but there is no reason
        not to warn of this common style problem.

        Don't filter whitespace newline. Now, cpplint will complain
        about the following situation:

            if (true) {
                doSomething();
                doSomethingAgain();
            }
            else
                doSomething();

        Which is a webkit coding style rule violation.

        * Scripts/modules/cpplint.py:

2009-07-17  Adam Treat  <adam.treat@torchmobile.com>

        Reviewed by Dave Levin.

        https://bugs.webkit.org/show_bug.cgi?id=27377
        Move this comment to where it belongs.

        * Scripts/modules/cpplint_unittest.py:

2009-07-17  Brent Fulgham  <bfulgham@webkit.org>

        Reviewed by Adam Roben.

        Correct crash in WinLauncher due to improper mixing of BSTR
        and TCHAR types.
        https://bugs.webkit.org/show_bug.cgi?id=27381

        * WinLauncher/WinLauncher.cpp:
        (loadURL): Perform SysReAllocString to update the BSTR with
          the contents of the TCHAR string.

2009-07-17  David Levin  <levin@chromium.org>

        Reviewed by Adam Treat.

        cpplint should flag usages of NULL.
        https://bugs.webkit.org/show_bug.cgi?id=27341

        * Scripts/modules/cpplint.py: Add the check for NULL test and call it.
          Make the collapse_strings method public.
        * Scripts/modules/cpplint_unittest.py: Add several tests to verify
          the check for NULL behavior. Adjust existing tests due to the
          new NULL check:
           1. Several had NULL removed (or were just removed completely).
           2. Two tests now do an assert that allows the caller to check
              that a particular error is one of several that was returned.

2009-07-17  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        Add a parser of patches for linter.
        https://bugs.webkit.org/show_bug.cgi?id=27363

        Adds a simple parser for unified diff format.

        * Scripts/modules/diff_parser.py: Added.
        * Scripts/modules/diff_parser_unittest.py: Added.

2009-06-30  Holger Hans Peter Freyther  <zecke@selfish.org>

        Reviewed by Simon Hausmann.

        [GTK+] Remove check to be loadable in firefox
        https://bugs.webkit.org/show_bug.cgi?id=27345

        if (aMozillaVTable->size < sizeof (NPNetscapeFuncs))
        fails in firefox but no other example in the mozilla tree is
        doing that check. Remove and be happy.

        * DumpRenderTree/gtk/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (NP_Initialize):

2009-07-17  Adam Treat  <adam.treat@torchmobile.com>

        Reviewed by Simon Hausmann.

        Something about having a single TAB in a style checking tool like this
        is equivalent to nails on a chalk board to me...

        * Scripts/modules/cpplint.py:

2009-07-17  Kenneth Rohde Christiansen  <kenneth.christiansen@openbossa.org>

        Reviewed by Simon Hausmann.

        Overwrite the plugin directories for the DRT.
        Part of https://bugs.webkit.org/show_bug.cgi?id=27215

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):

2009-07-16  Fumitoshi Ukai  <ukai@chromium.org>

        Reviewed by David Levin.

        Add --web-sockets flag and ENABLE_WEB_SOCKETS define.
        https://bugs.webkit.org/show_bug.cgi?id=27206
        
        Add --web-sockets flag.

        * Scripts/build-webkit: add --web-sockets flag.

2009-07-16  Adam Treat  <adam.treat@torchmobile.com>

        Reviewed by Dave Levin.

        cpplint should check for one line control clauses that are surrounded
        by braces
        https://bugs.webkit.org/show_bug.cgi?id=27354

        * Scripts/modules/cpplint.py: Added the new lint check.
        * Scripts/modules/cpplint_unittest.py: Add tests for the new lint check
          and fix the other tests as they were not passing this new lint check.

2009-07-16  Peter Kasting  <pkasting@google.com>

        Reviewed by David Kilzer.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Improve support for WebKit checkouts hosted inside other checkouts
        (possible for some ports, e.g. Chromium).

        * Scripts/svn-create-patch: Determine SVN root by looking for Repository
          Root string and aborting when it's missing or different than what
          we've already seen.

2009-07-16  Peter Kasting  <pkasting@google.com>

        Reviewed by Adam Roben.

        https://bugs.webkit.org/show_bug.cgi?id=27323
        Improve support for non-Cygwin SVNs on Windows.

        * Scripts/commit-log-editor: Modify regex so that trailing whitespace
          (e.g. \r) isn't included in filenames.
        * Scripts/prepare-ChangeLog: Fix a case of adding "\n" to the ChangeLog
          without normalizing.  Normalize file paths early instead of late so
          all stages of the script work.  Modify regexes so that trailing
          whitespace (e.g. \r) isn't included in filenames.
        * Scripts/svn-create-patch: Use a regex instead of chomp so we cut off
          line endings even if they don't match Perl's.

2009-07-16  Joseph Pecoraro  <joepeck02@gmail.com>

        Reviewed by Darin Adler.

        WebKitTools/Scripts/svn-create-patch is broken
        https://bugs.webkit.org/show_bug.cgi?id=27328

        * Scripts/svn-create-patch: one line fix for unusual perl behavior

2009-07-16  David Levin  <levin@chromium.org>

        Reviewed by David Kilzer.

        cpplint should check for equality comparisons to 0/true/false
        https://bugs.webkit.org/show_bug.cgi?id=27333

        * Scripts/modules/cpplint.py: Added the new lint check.
        * Scripts/modules/cpplint_unittest.py: Add tests for the new lint check
          and fix a regex that in another unit test that caused it to fail when
          you have a directory with a number in it (like WebKit-2)

2009-07-16  David D. Kilzer  <ddkilzer@webkit.org>

        <http://webkit.org/b/27241> bugzilla-tool post-commits silently fails with bad args

        Reviewed by Eric Seidel.

        * Scripts/bugzilla-tool:
        (PostCommitsAsPatchesToBug.execute): Added more error checking
        when consuming arguments.

2009-07-16  David D. Kilzer  <ddkilzer@webkit.org>

        TOOL FIX: scm.py: CommitMessage.message is ambiguous

        Fixes this error when running bugzilla-tool apply-patches
        --local-commit:

        File "bugzilla-tool", line 188, in apply_patches
          scm.commit_locally_with_message(commit_message.message() or patch['name'])
        TypeError: 'list' object is not callable

        * Scripts/modules/scm.py: After r45940 (and r45971), rename
        CommitMessage.message attribute to CommitMessage.message_lines.
        (CommitMessage.__init__):
        (CommitMessage.body):
        (CommitMessage.description):
        (CommitMessage.message):
        (CommitMessage.parse_bug_id):

2009-07-16  David D. Kilzer  <ddkilzer@webkit.org>

        TOOL FIX: bugzilla-tool: import CommitMessage class

        * Scripts/bugzilla-tool: After r45940, the CommitMessage class
        needs to be imported for commit_message_for_this_commit().

2009-07-16  David Levin  <levin@chromium.org>

        Reviewed by Maciej Stachowiak.

        prepare-ChangeLog should display the --bug option in its help text.
        https://bugs.webkit.org/show_bug.cgi?id=27334

        * Scripts/prepare-ChangeLog: Added the help text.

2009-07-15  Darin Adler  <darin@apple.com>

        * Scripts/do-webcore-rename: Check in the version used to
        rename parseURL to deprecatedParseURL.

2009-07-10  David Kilzer  <ddkilzer@apple.com>

        bugzilla-tool: create CommitMessage class

        Reviewed by Eric Seidel.

        Create a CommitMessage class to encapsulate related code.

        * Scripts/bugzilla-tool:
         (bug_id_from_commit_message): Moved to
         CommitMessage.parse_bug_id().
         (commit_message_for_this_commit): Return a CommitMessage.
         (ApplyPatchesFromBug.apply_patches): Use CommitMessage.message().
         (LandPatchesFromBugs.build_and_commit): Ditto.
         (CommitMessageForCurrentDiff.execute): Ditto.
         (PostCommitsAsPatchesToBug.execute): Switched from
         Git.commit_message_for_commit() to
         Git.commit_message_for_local_commit().  Switched from
         bug_id_from_commit_message() to CommitMessage.parse_bug_id().

         * Scripts/modules/scm.py:
         (first_non_empty_line_after_index): Added.
         (CommitMessage.__init__): Added.
         (CommitMessage.body): Added.
         (CommitMessage.description): Added.
         (CommitMessage.message): Added.
         (CommitMessage.parse_bug_id): Added.  Moved from
         bug_id_from_commit_message() in bugzilla-tool.
         (Git.commit_message_for_local_commit): Renamed from
         commit_message_for_commit().  Return a CommitMessage.

2009-07-15  Joseph Pecoraro  <joepeck02@gmail.com>

        Reviewed by David Kilzer.

        bugzilla-tool/svn-apply can't handle patches made from a non-root directory
        https://bugs.webkit.org/show_bug.cgi?id=26999

        * Scripts/svn-create-patch:

2009-07-15  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        Move cpplint.py to module directory
        https://bugs.webkit.org/show_bug.cgi?id=27302

        * Scripts/modules/cpplint.py: Renamed from WebKitTools/Scripts/cpplint.py.
        * Scripts/modules/cpplint_unittest.py: Renamed from WebKitTools/Scripts/cpplint_unittest.py.

2009-07-15  Simon Hausmann  <simon.hausmann@nokia.com>

        Reviewed by Adam Treat.

        https://bugs.webkit.org/show_bug.cgi?id=27295

        Re-implement QWebPage::shouldInterruptJavaScript to disable
        js interruption and avoid showing a messagebox during Qt DRT
        runs when script execution takes a bit longer.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::shouldInterruptJavaScript): Return false
        in re-implemented slot.

2009-07-15  Zoltan Horvath  <hzoltan@inf.u-szeged.hu>

        Reviewed by Jan Alonzo.

        Fix the DumpRenderTree GTK+ build
        https://bugs.webkit.org/show_bug.cgi?id=27290

        Set USE_SYSTEM_MALLOC macro for the DumpRenderTree build to 
        disable using TCmalloc in DumpRenderTree.

        * GNUmakefile.am:

2009-07-14  Steve Falkenburg  <sfalken@apple.com>

        Reorganize JavaScriptCore headers into:
        API: include/JavaScriptCore/
        Private: include/private/JavaScriptCore/

        Reviewed by Darin Adler.

        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/ImageDiff.vcproj:

2009-07-14  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by David Levin.

        WebKit needs a style linting tool
        https://bugs.webkit.org/show_bug.cgi?id=25884

        Modifies cpplint (http://google-styleguide.googlecode.com/svn/trunk/cpplint/)
        based on WebKit's style guide.

        * Scripts/cpplint.py: Added.
        * Scripts/cpplint_unittest.py: Added.

2009-07-14  Laszlo Gombos  <laszlo.1.gombos@nokia.com>

        Reviewed by Simon Hausmann.

        [Qt] DumpRenderTree no longer builds with Qt4.4
        https://bugs.webkit.org/show_bug.cgi?id=27257

        Flag Qt 4.5 dependency to allow building with Qt 4.4.

        * DumpRenderTree/qt/main.cpp:
        (main):

2009-07-13  Brent Fulgham  <bfulgham@webkit.org>

        Reviewed by Adam Roben.

        Add new configuration flag for redistributable Windows build.
        https://bugs.webkit.org/show_bug.cgi=27087

        * DumpRenderTree/config.h: Check for presence of WIN_CAIRO and
          select appropriate configuration. Defaults to standard Apple build.
        * DumpRenderTree/win/DumpRenderTree.vcproj: Add new WinCairo.vsprops
          to Debug_Cairo and Release_Cairo targets.

2009-07-13  Simon Hausmann  <simon.hausmann@nokia.com>

        Reviewed by Ariya Hidayat.

        Always run the Qt DRT with the raster graphicssystem on X11, for
        increased stability in the image based tests, in particular canvas.

        * DumpRenderTree/qt/main.cpp:
        (main):

2009-07-13  Simon Hausmann  <simon.hausmann@nokia.com>

        Reviewed by Ariya Hidayat.

        Fix test netscape plugin usage with the Qt DRT.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage): Enable plugins in the settings.
        * Scripts/run-webkit-tests: Set the QT_WEBKIT_PLUGIN path to the correct build
        directory to make Qt DRT find the test netscape plugin.

2009-07-13  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Ariya Hidayat.

        Make sure to disable the fixed contents size when resetting the page/view
        state between test runs, to avoid side-effects.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::open): Call setFixedContentsSize() with an invalid
        QSize to disable the fixed layout.

2009-07-13  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Ariya Hidayat.

        When creating new windows, don't forget to connect the new
        page's main frame. This ensures that for example the layoutTestController
        is also available there.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::createWindow):

2009-07-13  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Ariya Hidayat.

        Added support for LayoutTestController.setPrivateBrowsingEnabled.

        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setPrivateBrowsingEnabled):
        * DumpRenderTree/qt/jsobjects.h:

2009-07-13  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Ariya Hidayat.

        Added support for database callbacks, storage quota setting,
        and clearing of all databases.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree):
        (WebCore::DumpRenderTree::dumpDatabaseQuota):
        * DumpRenderTree/qt/DumpRenderTree.h:
        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::reset):
        (LayoutTestController::setDatabaseQuota):
        (LayoutTestController::clearAllDatabases):
        * DumpRenderTree/qt/jsobjects.h:
        (LayoutTestController::shouldDumpDatabaseCallbacks):
        (LayoutTestController::dumpDatabaseCallbacks):
        * DumpRenderTree/qt/main.cpp:
        (main):

2009-07-13  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Ariya Hidayat.

        Setup the path in the Qt DRT for HTML 5 Databases, to enable some of
        the storage layout tests.

        * DumpRenderTree/qt/main.cpp:
        (main):

2009-07-13  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Ariya Hidayat.

        Make the test output more robust by dumping only when the main
        frame finishes loading, instead of when _any_ frame finishes.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree): Connect to the
        main frame's loadFinished() signal instead of the page's one.

2009-07-13  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Ariya Hidayat.

        Implement the GCController DRT interface.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree): Allocate the GCController.
        (WebCore::DumpRenderTree::initJSObjects): Register the interface with the JS engine.
        * DumpRenderTree/qt/DumpRenderTree.h: Declare m_gcController.
        * DumpRenderTree/qt/jsobjects.cpp: Implement GCController.
        (GCController::GCController):
        (GCController::collect):
        (GCController::collectOnAlternateThread):
        (GCController::getJSObjectCount):
        * DumpRenderTree/qt/jsobjects.h: Declare GCController.

2009-07-13  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Ariya Hidayat.

        Implement the GCController DRT interface in the Qt DRT.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::DumpRenderTree): Allocate the GCController.
        (WebCore::DumpRenderTree::initJSObjects): Register the interface with the JS engine.
        * DumpRenderTree/qt/DumpRenderTree.h: Declare m_gcController.
        * DumpRenderTree/qt/jsobjects.cpp: Implement GCController.
        (GCController::GCController):
        (GCController::collect):
        (GCController::collectOnAlternateThread):
        (GCController::getJSObjectCount):
        * DumpRenderTree/qt/jsobjects.h: Declare GCController.

2009-07-13  Jan Michael Alonzo  <jmalonzo@webkit.org>

        https://bugs.webkit.org/show_bug.cgi?id=26718 [Gtk] Add support for javascript windows for DRT

        Reviewed by Gustavo Noronha and Xan Lopez.

        Support running of tests that open and close JS windows automatically.

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (dumpFramesAsText):
        (dumpBackForwardListForAllWebViews):
        (resetWebViewToConsistentStateBeforeTesting):
        (dump):
        (runTest):
        (webViewClose):
        (createWebView):
        (webViewCreate):
        (main):
        * DumpRenderTree/gtk/DumpRenderTreeGtk.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::windowCount):
        (LayoutTestController::setPopupBlockingEnabled):

2009-07-13  Shinichiro Hamaji  <hamaji@chromium.org>

        Reviewed by Maciej Stachowiak.

        prepare-ChangeLog should decode HTML entities in short description
        https://bugs.webkit.org/show_bug.cgi?id=27122

        Decode the short description by adding a function which decodes HTML
        entities. It can decode &, <, >, ", and ' . They may be sufficient
        as the description seems to be encoded by xml_quote in
        http://mxr.mozilla.org/bugzilla/source/Bugzilla/Util.pm

        * Scripts/prepare-ChangeLog:

2009-07-13  Drew Wilson  <atwilson@google.com>

        Reviewed by David Levin.

        Add ENABLE(SHARED_WORKERS) flag and define SharedWorker APIs
        https://bugs.webkit.org/show_bug.cgi?id=26932

        Added support for --shared-workers (turned off by default)

        * Scripts/build-webkit:

2009-07-12  Dan Bernstein  <mitz@apple.com>

        Reviewed by Maciej Stachowiak.

        https://bugs.webkit.org/show_bug.cgi?id=27196
        Update check-for-global-initializers for the renaming for bidi.cpp to
        RenderBlockLineLayout.cpp

        * Scripts/check-for-global-initializers:

2009-07-11  Simon Fraser  <simon.fraser@apple.com>

        Enable support for accelerated compositing and 3d transforms on Leopard.
        <https://bugs.webkit.org/show_bug.cgi?id=20166>
        <rdar://problem/6120614>

        Reviewed by Oliver Hunt.

        * Configurations/FeatureDefines.xcconfig:
        * wtf/Platform.h:

2009-07-10  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27173> svn-apply: Fix typo in git command used to find deleted files

        Reviewed by Eric Seidel.

        * Scripts/svn-apply:
        (scmWillDeleteFile): Changed 'head' to 'HEAD'.

2009-07-10  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27167> bugzilla-tool: hide help for unsupported commands

        Reviewed by Eric Seidel.

        When bugzilla-tool -h|--help is invoked in an svn working
        directory, don't print help for commands that are only supported
        on git working directories.

        * Scripts/bugzilla-tool:
        (Command.__init__): Added requires_local_commits argument with a
        default of False.  Set self.requires_local_commits attribute.
        (PostCommitsAsPatchesToBug.execute): Removed
        SCM.supports_local_commits() check since this is now handled by
        BugzillaTool.main().
        (PostCommitsAsPatchesToBug.__init__): Added
        requires_local_commits=True argument to Command.__init__().
        (BugzillaTool.commands_usage): Don't print help for commands if
        they require local commits and the current SCM doesn't support
        them.
        (BugzillaTool.main): If command_object requires local commits
        and the current SCM doesn't, exit with an error message.

2009-07-10  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27117> bugzilla-tool: use Mac OS X keychain for authentication

        Reviewed by Eric Seidel.

        Try reading credentials from git config first, then keychain if
        running on Mac OS X, else prompt at the command-line.

        * Scripts/modules/bugzilla.py: Added "import platform".
        (credentials_from_git): Added.
        (credentials_from_keychain): Added.
        (is_mac_os_x): Added.
        (read_credentials): Added.
        (Bugzilla.__init__): Moved instance attribute bug_server to a
        static attribute named bug-server_url.
        (Bugzilla.bug_server_host): Added.  Extracted host name from
        bug_server_url.
        (Bugzilla.bug_server_regex): Updated to be created using
        bug_server_host.
        (Bugzilla.bug_server_url): Renamed from bug_server.
        (Bugzilla.bug_url_for_bug_id): Updated for renaming of
        bug_server to bug_server_url.
        (Bugzilla.attachment_url_for_id): Ditto.
        (Bugzilla.fetch_bug_ids_from_commit_queue): Ditto.
        (Bugzilla.authenticate): Ditto.  Updated to use
        read_credentials().
        (Bugzilla.add_patch_to_bug): Ditto.

2009-07-10  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27115> bugzilla-tool: extract duplicate logging methods into a module

        Reviewed by Adam Roben.

        * Scripts/bugzilla-tool: Removed error() and log() methods and
        added import of new logging module.
        * Scripts/modules/bugzilla.py: Ditto.  Removed "import sys".
        * Scripts/modules/scm.py: Ditto.

        * Scripts/modules/logging.py: Added.
        (log): Added.
        (error): Added.  Prefix error messages with "ERROR: ".

2009-07-10  Adam Roben  <aroben@apple.com>

        Sort all our Xcode projects

        Accomplished using sort-Xcode-project-file.

        Requested by Dave Kilzer.

        * DrawTest/DrawTest.xcodeproj/project.pbxproj:
        * DumpRenderTree/DumpRenderTree.xcodeproj/project.pbxproj:
        * WebKitLauncher/WebKitLauncher.xcodeproj/project.pbxproj:

2009-07-10  Adam Roben  <aroben@apple.com>

        Print prepare-ChangeLog's reminders to STDERR so they don't end up in
        the diff output

        Fixes REGRESSION (r45647): prepare-ChangeLog -d puts non-diff lines
        into the diff
        <https://bugs.webkit.org/show_bug.cgi?id=27150>

        Reviewed by Maciej Stachowiak.

        * Scripts/prepare-ChangeLog:

2009-07-08  Adam Roben  <aroben@apple.com>

        Use case-insensitive comparisons when sorting Xcode project files

        This matches the sorting used in Xcode's files list.

        Fixes Bug 27079: sort-Xcode-project-file should sort
        case-insensitively, to match Xcode's files list
        <https://bugs.webkit.org/show_bug.cgi?id=27079>

        Reviewed by Dave Kilzer.

        * Scripts/sort-Xcode-project-file:
        (sortChildrenByFileName):
        (sortFilesByFileName):
        Lowercase the strings before comparing them so that the comparison
        will be case-insensitive.

2009-07-08  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Holger Freyther.

        https://bugs.webkit.org/show_bug.cgi?id=27109

        Fix side-effects in the Qt DRT with tests using application fonts.

        Detect if a test used application fonts and re-initialize the fontconfig
        application fontset accordingly.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::open): call initializeFonts and remove all application fonts
        after running a testcase.
        (WebCore::DumpRenderTree::initializeFonts): Moved fontconfig initialization code
        here from main.
        * DumpRenderTree/qt/DumpRenderTree.h: Declare initializeFonts.
        * DumpRenderTree/qt/main.cpp:
        (main): Moved fontconfig initialization code to DRT::initializeFonts.

2009-07-10  Antonio Gomes   <antonio.gomes@openbossa.org>

        Reviewed by Simon Hausmann.

        [QT] [ARM] Add pkg-config entry for FontConfig on DRT.pro
        https://bugs.webkit.org/show_bug.cgi?id=26990

        Missing pkg-config entry for FontConfig in DRT.pro causes some compilers to
        not link fine against FontConfig bits.

        * DumpRenderTree/qt/DumpRenderTree.pro:

2009-07-09  Drew Wilson  <atwilson@google.com>

        Reviewed by Alexey Proskuryakov.

        https://bugs.webkit.org/show_bug.cgi?id=26903

        Turned on CHANNEL_MESSAGING by default because the MessageChannel API
        can now be implemented for Web Workers and is reasonably stable.

        * Scripts/build-webkit:

2009-07-09  David Kilzer  <ddkilzer@apple.com>

        <http://webkit.org/b/27114> bugzilla-tool: Parse short bug URL from commit log messages

        Reviewed by Adam Roben.

        * Scripts/bugzilla-tool:
        (bug_id_from_commit_message): Check for the short bug URL before
        checking for the longer bugs.webkit.org URL.

2009-07-08  David Kilzer  <ddkilzer@apple.com>

        Bug 27062: bugzilla-tool: post-commits should read bug id from commit log and actually work

        <https://bugs.webkit.org/show_bug.cgi?id=27062>

        Reviewed by Eric Seidel.

        Removed the required BUGID argument from the "post-commits"
        command and replaced it with a -b|--bug-id switch or parsing the
        commit log message for the bug URL.  Fixed a bug in the
        "post-commits" that would ignore the COMMITISH used and post a
        patch of local changes against HEAD.  Added --no-commit switch
        to disable using the bulk of the ChangeLog entry as the comment
        for the new patch.

        * Scripts/bugzilla-tool:
        (bug_id_from_commit_message): Added.  Returns a bug id from the
        commit log message, thus enforcing the need for a bug URL in the
        message.
        (PostCommitsAsPatchesToBug.__init__): Updated help description
        to match new behavior of pulling bug ids from commit log
        messages instead of from the command line.  Added -b|--bug-id
        switch and --no-comment switch.
        (PostCommitsAsPatchesToBug.execute): Updated to use
        bug_id_from_commit_message() to pull bug ids from commit log
        messages.  Also switched from SCM.create_patch() to use
        SCM.create_patch_from_local_commit() to fix a bug where local
        repository changes were posted as a patch instead of the
        specific COMMITISH.  Fall back to -b|--bug-id if no URL is found
        in the commit log message.  Don't specify a comment for the
        patch if --no-comment is used.  Set cherry_pick argument to True
        for Git.commit_ids_from_range_arguments() since we don't want
        implicit commit range behavior for this command.

        * Scripts/modules/bugzilla.py: Import datetime module.
        (timestamp): Added.  Returns a timestamp in the form of
        "YYYYMMDDhhmmss".
        (Bugzilla.bug_server_regex): Added static attribute.
        (Bugzilla.add_patch_to_bug): Construct a more meaningful patch
        file name using the bug_id and timestamp().

        * Scripts/modules/scm.py:
        (SCM.create_patch_from_local_commit): Added.
        (Git.create_patch_from_local_commit): Added.  Runs "git diff" to
        return a patch for the given commit_id.

2009-07-08  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Mark Rowe.

        Make prepare-ChangeLog less shouty
        https://bugs.webkit.org/show_bug.cgi?id=27098

        * Scripts/prepare-ChangeLog:

2009-07-08  David Kilzer  <ddkilzer@apple.com>

        Bug 27083: bugzilla.py: Clean up bug_server use

        <https://bugs.webkit.org/show_bug.cgi?id=27083>

        Reviewed by Darin Adler.

        * Scripts/modules/bugzilla.py:
        (Bugzilla.fetch_bug_ids_from_commit_queue): Use bug_server
        instead of hard-coding the URL.
        (Bugzilla.authenticate): Remove extra '/' before URL path.
        (Bugzilla.add_patch_to_bug): Ditto.

2009-07-08  Brent Fulgham  <bfulgham@webkit.org>

        Build fix for Windows Cairo.

        Cairo build was incorrectly #including the PixelDumpSupportCG.h
        instead of PixelDumpSupportCairo.h

        * DumpRenderTree/win/PixelDumpSupportWin.cpp: Correct #include

2009-07-08  David Faure  <faure@kde.org>

        Reviewed by Ariya Hidayat.

        Small documentation improvement for build-webkit --help

        * Scripts/build-webkit: mention --debug option

2009-07-07  Brady Eidson  <beidson@apple.com>

        Tiger build fix, work around missing NSString API.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (dumpHistoryItem):

2009-07-07  Brady Eidson  <beidson@apple.com>

        Reviewed by Mark Rowe.

        https://bugs.webkit.org/show_bug.cgi?id=27049 - In dumpBackForwardList() mode, DRT should normalize file urls.

        Make the dump of a history item agnostic to the layout of filesystem on the testing machine.

        * DumpRenderTree/mac/DumpRenderTree.mm:
        (dumpHistoryItem):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (dumpHistoryItem):

2009-07-07  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Rubber-stamped by Simon Hausmann.

        Correct git url of the Qt test-fonts.

        * DumpRenderTree/qt/main.cpp:
        (main):

2009-07-07  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Holger Freyther.

        Clear the main frame's name between loading pages, like in r36652. This
        reduces the side-effects between test cases.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::open):

2009-07-06  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Holger Freyther.

        Fix various layout tests with Qt's DRT.

        Remember to set the focus on the web page before
        loading.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::DumpRenderTree::open):

2009-07-07  Simon Hausmann  <hausmann@webkit.org>

        Reviewed by Tor Arne Vestbø and Holger Freyther.

        Fix timeout timer handling in Qt DRT.

        Use QBasicTimer instead of startTimer/killTimer, to fix the
        problem that starting the timeout timer did not stop a
        previously started timer, causing multiple emissions of timeout.
        The timerEvent() implementation now also checks the timer id, to
        protect against double timeouts.

        * DumpRenderTree/qt/jsobjects.cpp:
        (LayoutTestController::LayoutTestController):
        (LayoutTestController::reset):
        (LayoutTestController::waitUntilDone):
        (LayoutTestController::notifyDone):
        (LayoutTestController::timerEvent):
        * DumpRenderTree/qt/jsobjects.h:

2009-07-06  Eric Seidel  <eric@webkit.org>

        Reviewed by Maciej Stachowiak.

        bugzilla-tool fails to close bugs with bugzilla 3.0
        https://bugs.webkit.org/show_bug.cgi?id=27008

        Update bugzilla.py to match changes in the bug page "changeform"
        Update scm.py to add bug_ids to attachments to make error reporting nicer.

        * Scripts/modules/bugzilla.py:
        * Scripts/modules/scm.py:

2009-07-03  Maciej Stachowiak  <mjs@apple.com>

        Reviewed by Eric Seidel.

        bugzilla-tool forgot how to obsolete patches
        https://bugs.webkit.org/show_bug.cgi?id=26951

        * Scripts/modules/bugzilla.py:

2009-07-02  Brent Fulgham  <bfulgham@webkit.org>

        Unreviewed build fix (Cairo this time) for DumpRenderTree.
        Put Cairo code back in, but use original include order
        for the CG stuff to avoid compile issues.

        * DumpRenderTree/win/PixelDumpSupportWin.cpp:
        (createBitmapContextFromWebView):

2009-07-02  Eric Seidel  <eric@webkit.org>

        Correct blatant typo (missing []), no review.

        * Scripts/modules/scm.py:

2009-07-02  Brent Fulgham  <bfulgham@webkit.org>

        Windows build fix, no review.


        Reverting PixelDumpSupportWin.cpp change to avoid strange
        error on the build-bot.
 
        * DumpRenderTree/win/PixelDumpSupportWin.cpp:
        (createBitmapContextFromWebView):

2009-07-02  Brent Fulgham  <bfulgham@webkit.org>

        Build fix, no review.

        * DumpRenderTree/config.h:

2009-07-02  Eric Seidel  <eric@webkit.org>

        Reviewed by David Levin.

        bugzilla-tool needs to handle login failure
        https://bugs.webkit.org/show_bug.cgi?id=26913

        We now exit(1) on login failure.

        * Scripts/modules/bugzilla.py:

2009-06-30  Brent Fulgham  <bfulgham@webkit.org>

        Reviewed by Adam Roben.

        Add build support for a Windows Cairo version of
        DumpRenderTree.  Share as much logic between the
        CG and Cairo builds as possible.
        https://bugs.webkit.org/show_bug.cgi?id=26457

        * DumpRenderTree/PixelDumpSupport.cpp: Added.
        (dumpWebViewAsPixelsAndCompareWithExpected): Moved common logic
          from CG-specific file.
        (printPNG): Moved common logic from CG-specific file.
        * DumpRenderTree/PixelDumpSupport.h: Add declaration for new
          common printPNG function.
        * DumpRenderTree/cairo: Added.
        * DumpRenderTree/cairo/PixelDumpSupportCairo.cpp: Added.
          Implement cairo-specific logic for dealing with Cairo surfaces.
        (writeFunction):
        (printPNG): Cairo-specific PNG handling logic.
        (computeMD5HashStringForBitmapContext): New Cairo routine using
          the generic BitmapContext signature.
        (dumpBitmap): New function containing Cairo-specific portions of
          the dumping routine.
        * DumpRenderTree/cairo/PixelDumpSupportCairo.h: Added.
          Provide Cairo version of the BitmapContext structure so that
          dumping routines can work on an abstract type.
        (BitmapContext::createByAdoptingBitmapAndContext):
        (BitmapContext::~BitmapContext):
        (BitmapContext::cairoContext):
        (BitmapContext::BitmapContext):
        * DumpRenderTree/cg/PixelDumpSupportCG.cpp:
        (printPNG): CG-specific PNG handling logic.
        (computeMD5HashStringForBitmapContext): Revised to use generic
          BitmapContext signature.
        (dumpBitmap): New function containing CG-specific portions of
          the dumping routine.
        * DumpRenderTree/cg/PixelDumpSupportCG.h: Add new signatures.
        * DumpRenderTree/win/DumpRenderTree.cpp: Disable CFNetwork logic
          when building the non-CFNetwork version.
        (main):
        * DumpRenderTree/win/DumpRenderTree.vcproj:
        * DumpRenderTree/win/PixelDumpSupportWin.cpp:
        (createBitmapContextFromWebView): Provide parallel Cairo implementation
          of CG bitmap/context setup.

2009-07-02  Eric Seidel  <eric@webkit.org>

        No review, just adding Antti as a reviewer.

        * Scripts/modules/bugzilla.py:

2009-07-02  Antonio Gomes   <antonio.gomes@openbossa.org>

        Reviewed by Simon Hausmann.

        https://bugs.webkit.org/show_bug.cgi?id=26896

        [Qt] Set DRT's default fontsize to 13.

        * DumpRenderTree/qt/DumpRenderTree.cpp:
        (WebCore::WebPage::WebPage):

2009-07-01  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Barth.

        bugzilla-tool fails for SVN users
        https://bugs.webkit.org/show_bug.cgi?id=26914

        To fix this I moved svn from -F - to using -m
        In order for -m to work I had to move us off of shell=True
        To move off of shell=True all call sites for run_command
        which take args, need to pass their args as an list instead of a string.

        In order for the final bug update to work correctly, I had to
        abstract the way that we parse out revision numbers from the commit text.

        * Scripts/bugzilla-tool:
        * Scripts/modules/scm.py:

2009-07-01  Eric Seidel  <eric@webkit.org>

        Reviewed by Maciej Stachowiak.

        prepare-ChangeLog should have a --bug= argument and use it for url autofill
        https://bugs.webkit.org/show_bug.cgi?id=26383

        prepare-ChangeLog now knows how to grab the bug title from bugs.webkit.org
        I also added a bit more template text in an effort to get better ChangeLogs
        from casual contributers.

        * Scripts/prepare-ChangeLog:

2009-07-01  Eric Seidel  <eric@webkit.org>

        Reviewed by Adam Roben.

        prepare-ChangeLog should fail when EMAIL_ADDRESS or REAL_NAME are missing:
        https://bugs.webkit.org/show_bug.cgi?id=26692

        I also made prepare-ChangeLog sanity-check names and email addresses a little.
        Names must contain a space, and email addresses must contain '@'

        Also "fixed" $email_address to $emailAddress.  This script uses mixed variable name styles.

        * Scripts/prepare-ChangeLog:

2009-07-01  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Beth Dakin.

        Bug 26900: AX: Manual spell check with Command-; does not bring up suggestions
        https://bugs.webkit.org/show_bug.cgi?id=26900

        Expose the ability to get the click point of an element through accessibility.

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (getClickPointXCallback):
        (getClickPointYCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::clickPointX):
        (AccessibilityUIElement::clickPointY):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::clickPointX):
        (AccessibilityUIElement::clickPointY):

2009-07-01  Mark Rowe  <mrowe@apple.com>

        Reviewed by Simon Fraser.

        Change how WebKitNightlyEnabler.dylib lies about Safari's identity to LaunchServices.
        This makes WebKit.app behave as expected when set as the default web browser on a wider
        range of OS versions.

        * WebKitLauncher/WebKitNightlyEnabler.m:
        (poseAsWebKitApp):
        (enableWebKitNightlyBehaviour):

2009-07-01  Mark Rowe  <mrowe@apple.com>

        Reviewed by Simon Fraser.

        Shuffle some code around in preparation for a change to how poseAsWebKitApp works.

        * WebKitLauncher/WebKitNightlyEnabler.m:
        (systemVersion):
        (webKitLauncherBundle):
        (insideSafari4OnTigerTrampoline):

2009-06-30  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Jan Alonzo.

        https://bugs.webkit.org/show_bug.cgi?id=26877
        [GTK] DRT fixes to pass new plugin test

        Silence compiler warnings.

        Newer GCC don't like using or returning a static string where a
        'char*' is expected. Ideally we'd change the function signatures
        to return or take 'const char*' I suppose, but since we can't do
        that just cast the strings to 'char*'.

        * DumpRenderTree/gtk/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_get_value):

2009-06-30  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Jan Alonzo.

        https://bugs.webkit.org/show_bug.cgi?id=26877
        [GTK] DRT fixes to pass new plugin test

        Use the common pluginLog function instead of a local copy.

        * DumpRenderTree/gtk/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_new_instance):
        (webkit_test_plugin_destroy_instance):
        (webkit_test_plugin_set_window):
        (webkit_test_plugin_handle_event):

2009-06-30  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Jan Alonzo.

        https://bugs.webkit.org/show_bug.cgi?id=26877
        [GTK] DRT fixes to pass new plugin test

        Modify our DRT as done in bug #15457 to log logSrc as src in order
        to pass test plugins/netscape-plugin-map-data-to-src.html.

        * DumpRenderTree/gtk/TestNetscapePlugin/TestNetscapePlugin.cpp:
        (webkit_test_plugin_new_instance):

2009-06-30  Adrien Nader  <camaradetux@gmail.com>

        Reviewed by Jan Alonzo.

        [GTK] GtkLauncher depends on gtk+2-2.15 because of gtk_orientable_set_orientation()
        https://bugs.webkit.org/show_bug.cgi?id=26835

        * GtkLauncher/main.c:
        (create_toolbar):

2009-06-30  Eric Seidel  <eric@webkit.org>

        Typo fix only, no review.

        Fix typo causing failure during land-diff

        * Scripts/bugzilla-tool:

2009-06-30  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Dan Bernstein.
        
        Fix drawing of view background in pixel snapshots when using compositing.
        We still need to call -displayIfNeeded to ensure that the NSView drawing
        has happened.

        * DumpRenderTree/mac/PixelDumpSupportMac.mm:
        (createBitmapContextFromWebView):

2009-06-30  Simon Fraser  <simon.fraser@apple.com>

        Reviewed by Mark Rowe.

        createBitmapContextFromWebView() incorrectly used #ifdef BUILDING_ON_LEOPARD,
        and thus failed on SnowLeopard.
        
        * DumpRenderTree/mac/PixelDumpSupportMac.mm:
        (createBitmapContextFromWebView):

2009-06-30  Eric Seidel  <eric@webkit.org>

        Reviewed by Nikolas Zimmermann.

        Make bugzilla tool print a message explaining how to get help on failure:
        https://bugs.webkit.org/show_bug.cgi?id=26861

        % bugzilla-tool
        Usage: bugzilla-tool [options] command [command-options] [command-arguments]

        bugzilla-tool: error: No command specified

        Type 'bugzilla-tool --help' to see usage.

        * Scripts/bugzilla-tool:

2009-06-30  Eric Seidel  <eric@webkit.org>

        Reviewed by Maciej Stachowiak.

        Include a built copy of BeautifulSoup 3.1.0.1 so that
        bugzilla-tool users do not need to install it manually.
        https://bugs.webkit.org/show_bug.cgi?id=26833

        BeautifulSoup is BSD-licensed (thus WebKit compatible) and available from:
        http://www.crummy.com/software/BeautifulSoup

        * Scripts/bugzilla-tool: fixed a typo in a log message.
        * Scripts/modules/BeautifulSoup.py: Added.
        * Scripts/modules/bugzilla.py:

2009-06-30  Eric Seidel  <eric@webkit.org>

        Reviewed by Simon Hausmann.

        Fix our create_patch handling to not
        hang when creating large patches.
        https://bugs.webkit.org/show_bug.cgi?id=26834

        We're now using StringIO to make an in-memory buffer for the patch
        instead of piping from the patch command directly to the upload.
        The previous hang was caused by calling wait() when the process had already
        filed the stdout buffer.

        * Scripts/modules/scm.py:

2009-06-29  Sam Weinig  <sam@webkit.org>

        Reviewed by Mark Rowe.

        Remove more unused scons support.

        * Scripts/build-jsc:
        * Scripts/build-webkit:
        * Scripts/webkitdirs.pm:

2009-06-26  Eric Seidel  <eric@webkit.org>

        Reviewed by David Levin.

        Rename land-and-update to land-diff and make it awesome.
        https://bugs.webkit.org/show_bug.cgi?id=26734

        Renamed land-and-update to land-diff
        Made the BUGID argument optional.
        Added optional support for building and testing before landing.

        land-diff [options] [BUGID]    Lands the current working directory diff and updates the bug if provided.
          Options:
            -r REVIEWER, --reviewer=REVIEWER
                              Update ChangeLogs to say Reviewed by REVIEWER.
            --no-close        Leave bug open after landing.
            --no-build        Commit without building first, implies --no-test.
            --no-test         Commit without running run-webkit-tests.

        * Scripts/bugzilla-tool:

2009-06-28  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Gtk build fix - include stdarg.h for va_start/va_end.

        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp:

2009-06-28  John Abd-El-Malek  <jam@chromium.org>

        https://bugs.webkit.org/show_bug.cgi?id=15457

        Modify NPAPI test plugin to verify that "src" paramater is added when
        it's missing but "data" is present.

        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.cpp:
        (pluginLog):
        * DumpRenderTree/TestNetscapePlugIn.subproj/PluginObject.h:
        * DumpRenderTree/TestNetscapePlugIn.subproj/main.cpp:
        (NPP_New):
        (NPP_Destroy):
        (NPP_SetWindow):
        (handleEventCarbon):
        (handleEventCocoa):
        * DumpRenderTree/win/TestNetscapePlugin/main.cpp:
        (NPP_New):

2009-06-27  Emilio Pozuelo Monfort  <pochu27@gmail.com>

        Reviewed by Jan Alonzo.

        [GTK] Don't use deprecated GTK+ symbols.
        https://bugs.webkit.org/show_bug.cgi?id=26583

        * GtkLauncher/main.c:
        (create_toolbar):

2009-06-26  Adam Barth  <abarth@webkit.org>

        Reviewed by Eric Seidel.

        Make SVN work (again?).

        * Scripts/modules/scm.py:

2009-06-26  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Oliver Hunt.

        Add ability to query isEnabled

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (getIsEnabledCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::isEnabled):
        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::isEnabled):

2009-06-26  Brady Eidson  <beidson@apple.com>

        Reviewed by Sam Weinig

        <rdar://problem/6961578> REGRESSION (r43511): Opening .fdf files from Acrobat Professional fails

        Add a dumpResourceResponseMIMETypes() mode so the ResourceLoadDelegate will dump the mime type from
        the NSURLResponse.  Needed for the test for this bug fix.

        * DumpRenderTree/LayoutTestController.cpp:
        (LayoutTestController::LayoutTestController):
        (dumpResourceResponseMIMETypesCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        (LayoutTestController::dumpResourceResponseMIMETypes):
        (LayoutTestController::setDumpResourceResponseMIMETypes):

        * DumpRenderTree/mac/ResourceLoadDelegate.mm:
        (-[ResourceLoadDelegate webView:resource:didReceiveResponse:fromDataSource:]):

2009-06-26  David Kilzer  <ddkilzer@apple.com>

        Update build-dumprendertree to use buildXCodeProject()

        Reviewed by Adam Roben.

        * Scripts/build-dumprendertree: Updated to use
        buildXCodeProject() when building for isAppleMacWebKit().  This
        provides additional command-line switch parsing for free.  Also
        added --clean and --help switches.  Updated copyright.

2009-06-26  Eric Seidel  <eric@webkit.org>

        Reviewed by Tor Arne Vestbø.

        Remove non-sense --update option to land-patches
        and make land-patches update before every patch application.
        This makes it slightly less likely that multi-patch landings will fail.

        Also updated git diff command to include staged modifications.

        * Scripts/bugzilla-tool:
        * Scripts/modules/scm.py:

2009-06-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Jan Alonzo.

        Fix obsolete_attachment to work when passed a comment.
        https://bugs.webkit.org/show_bug.cgi?id=26745

        * Scripts/modules/bugzilla.py:

2009-06-25  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Reviewed by Mark Rowe.

        bugzilla-tool apply-patch throws exception in Linux
        https://bugs.webkit.org/show_bug.cgi?id=26738

        HEAD is case-sensitive in Linux. Convert uses of head to HEAD in
        the scm module.

        * Scripts/modules/scm.py:

2009-06-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Jan Alonzo.

        bugzilla-tool post-diff needs to obsolete old patches before posting
        https://bugs.webkit.org/show_bug.cgi?id=26740

        I've also added a --no-obsolete to disable this behavior.
        
        I also finally updated the bug page parsing to use XML. So much less code!

        * Scripts/bugzilla-tool:
        * Scripts/modules/bugzilla.py:

2009-06-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Mark Rowe.

        Call WebKitTools/Scripts scripts by their absolute paths
        https://bugs.webkit.org/show_bug.cgi?id=26704

        bugzilla-tool used to use whatever build-webkit was in your path.
        That could end up building the wrong copy of WebKit.

        * Scripts/bugzilla-tool:
        * Scripts/modules/scm.py:

2009-06-25  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Dave Levin.

        Use unicode() instead of str when reading from bugzilla.
        Also add Simon Fraser as a reviewer.
        https://bugs.webkit.org/show_bug.cgi?id=26719

        * Scripts/modules/bugzilla.py:

2009-06-25  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Simon Hausmann.

        Use Q_ASSERT in Qt's DumpRenderTree instead of JSC's ASSERT
        
        The WTFReportAssertionFailure function in JSC is not exported when
        building QtWebKit in both debug and release on Mac, so DRT fails to
        link.
        
        We can revert this patch once the Qt port builds JSC as a separate
        library, and we add the proper export macros to Assertions.cpp

        * DumpRenderTree/qt/WorkQueue.cpp:
        (WorkQueue::queue):
        (WorkQueue::dequeue):

2009-06-25  Tor Arne Vestbø  <tor.arne.vestbo@nokia.com>

        Reviewed by Jan Alonzo.

        bugzilla-tool: Add Simon Hausmann as reviewer

        * Scripts/modules/bugzilla.py:

2009-06-24  Eric Seidel  <eric@webkit.org>

        Reviewed by Dave Levin.

        Support local commits during apply-patches
        and let land-patches take multiple bug ids.
        https://bugs.webkit.org/show_bug.cgi?id=26703

        I also restructured parts of land-patches into
        class methods and static methods in preparation
        for future code sharing with other commands.

        * Scripts/bugzilla-tool:
        * Scripts/modules/bugzilla.py:
        * Scripts/modules/scm.py:

2009-06-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Tor Arne Vestbø.

        Make svn-apply work with Git too
        https://bugs.webkit.org/show_bug.cgi?id=26299
        
        Add an --force option to svn-apply and otherwise make svn-apply
        exit non-zero when patch application fails.
        https://bugs.webkit.org/show_bug.cgi?id=26300

        I did not update svn-unapply, because it makes no sense in a Git world.
        You don't roll in and out patch files.  You make commits and deal with those.
        Git users can just git reset --hard to get the same functionality.

        * Scripts/svn-apply:

2009-06-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Tor Arne Vestbø.

        Remove use of os.system to fix reviewers with unicode chars in their names
        https://bugs.webkit.org/show_bug.cgi?id=26713

        Also change to latin1 encoding of ø to make python happy.

        * Scripts/modules/bugzilla.py:
        * Scripts/modules/scm.py:

2009-06-25  Eric Seidel  <eric@webkit.org>

        Reviewed by Tor Arne Vestbø.

        Add Adam Roben and Tor Arne Vestbø to the reviewers list.

        * Scripts/modules/bugzilla.py:

2009-06-24  Chris Fleizach  <cfleizach@apple.com>

        Windows build fix.

        * DumpRenderTree/win/AccessibilityUIElementWin.cpp:
        (AccessibilityUIElement::language):

2009-06-24  Chris Fleizach  <cfleizach@apple.com>

        Reviewed by Oliver Hunt.

        Bug 26668: AX: need a way to retrieve the language for an element
        Support ability to retrieve AXLanguage for testing

        * DumpRenderTree/AccessibilityUIElement.cpp:
        (getLanguageCallback):
        (AccessibilityUIElement::getJSClass):
        * DumpRenderTree/AccessibilityUIElement.h:
        * DumpRenderTree/mac/AccessibilityUIElementMac.mm:
        (AccessibilityUIElement::language):

2009-06-24  Eric Seidel  <eric@webkit.org>

        Reviewed by Maciej Stachowiak.
        
        Spell Maciej's name right and add Brady Eidson.

        * Scripts/modules/bugzilla.py:

2009-06-23  Eric Seidel  <eric@webkit.org>

        Reviewed by Dave Levin.

        Fix missing comment message during land-patches and SVN.commit_with_message respecting --dry-run
        https://bugs.webkit.org/show_bug.cgi?id=26669

        * Scripts/bugzilla-tool:
        * Scripts/modules/scm.py:

2009-06-23  Takeshi Yoshino  <tyoshino@google.com>

        Reviewed by Mark Rowe.

        Bug 26537: Builds from command-line fail if custom build product directory is set and ~/Library/Preferences/xcodebuild.plist exists
        https://bugs.webkit.org/show_bug.cgi?id=26537

        Let determineBaseProductDir subroutine remove
        ~/Library/Preferences/xcodebuild.plist. It can prevent xcodebuild from
        respecting global settings such as a custom build products directory
        (<rdar://problem/5585899>).

        * Scripts/webkitdirs.pm:

2009-06-23  Eric Seidel  <eric@webkit.org>

        Reviewed by Dave Levin.

        Make SCM.run_command smarter, and make all previous
        os.system and subprocess.popen use SCM.run_command instead.
        https://bugs.webkit.org/show_bug.cgi?id=26666

        This makes it easier to handle errors in a standard way throughout all the code.
        Since this new code raises by default when the exit_code != 0,
        we should prevent future problems of bugzilla-tool continuing after
        a git or svn command failed.

        * Scripts/modules/scm.py:

2009-06-23  Joe Mason  <joe.mason@torchmobile.com>

        Reviewed by Adam Treat.

        https://bugs.webkit.org/show_bug.cgi?id=26664
        * Scripts/prepare-ChangeLog: Added --git-index mode to list only the
        changes which are already staged in the index.  Useful to create an
        entry for what you're about to commit while ignoring unstaged changes.

2009-06-23  Anders Carlsson  <andersca@apple.com>

        Reviewed by Darin Adler.
        
        Update for WebKit changes.
        
        * DumpRenderTree/win/UIDelegate.h:
        (UIDelegate::willPerformDragSourceAction):

2009-06-23  Eric Seidel  <eric@webkit.org>

        Reviewed by Mark Rowe.

        * Scripts/modules/scm.py: Fix commit_with_message to return the commit output.

2009-06-23  Eric Seidel  <eric@webkit.org>

        Reviewed by Mark Rowe.

        * Scripts/modules/scm.py: Fix error seen when commiting r44979.

2009-06-18  Eric Seidel  <eric@webkit.org>

        Reviewed by Dave Levin.

        WebKit needs a script to interact with bugzilla and automate
        parts of the patch posting and commit processes.
        https://bugs.webkit.org/show_bug.cgi?id=26283

        This is really a first-draft tool.
        It's to the point where it's useful to more people than just me now though.
        Git support works.  SVN support is written, but mostly untested.

        This tool requires BeautifulSoup and mechanize python modules to run:
        sudo easy_install BeautifulSoup
        sudo easy_install mechanize

        More important than the tool itself are the Bugzilla, Git and SVN class abstractions
        which I hope will allow easy writing of future tools.

        The tool currently implements 10 commands, described below.

        Helpers for scripting dealing with the commit queue:
        bugs-to-commit                 Bugs in the commit queue
        patches-to-commit              Patches attached to bugs in the commit queue

        Dealing with bugzilla:
        reviewed-patches BUGID         r+'d patches on a bug
        apply-patches BUGID            Applies all patches on a bug to the local working directory without committing.
        land-and-update BUGID          Lands the current working directory diff and updates the bug.
        land-patches [options] BUGID   Lands all patches on a bug optionally testing them first
        obsolete-attachments BUGID     Marks all attachments on a bug as obsolete.
        commit-message                 Prints a commit message suitable for the uncommitted changes.

        These effectively replace git-send-bugzilla:
        post-diff BUGID                Attaches the current working directory diff to a bug as a patch file.
        post-commits BUGID COMMITISH   Attaches a range of local commits to a bug as patch files.

        post-diff works for SVN and Git, post-commits only works for SCMs with local-commit support (like Git)

        land-* commands in a Git environment only work with simple patches due to svn-apply bugs:
        https://bugs.webkit.org/show_bug.cgi?id=26299
        https://bugs.webkit.org/show_bug.cgi?id=26300

        This script follows python style (similar to how for Obj-C we follow AppKit style)
        http://www.python.org/doc/essays/styleguide.html
        The Python community has a strong style culture and the WebKit style guide is silent re: Python.

        I've filed a bug to update the WebKit style guide to mention python:
        https://bugs.webkit.org/show_bug.cgi?id=26524

        * Scripts/bugzilla-tool: Added.

2009-06-22  Steve Falkenburg  <sfalken@apple.com>

        Remove errant line of code mistakenly checked in.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (main):

2009-06-22  Steve Falkenburg  <sfalken@apple.com>

        Pass correct value to setShouldPaintNativeControls.
        
        Rubber stamped by Mark Rowe.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (main):

2009-06-22  Steve Falkenburg  <sfalken@apple.com>

        Fix last DumpRenderTree change to correctly set preferences flag without crashing.
        
        Reviewed by Mark Rowe.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (main):

2009-06-21  Steve Falkenburg  <sfalken@apple.com>

        Set up global native controls flag before creating the first WebView.
        
        Reviewed by Darin Adler.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (main):

2009-06-21  Mark Rowe  <mrowe@apple.com>

        Reviewed by Sam Weinig.

        Set a sensible user agent string for the HTTP requests that Sparkle makes (checking for and downloading updates).

        * WebKitLauncher/WebKitNightlyEnablerSparkle.m:
        (userAgentStringForSparkle):
        (initializeSparkle):

2009-06-21  Mark Rowe  <mrowe@apple.com>

        Reviewed by Sam Weinig.

        Add a hook to the WebKit launcher application to allow a link on the nightly build start page to
        trigger an update via the built-in software update mechanism.

        * WebKitLauncher/WebKitLauncher.xcodeproj/project.pbxproj:
        * WebKitLauncher/WebKitLauncherURLProtocol.h: Added.
        * WebKitLauncher/WebKitLauncherURLProtocol.m: Added.
        (+[WebKitLauncherURLProtocol load]):
        (+[WebKitLauncherURLProtocol canInitWithRequest:]): Only allow use of the x-webkit-launcher scheme from .webkit.org subdomains.
        (+[WebKitLauncherURLProtocol canonicalRequestForRequest:]):
        (-[WebKitLauncherURLProtocol startLoading]):
        (-[WebKitLauncherURLProtocol stopLoading]):
        (-[WebKitLauncherURLProtocol handleIsWebKitLauncherAvailableJS]): Return a brief JavaScript snippet that can be used to programatically
        determine whether the x-webkit-launcher is available and working.
        (-[WebKitLauncherURLProtocol handleCheckForUpdates]): Trigger a software update on the main thread.
        (-[WebKitLauncherURLProtocol resourceNotFound]): Fail with a generic "File does not exist" error.

2009-06-20  Jan Michael Alonzo  <jmalonzo@webkit.org>

        Reviewed by Gustavo Noronha and Xan Lopez.

        [Gtk] Implement DRT XSS auditor support
        https://bugs.webkit.org/show_bug.cgi?id=26571

        * DumpRenderTree/gtk/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setXSSAuditorEnabled):

2009-06-19  Darin Adler  <darin@apple.com>

        * Scripts/do-webcore-rename: More renaming ideas.

2009-06-15  Andre Pedralho  <andre.pedralho@openbossa.org>

        Reviewed by Tor Arne Vestbø.

        Only pass --makeargs along if an argument is given.

        * Scripts/build-webkit:

2009-06-19  Adam Barth  <abarth@webkit.org>

        Unreviewed attempt to fix Windows build.

        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setXSSAuditorEnabled):

2009-06-18  Adam Barth  <abarth@webkit.org>

        Reviewed by Sam Weinig.

        https://bugs.webkit.org/show_bug.cgi?id=26199

        Add support for testing the XSSAuditor.

        * DumpRenderTree/LayoutTestController.cpp:
        (setXSSAuditorEnabledCallback):
        (LayoutTestController::staticFunctions):
        * DumpRenderTree/LayoutTestController.h:
        * DumpRenderTree/gtk/LayoutTestControllerGtk.cpp:
        (LayoutTestController::setXSSAuditorEnabled):
        * DumpRenderTree/mac/DumpRenderTree.mm:
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/mac/LayoutTestControllerMac.mm:
        (LayoutTestController::setXSSAuditorEnabled):
        * DumpRenderTree/win/DumpRenderTree.cpp:
        (resetWebViewToConsistentStateBeforeTesting):
        * DumpRenderTree/win/LayoutTestControllerWin.cpp:
        (LayoutTestController::setXSSAuditorEnabled):
        (LayoutTestController::setPopupBlockingEnabled):
        * DumpRenderTree/wx/LayoutTestControllerWx.cpp:
        (LayoutTestController::setXSSAuditorEnabled):

2009-06-18  Darin Adler  <darin@apple.com>

        Rubber stamped by Mark Rowe.

        * DumpRenderTree/mac/DumpRenderTreeWindow.mm:
        (-[DumpRenderTreeWindow close]): Resolved crashes seen during regression
        tests. The close method can be called on a window that's already closed
        so we can't assert here.

2009-06-17  Steve Falkenburg  <sfalken@apple.com>

        Updated for consolidated WebKit COM interfaces.
        
        Reviewed by Adam Roben.

        * DumpRenderTree/win/FrameLoadDelegate.cpp:
        * DumpRenderTree/win/FrameLoadDelegate.h:
        * DumpRenderTree/win/UIDelegate.cpp:
        * DumpRenderTree/win/UIDelegate.h:
        * WinLauncher/WinLauncher.h:

2009-06-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=26437

        Make the commit-log-editor match the ambient line endings in commit
        messages.

        * Scripts/commit-log-editor:

2009-06-16  Xan Lopez  <xlopez@igalia.com>

        Reviewed by Gustavo Noronha.

        Update GtkLauncher to recent API changes in the progress property,
        which now goes from 0.0 to 1.0.

        * GtkLauncher/main.c:

2009-06-16  Adam Barth  <abarth@webkit.org>

        Reviewed by Darin Adler.

        https://bugs.webkit.org/show_bug.cgi?id=26000

        Teach prepare-ChangeLog to match the line ends that are already present
        in ChangeLog files.  This helps folks whose use cygwin perl with CR LF
        line endings on Windows.

        Also, teach prepare-ChangeLog to normalize backslashes in paths.  This
        helps folks who use Windows SVN prepare correct ChangeLogs.

        * Scripts/prepare-ChangeLog:

== Rolled over to ChangeLog-2009-06-16 ==
