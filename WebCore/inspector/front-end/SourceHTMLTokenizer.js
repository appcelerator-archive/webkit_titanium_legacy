/* Generated by re2c 0.13.5 on Mon Feb  1 19:13:12 2010 */
/*
 * Copyright (C) 2009 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

// Generate js file as follows:
//
// re2c -isc WebCore/inspector/front-end/SourceHTMLTokenizer.re2js \
// | sed 's|^yy\([^:]*\)*\:|case \1:|' \
// | sed 's|[*]cursor[+][+]|this._charAt(cursor++)|' \
// | sed 's|[[*][+][+]cursor|this._charAt(++cursor)|' \
// | sed 's|[*]cursor|this._charAt(cursor)|' \
// | sed 's|yych = \*\([^;]*\)|yych = this._charAt\1|' \
// | sed 's|{ gotoCase = \([^; continue; };]*\)|{ gotoCase = \1; continue; }|' \
// | sed 's|unsigned\ int|var|' \
// | sed 's|var\ yych|case 1: case 1: var yych|'

WebInspector.SourceHTMLTokenizer = function()
{
    WebInspector.SourceTokenizer.call(this);

    // The order is determined by the generated code.
    this._lexConditions = {
        INITIAL: 0,
        COMMENT: 1,
        TAG: 2,
        DSTRING: 4,
        SSTRING: 5
    };
    this.case_INITIAL = 1000;
    this.case_COMMENT = 1001;
    this.case_TAG = 1002;
    this.case_DSTRING = 1004;
    this.case_SSTRING = 1005;

    this._parseConditions = {
        INITIAL: 0,
        ATTRIBUTE: 1,
        ATTRIBUTE_VALUE: 2,
        SCRIPT: 3,
        SCRIPT_ATTRIBUTE: 4,
        SCRIPT_ATTRIBUTE_VALUE: 5,
        DOCTYPE: 6
    };

    this.initialCondition = { lexCondition: this._lexConditions.INITIAL, parseCondition: this._parseConditions.INITIAL };
}

WebInspector.SourceHTMLTokenizer.prototype = {
    _isAttribute: function()
    {
        return this._parseCondition === this._parseConditions.ATTRIBUTE || this._parseCondition === this._parseConditions.SCRIPT_ATTRIBUTE;
    },

    _isAttributeValue: function()
    {
        return this._parseCondition === this._parseConditions.ATTRIBUTE_VALUE || this._parseCondition === this._parseConditions.SCRIPT_ATTRIBUTE_VALUE;
    },

    _setAttributeValue: function()
    {
        if (this._parseCondition === this._parseConditions.ATTRIBUTE)
            this._parseCondition = this._parseConditions.ATTRIBUTE_VALUE;
        else if (this._parseCondition === this._parseConditions.SCRIPT_ATTRIBUTE)
            this._parseCondition = this._parseConditions.SCRIPT_ATTRIBUTE_VALUE;
    },

    _setAttribute: function()
    {
        if (this._parseCondition === this._parseConditions.ATTRIBUTE_VALUE)
            this._parseCondition = this._parseConditions.ATTRIBUTE;
        else if (this._parseCondition === this._parseConditions.SCRIPT_ATTRIBUTE_VALUE)
            this._parseCondition = this._parseConditions.SCRIPT_ATTRIBUTE;
    },

    _stringToken: function(cursor, stringEnds)
    {
        if (this._isAttributeValue()) {
            this.tokenType = "html-attr-value";
            if (stringEnds)
                this._setAttribute();
        } else if (this._parseCondition === this._parseConditions.DOCTYPE)
            this.tokenType = "html-doctype";
        else
            this.tokenType = null;
        return cursor;
    },

    nextToken: function(cursor)
    {
        var cursorOnEnter = cursor;
        var gotoCase = 1;
        while (1) {
            switch (gotoCase)
            // Following comment is replaced with generated state machine.
            
        {
            case 1: var yych;
            var yyaccept = 0;
            if (this.getLexCondition() < 2) {
                if (this.getLexCondition() < 1) {
                    { gotoCase = this.case_INITIAL; continue; };
                } else {
                    { gotoCase = this.case_COMMENT; continue; };
                }
            } else {
                if (this.getLexCondition() < 3) {
                    { gotoCase = this.case_TAG; continue; };
                } else {
                    if (this.getLexCondition() < 4) {
                        { gotoCase = this.case_DSTRING; continue; };
                    } else {
                        { gotoCase = this.case_SSTRING; continue; };
                    }
                }
            }
/* *********************************** */
case this.case_COMMENT:

            yych = this._charAt(cursor);
            if (yych <= '\f') {
                if (yych == '\n') { gotoCase = 4; continue; };
                { gotoCase = 3; continue; };
            } else {
                if (yych <= '\r') { gotoCase = 4; continue; };
                if (yych == '-') { gotoCase = 6; continue; };
                { gotoCase = 3; continue; };
            }
case 2:
            { this.tokenType = "html-comment"; return cursor; }
case 3:
            yyaccept = 0;
            yych = this._charAt(YYMARKER = ++cursor);
            { gotoCase = 9; continue; };
case 4:
            ++cursor;
case 5:
            { this.tokenType = null; return cursor; }
case 6:
            yyaccept = 1;
            yych = this._charAt(YYMARKER = ++cursor);
            if (yych != '-') { gotoCase = 5; continue; };
case 7:
            ++cursor;
            yych = this._charAt(cursor);
            if (yych == '>') { gotoCase = 10; continue; };
case 8:
            yyaccept = 0;
            YYMARKER = ++cursor;
            yych = this._charAt(cursor);
case 9:
            if (yych <= '\f') {
                if (yych == '\n') { gotoCase = 2; continue; };
                { gotoCase = 8; continue; };
            } else {
                if (yych <= '\r') { gotoCase = 2; continue; };
                if (yych == '-') { gotoCase = 12; continue; };
                { gotoCase = 8; continue; };
            }
case 10:
            ++cursor;
            this.setLexCondition(this._lexConditions.INITIAL);
            { this.tokenType = "html-comment"; return cursor; }
case 12:
            ++cursor;
            yych = this._charAt(cursor);
            if (yych == '-') { gotoCase = 7; continue; };
            cursor = YYMARKER;
            if (yyaccept <= 0) {
                { gotoCase = 2; continue; };
            } else {
                { gotoCase = 5; continue; };
            }
/* *********************************** */
case this.case_DSTRING:
            yych = this._charAt(cursor);
            if (yych <= '\f') {
                if (yych == '\n') { gotoCase = 18; continue; };
                { gotoCase = 17; continue; };
            } else {
                if (yych <= '\r') { gotoCase = 18; continue; };
                if (yych == '"') { gotoCase = 20; continue; };
                { gotoCase = 17; continue; };
            }
case 16:
            { return this._stringToken(cursor); }
case 17:
            yych = this._charAt(++cursor);
            { gotoCase = 24; continue; };
case 18:
            ++cursor;
            { this.tokenType = null; return cursor; }
case 20:
            ++cursor;
case 21:
            this.setLexCondition(this._lexConditions.TAG);
            { return this._stringToken(cursor, true); }
case 22:
            yych = this._charAt(++cursor);
            { gotoCase = 21; continue; };
case 23:
            ++cursor;
            yych = this._charAt(cursor);
case 24:
            if (yych <= '\f') {
                if (yych == '\n') { gotoCase = 16; continue; };
                { gotoCase = 23; continue; };
            } else {
                if (yych <= '\r') { gotoCase = 16; continue; };
                if (yych == '"') { gotoCase = 22; continue; };
                { gotoCase = 23; continue; };
            }
/* *********************************** */
case this.case_INITIAL:
            yych = this._charAt(cursor);
            if (yych == '<') { gotoCase = 29; continue; };
            ++cursor;
            { this.tokenType = null; return cursor; }
case 29:
            yyaccept = 0;
            yych = this._charAt(YYMARKER = ++cursor);
            if (yych <= '/') {
                if (yych == '!') { gotoCase = 34; continue; };
                if (yych >= '/') { gotoCase = 31; continue; };
            } else {
                if (yych <= 'S') {
                    if (yych >= 'S') { gotoCase = 32; continue; };
                } else {
                    if (yych == 's') { gotoCase = 32; continue; };
                }
            }
case 30:
            {
                    if (this._parseCondition === this._parseConditions.SCRIPT) {
                        this.tokenType = null;
                        return cursor;
                    }

                    this.setLexCondition(this._lexConditions.TAG);

                    this.tokenType = "html-tag";
                    this._parseCondition = this._parseConditions.INITIAL;
                    return cursor;
                }
case 31:
            yyaccept = 0;
            yych = this._charAt(YYMARKER = ++cursor);
            if (yych == 'S') { gotoCase = 58; continue; };
            if (yych == 's') { gotoCase = 58; continue; };
            { gotoCase = 30; continue; };
case 32:
            yych = this._charAt(++cursor);
            if (yych == 'C') { gotoCase = 52; continue; };
            if (yych == 'c') { gotoCase = 52; continue; };
case 33:
            cursor = YYMARKER;
            { gotoCase = 30; continue; };
case 34:
            yych = this._charAt(++cursor);
            if (yych <= 'C') {
                if (yych != '-') { gotoCase = 33; continue; };
            } else {
                if (yych <= 'D') { gotoCase = 36; continue; };
                if (yych == 'd') { gotoCase = 36; continue; };
                { gotoCase = 33; continue; };
            }
            yych = this._charAt(++cursor);
            if (yych == '-') { gotoCase = 44; continue; };
            { gotoCase = 33; continue; };
case 36:
            yych = this._charAt(++cursor);
            if (yych == 'O') { gotoCase = 37; continue; };
            if (yych != 'o') { gotoCase = 33; continue; };
case 37:
            yych = this._charAt(++cursor);
            if (yych == 'C') { gotoCase = 38; continue; };
            if (yych != 'c') { gotoCase = 33; continue; };
case 38:
            yych = this._charAt(++cursor);
            if (yych == 'T') { gotoCase = 39; continue; };
            if (yych != 't') { gotoCase = 33; continue; };
case 39:
            yych = this._charAt(++cursor);
            if (yych == 'Y') { gotoCase = 40; continue; };
            if (yych != 'y') { gotoCase = 33; continue; };
case 40:
            yych = this._charAt(++cursor);
            if (yych == 'P') { gotoCase = 41; continue; };
            if (yych != 'p') { gotoCase = 33; continue; };
case 41:
            yych = this._charAt(++cursor);
            if (yych == 'E') { gotoCase = 42; continue; };
            if (yych != 'e') { gotoCase = 33; continue; };
case 42:
            ++cursor;
            this.setLexCondition(this._lexConditions.TAG);
            {
                    this.tokenType = "html-doctype";
                    this._parseCondition = this._parseConditions.DOCTYPE;
                    return cursor;
                }
case 44:
            ++cursor;
            yych = this._charAt(cursor);
            if (yych <= '\f') {
                if (yych == '\n') { gotoCase = 47; continue; };
                { gotoCase = 44; continue; };
            } else {
                if (yych <= '\r') { gotoCase = 47; continue; };
                if (yych != '-') { gotoCase = 44; continue; };
            }
            ++cursor;
            yych = this._charAt(cursor);
            if (yych == '-') { gotoCase = 49; continue; };
            { gotoCase = 33; continue; };
case 47:
            ++cursor;
            this.setLexCondition(this._lexConditions.COMMENT);
            { this.tokenType = "html-comment"; return cursor; }
case 49:
            ++cursor;
            yych = this._charAt(cursor);
            if (yych != '>') { gotoCase = 44; continue; };
            ++cursor;
            { this.tokenType = "html-comment"; return cursor; }
case 52:
            yych = this._charAt(++cursor);
            if (yych == 'R') { gotoCase = 53; continue; };
            if (yych != 'r') { gotoCase = 33; continue; };
case 53:
            yych = this._charAt(++cursor);
            if (yych == 'I') { gotoCase = 54; continue; };
            if (yych != 'i') { gotoCase = 33; continue; };
case 54:
            yych = this._charAt(++cursor);
            if (yych == 'P') { gotoCase = 55; continue; };
            if (yych != 'p') { gotoCase = 33; continue; };
case 55:
            yych = this._charAt(++cursor);
            if (yych == 'T') { gotoCase = 56; continue; };
            if (yych != 't') { gotoCase = 33; continue; };
case 56:
            ++cursor;
            this.setLexCondition(this._lexConditions.TAG);
            {
                    this.tokenType = "html-tag";
                    this._parseCondition = this._parseConditions.SCRIPT_ATTRIBUTE;
                    return cursor;
                }
case 58:
            yych = this._charAt(++cursor);
            if (yych == 'C') { gotoCase = 59; continue; };
            if (yych != 'c') { gotoCase = 33; continue; };
case 59:
            yych = this._charAt(++cursor);
            if (yych == 'R') { gotoCase = 60; continue; };
            if (yych != 'r') { gotoCase = 33; continue; };
case 60:
            yych = this._charAt(++cursor);
            if (yych == 'I') { gotoCase = 61; continue; };
            if (yych != 'i') { gotoCase = 33; continue; };
case 61:
            yych = this._charAt(++cursor);
            if (yych == 'P') { gotoCase = 62; continue; };
            if (yych != 'p') { gotoCase = 33; continue; };
case 62:
            yych = this._charAt(++cursor);
            if (yych == 'T') { gotoCase = 63; continue; };
            if (yych != 't') { gotoCase = 33; continue; };
case 63:
            ++cursor;
            this.setLexCondition(this._lexConditions.TAG);
            {
                    this.tokenType = "html-tag";
                    this._parseCondition = this._parseConditions.INITIAL;
                    return cursor;
                }
/* *********************************** */
case this.case_SSTRING:
            yych = this._charAt(cursor);
            if (yych <= '\f') {
                if (yych == '\n') { gotoCase = 69; continue; };
                { gotoCase = 68; continue; };
            } else {
                if (yych <= '\r') { gotoCase = 69; continue; };
                if (yych == '\'') { gotoCase = 71; continue; };
                { gotoCase = 68; continue; };
            }
case 67:
            { return this._stringToken(cursor); }
case 68:
            yych = this._charAt(++cursor);
            { gotoCase = 75; continue; };
case 69:
            ++cursor;
            { this.tokenType = null; return cursor; }
case 71:
            ++cursor;
case 72:
            this.setLexCondition(this._lexConditions.TAG);
            { return this._stringToken(cursor, true); }
case 73:
            yych = this._charAt(++cursor);
            { gotoCase = 72; continue; };
case 74:
            ++cursor;
            yych = this._charAt(cursor);
case 75:
            if (yych <= '\f') {
                if (yych == '\n') { gotoCase = 67; continue; };
                { gotoCase = 74; continue; };
            } else {
                if (yych <= '\r') { gotoCase = 67; continue; };
                if (yych == '\'') { gotoCase = 73; continue; };
                { gotoCase = 74; continue; };
            }
/* *********************************** */
case this.case_TAG:
            yych = this._charAt(cursor);
            if (yych <= '=') {
                if (yych <= '\'') {
                    if (yych == '"') { gotoCase = 80; continue; };
                    if (yych >= '\'') { gotoCase = 81; continue; };
                } else {
                    if (yych <= '/') { gotoCase = 78; continue; };
                    if (yych <= '9') { gotoCase = 82; continue; };
                    if (yych >= '=') { gotoCase = 84; continue; };
                }
            } else {
                if (yych <= '^') {
                    if (yych <= '>') { gotoCase = 86; continue; };
                    if (yych <= '@') { gotoCase = 78; continue; };
                    if (yych <= 'Z') { gotoCase = 82; continue; };
                } else {
                    if (yych <= '`') {
                        if (yych <= '_') { gotoCase = 82; continue; };
                    } else {
                        if (yych <= 'z') { gotoCase = 82; continue; };
                        if (yych >= 0x80) { gotoCase = 82; continue; };
                    }
                }
            }
case 78:
            ++cursor;
            { this.tokenType = null; return cursor; }
case 80:
            yyaccept = 0;
            yych = this._charAt(YYMARKER = ++cursor);
            { gotoCase = 97; continue; };
case 81:
            yyaccept = 0;
            yych = this._charAt(YYMARKER = ++cursor);
            { gotoCase = 91; continue; };
case 82:
            ++cursor;
            yych = this._charAt(cursor);
            { gotoCase = 89; continue; };
case 83:
            {
                    if (this._parseCondition === this._parseConditions.SCRIPT) {
                        this.tokenType = null;
                        return cursor;
                    }

                    if (this._parseCondition === this._parseConditions.INITIAL) {
                        this.tokenType = "html-tag";
                        this._parseCondition = this._parseConditions.ATTRIBUTE;
                    } else if (this._isAttribute())
                        this.tokenType = "html-attr-name";
                    else if (this._isAttributeValue())
                        this.tokenType = "html-attr-value";
                    else if (this._parseCondition === this._parseConditions.DOCTYPE)
                        this.tokenType = "html-doctype";
                    else
                        this.tokenType = null;
                    return cursor;
                }
case 84:
            ++cursor;
            {
                    if (this._isAttribute()) {
                        this.tokenType = null;
                        this._setAttributeValue();
                    } else if (this._parseCondition === this._parseConditions.DOCTYPE)
                        this.tokenType = "html-doctype";
                    else
                        this.tokenType = null;
                    return cursor;
                }
case 86:
            ++cursor;
            this.setLexCondition(this._lexConditions.INITIAL);
            {
                    if (this._parseCondition === this._parseConditions.SCRIPT) {
                        this.tokenType = null;
                        return cursor;
                    }

                    if (this._parseCondition === this._parseConditions.DOCTYPE)
                        this.tokenType = "html-doctype";
                    else
                        this.tokenType = "html-tag";

                    if (this._parseCondition === this._parseConditions.SCRIPT_ATTRIBUTE)
                        this._parseCondition = this._parseConditions.SCRIPT;
                    else
                        this._parseCondition = this._parseConditions.INITIAL;
                    return cursor;
                }
case 88:
            ++cursor;
            yych = this._charAt(cursor);
case 89:
            if (yych <= '^') {
                if (yych <= '9') {
                    if (yych <= '/') { gotoCase = 83; continue; };
                    { gotoCase = 88; continue; };
                } else {
                    if (yych <= '@') { gotoCase = 83; continue; };
                    if (yych <= 'Z') { gotoCase = 88; continue; };
                    { gotoCase = 83; continue; };
                }
            } else {
                if (yych <= '`') {
                    if (yych <= '_') { gotoCase = 88; continue; };
                    { gotoCase = 83; continue; };
                } else {
                    if (yych <= 'z') { gotoCase = 88; continue; };
                    if (yych <= 0x7F) { gotoCase = 83; continue; };
                    { gotoCase = 88; continue; };
                }
            }
case 90:
            ++cursor;
            yych = this._charAt(cursor);
case 91:
            if (yych <= '\f') {
                if (yych != '\n') { gotoCase = 90; continue; };
            } else {
                if (yych <= '\r') { gotoCase = 92; continue; };
                if (yych == '\'') { gotoCase = 94; continue; };
                { gotoCase = 90; continue; };
            }
case 92:
            ++cursor;
            this.setLexCondition(this._lexConditions.SSTRING);
            { return this._stringToken(cursor); }
case 94:
            ++cursor;
            { return this._stringToken(cursor, true); }
case 96:
            ++cursor;
            yych = this._charAt(cursor);
case 97:
            if (yych <= '\f') {
                if (yych != '\n') { gotoCase = 96; continue; };
            } else {
                if (yych <= '\r') { gotoCase = 98; continue; };
                if (yych == '"') { gotoCase = 94; continue; };
                { gotoCase = 96; continue; };
            }
case 98:
            ++cursor;
            this.setLexCondition(this._lexConditions.DSTRING);
            { return this._stringToken(cursor); }
        }

        }
    }
}

WebInspector.SourceHTMLTokenizer.prototype.__proto__ = WebInspector.SourceTokenizer.prototype;
